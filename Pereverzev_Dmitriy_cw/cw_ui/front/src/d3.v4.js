!function (t, n) { "object" == typeof exports && "undefined" != typeof module ? n(exports) : "function" == typeof define && define.amd ? define(["exports"], n) : n(t.d3 = t.d3 || {}) }(this, function (t) { "use strict"; function n(t, n) { return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN } function e(t) { return 1 === t.length && (t = r(t)), { left: function (n, e, r, i) { for (null == r && (r = 0), null == i && (i = n.length); r < i;) { var o = r + i >>> 1; t(n[o], e) < 0 ? r = o + 1 : i = o } return r }, right: function (n, e, r, i) { for (null == r && (r = 0), null == i && (i = n.length); r < i;) { var o = r + i >>> 1; t(n[o], e) > 0 ? i = o : r = o + 1 } return r } } } function r(t) { return function (e, r) { return n(t(e), r) } } function i(t, n) { return [t, n] } function o(t) { return null === t ? NaN : +t } function u(t, n) { var e, r, i = t.length, u = 0, a = -1, c = 0, s = 0; if (null == n) for (; ++a < i;)isNaN(e = o(t[a])) || (s += (r = e - c) * (e - (c += r / ++u))); else for (; ++a < i;)isNaN(e = o(n(t[a], a, t))) || (s += (r = e - c) * (e - (c += r / ++u))); if (u > 1) return s / (u - 1) } function a(t, n) { var e = u(t, n); return e ? Math.sqrt(e) : e } function c(t, n) { var e, r, i, o = t.length, u = -1; if (null == n) { for (; ++u < o;)if (null != (e = t[u]) && e >= e) for (r = i = e; ++u < o;)null != (e = t[u]) && (r > e && (r = e), i < e && (i = e)) } else for (; ++u < o;)if (null != (e = n(t[u], u, t)) && e >= e) for (r = i = e; ++u < o;)null != (e = n(t[u], u, t)) && (r > e && (r = e), i < e && (i = e)); return [r, i] } function s(t) { return function () { return t } } function f(t) { return t } function l(t, n, e) { t = +t, n = +n, e = (i = arguments.length) < 2 ? (n = t, t = 0, 1) : i < 3 ? 1 : +e; for (var r = -1, i = 0 | Math.max(0, Math.ceil((n - t) / e)), o = new Array(i); ++r < i;)o[r] = t + r * e; return o } function h(t, n, e) { var r, i, o, u, a = -1; if (n = +n, t = +t, e = +e, t === n && e > 0) return [t]; if ((r = n < t) && (i = t, t = n, n = i), 0 === (u = p(t, n, e)) || !isFinite(u)) return []; if (u > 0) for (t = Math.ceil(t / u), n = Math.floor(n / u), o = new Array(i = Math.ceil(n - t + 1)); ++a < i;)o[a] = (t + a) * u; else for (t = Math.floor(t * u), n = Math.ceil(n * u), o = new Array(i = Math.ceil(t - n + 1)); ++a < i;)o[a] = (t - a) / u; return r && o.reverse(), o } function p(t, n, e) { var r = (n - t) / Math.max(0, e), i = Math.floor(Math.log(r) / Math.LN10), o = r / Math.pow(10, i); return i >= 0 ? (o >= jl ? 10 : o >= Xl ? 5 : o >= Vl ? 2 : 1) * Math.pow(10, i) : -Math.pow(10, -i) / (o >= jl ? 10 : o >= Xl ? 5 : o >= Vl ? 2 : 1) } function d(t, n, e) { var r = Math.abs(n - t) / Math.max(0, e), i = Math.pow(10, Math.floor(Math.log(r) / Math.LN10)), o = r / i; return o >= jl ? i *= 10 : o >= Xl ? i *= 5 : o >= Vl && (i *= 2), n < t ? -i : i } function v(t) { return Math.ceil(Math.log(t.length) / Math.LN2) + 1 } function g(t, n, e) { if (null == e && (e = o), r = t.length) { if ((n = +n) <= 0 || r < 2) return +e(t[0], 0, t); if (n >= 1) return +e(t[r - 1], r - 1, t); var r, i = (r - 1) * n, u = Math.floor(i), a = +e(t[u], u, t); return a + (+e(t[u + 1], u + 1, t) - a) * (i - u) } } function _(t) { for (var n, e, r, i = t.length, o = -1, u = 0; ++o < i;)u += t[o].length; for (e = new Array(u); --i >= 0;)for (n = (r = t[i]).length; --n >= 0;)e[--u] = r[n]; return e } function y(t, n) { var e, r, i = t.length, o = -1; if (null == n) { for (; ++o < i;)if (null != (e = t[o]) && e >= e) for (r = e; ++o < i;)null != (e = t[o]) && r > e && (r = e) } else for (; ++o < i;)if (null != (e = n(t[o], o, t)) && e >= e) for (r = e; ++o < i;)null != (e = n(t[o], o, t)) && r > e && (r = e); return r } function m(t) { if (!(i = t.length)) return []; for (var n = -1, e = y(t, x), r = new Array(e); ++n < e;)for (var i, o = -1, u = r[n] = new Array(i); ++o < i;)u[o] = t[o][n]; return r } function x(t) { return t.length } function b(t) { return t } function w(t) { return "translate(" + (t + .5) + ",0)" } function M(t) { return "translate(0," + (t + .5) + ")" } function T(t) { return function (n) { return +t(n) } } function N(t) { var n = Math.max(0, t.bandwidth() - 1) / 2; return t.round() && (n = Math.round(n)), function (e) { return +t(e) + n } } function k() { return !this.__axis } function S(t, n) { function e(e) { var h = null == i ? n.ticks ? n.ticks.apply(n, r) : n.domain() : i, p = null == o ? n.tickFormat ? n.tickFormat.apply(n, r) : b : o, d = Math.max(u, 0) + c, v = n.range(), g = +v[0] + .5, _ = +v[v.length - 1] + .5, y = (n.bandwidth ? N : T)(n.copy()), m = e.selection ? e.selection() : e, x = m.selectAll(".domain").data([null]), w = m.selectAll(".tick").data(h, n).order(), M = w.exit(), S = w.enter().append("g").attr("class", "tick"), E = w.select("line"), A = w.select("text"); x = x.merge(x.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "#000")), w = w.merge(S), E = E.merge(S.append("line").attr("stroke", "#000").attr(f + "2", s * u)), A = A.merge(S.append("text").attr("fill", "#000").attr(f, s * d).attr("dy", t === Wl ? "0em" : t === Gl ? "0.71em" : "0.32em")), e !== m && (x = x.transition(e), w = w.transition(e), E = E.transition(e), A = A.transition(e), M = M.transition(e).attr("opacity", Jl).attr("transform", function (t) { return isFinite(t = y(t)) ? l(t) : this.getAttribute("transform") }), S.attr("opacity", Jl).attr("transform", function (t) { var n = this.parentNode.__axis; return l(n && isFinite(n = n(t)) ? n : y(t)) })), M.remove(), x.attr("d", t === Ql || t == Zl ? "M" + s * a + "," + g + "H0.5V" + _ + "H" + s * a : "M" + g + "," + s * a + "V0.5H" + _ + "V" + s * a), w.attr("opacity", 1).attr("transform", function (t) { return l(y(t)) }), E.attr(f + "2", s * u), A.attr(f, s * d).text(p), m.filter(k).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", t === Zl ? "start" : t === Ql ? "end" : "middle"), m.each(function () { this.__axis = y }) } var r = [], i = null, o = null, u = 6, a = 6, c = 3, s = t === Wl || t === Ql ? -1 : 1, f = t === Ql || t === Zl ? "x" : "y", l = t === Wl || t === Gl ? w : M; return e.scale = function (t) { return arguments.length ? (n = t, e) : n }, e.ticks = function () { return r = $l.call(arguments), e }, e.tickArguments = function (t) { return arguments.length ? (r = null == t ? [] : $l.call(t), e) : r.slice() }, e.tickValues = function (t) { return arguments.length ? (i = null == t ? null : $l.call(t), e) : i && i.slice() }, e.tickFormat = function (t) { return arguments.length ? (o = t, e) : o }, e.tickSize = function (t) { return arguments.length ? (u = a = +t, e) : u }, e.tickSizeInner = function (t) { return arguments.length ? (u = +t, e) : u }, e.tickSizeOuter = function (t) { return arguments.length ? (a = +t, e) : a }, e.tickPadding = function (t) { return arguments.length ? (c = +t, e) : c }, e } function E() { for (var t, n = 0, e = arguments.length, r = {}; n < e; ++n) { if (!(t = arguments[n] + "") || t in r) throw new Error("illegal type: " + t); r[t] = [] } return new A(r) } function A(t) { this._ = t } function C(t, n) { return t.trim().split(/^|\s+/).map(function (t) { var e = "", r = t.indexOf("."); if (r >= 0 && (e = t.slice(r + 1), t = t.slice(0, r)), t && !n.hasOwnProperty(t)) throw new Error("unknown type: " + t); return { type: t, name: e } }) } function z(t, n) { for (var e, r = 0, i = t.length; r < i; ++r)if ((e = t[r]).name === n) return e.value } function P(t, n, e) { for (var r = 0, i = t.length; r < i; ++r)if (t[r].name === n) { t[r] = Kl, t = t.slice(0, r).concat(t.slice(r + 1)); break } return null != e && t.push({ name: n, value: e }), t } function R(t) { var n = t += "", e = n.indexOf(":"); return e >= 0 && "xmlns" !== (n = t.slice(0, e)) && (t = t.slice(e + 1)), nh.hasOwnProperty(n) ? { space: nh[n], local: t } : t } function L(t) { return function () { var n = this.ownerDocument, e = this.namespaceURI; return e === th && n.documentElement.namespaceURI === th ? n.createElement(t) : n.createElementNS(e, t) } } function q(t) { return function () { return this.ownerDocument.createElementNS(t.space, t.local) } } function D(t) { var n = R(t); return (n.local ? q : L)(n) } function U() { } function O(t) { return null == t ? U : function () { return this.querySelector(t) } } function F() { return [] } function I(t) { return null == t ? F : function () { return this.querySelectorAll(t) } } function Y(t) { return new Array(t.length) } function B(t, n) { this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = n } function H(t) { return function () { return t } } function j(t, n, e, r, i, o) { for (var u, a = 0, c = n.length, s = o.length; a < s; ++a)(u = n[a]) ? (u.__data__ = o[a], r[a] = u) : e[a] = new B(t, o[a]); for (; a < c; ++a)(u = n[a]) && (i[a] = u) } function X(t, n, e, r, i, o, u) { var a, c, s, f = {}, l = n.length, h = o.length, p = new Array(l); for (a = 0; a < l; ++a)(c = n[a]) && (p[a] = s = uh + u.call(c, c.__data__, a, n), s in f ? i[a] = c : f[s] = c); for (a = 0; a < h; ++a)(c = f[s = uh + u.call(t, o[a], a, o)]) ? (r[a] = c, c.__data__ = o[a], f[s] = null) : e[a] = new B(t, o[a]); for (a = 0; a < l; ++a)(c = n[a]) && f[p[a]] === c && (i[a] = c) } function V(t, n) { return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN } function $(t) { return function () { this.removeAttribute(t) } } function W(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function Z(t, n) { return function () { this.setAttribute(t, n) } } function G(t, n) { return function () { this.setAttributeNS(t.space, t.local, n) } } function Q(t, n) { return function () { var e = n.apply(this, arguments); null == e ? this.removeAttribute(t) : this.setAttribute(t, e) } } function J(t, n) { return function () { var e = n.apply(this, arguments); null == e ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, e) } } function K(t) { return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView } function tt(t) { return function () { this.style.removeProperty(t) } } function nt(t, n, e) { return function () { this.style.setProperty(t, n, e) } } function et(t, n, e) { return function () { var r = n.apply(this, arguments); null == r ? this.style.removeProperty(t) : this.style.setProperty(t, r, e) } } function rt(t, n) { return t.style.getPropertyValue(n) || K(t).getComputedStyle(t, null).getPropertyValue(n) } function it(t) { return function () { delete this[t] } } function ot(t, n) { return function () { this[t] = n } } function ut(t, n) { return function () { var e = n.apply(this, arguments); null == e ? delete this[t] : this[t] = e } } function at(t) { return t.trim().split(/^|\s+/) } function ct(t) { return t.classList || new st(t) } function st(t) { this._node = t, this._names = at(t.getAttribute("class") || "") } function ft(t, n) { for (var e = ct(t), r = -1, i = n.length; ++r < i;)e.add(n[r]) } function lt(t, n) { for (var e = ct(t), r = -1, i = n.length; ++r < i;)e.remove(n[r]) } function ht(t) { return function () { ft(this, t) } } function pt(t) { return function () { lt(this, t) } } function dt(t, n) { return function () { (n.apply(this, arguments) ? ft : lt)(this, t) } } function vt() { this.textContent = "" } function gt(t) { return function () { this.textContent = t } } function _t(t) { return function () { var n = t.apply(this, arguments); this.textContent = null == n ? "" : n } } function yt() { this.innerHTML = "" } function mt(t) { return function () { this.innerHTML = t } } function xt(t) { return function () { var n = t.apply(this, arguments); this.innerHTML = null == n ? "" : n } } function bt() { this.nextSibling && this.parentNode.appendChild(this) } function wt() { this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild) } function Mt() { return null } function Tt() { var t = this.parentNode; t && t.removeChild(this) } function Nt() { return this.parentNode.insertBefore(this.cloneNode(!1), this.nextSibling) } function kt() { return this.parentNode.insertBefore(this.cloneNode(!0), this.nextSibling) } function St(t, n, e) { return t = Et(t, n, e), function (n) { var e = n.relatedTarget; e && (e === this || 8 & e.compareDocumentPosition(this)) || t.call(this, n) } } function Et(n, e, r) { return function (i) { var o = t.event; t.event = i; try { n.call(this, this.__data__, e, r) } finally { t.event = o } } } function At(t) { return t.trim().split(/^|\s+/).map(function (t) { var n = "", e = t.indexOf("."); return e >= 0 && (n = t.slice(e + 1), t = t.slice(0, e)), { type: t, name: n } }) } function Ct(t) { return function () { var n = this.__on; if (n) { for (var e, r = 0, i = -1, o = n.length; r < o; ++r)e = n[r], t.type && e.type !== t.type || e.name !== t.name ? n[++i] = e : this.removeEventListener(e.type, e.listener, e.capture); ++i ? n.length = i : delete this.__on } } } function zt(t, n, e) { var r = ah.hasOwnProperty(t.type) ? St : Et; return function (i, o, u) { var a, c = this.__on, s = r(n, o, u); if (c) for (var f = 0, l = c.length; f < l; ++f)if ((a = c[f]).type === t.type && a.name === t.name) return this.removeEventListener(a.type, a.listener, a.capture), this.addEventListener(a.type, a.listener = s, a.capture = e), void (a.value = n); this.addEventListener(t.type, s, e), a = { type: t.type, name: t.name, value: n, listener: s, capture: e }, c ? c.push(a) : this.__on = [a] } } function Pt(n, e, r, i) { var o = t.event; n.sourceEvent = t.event, t.event = n; try { return e.apply(r, i) } finally { t.event = o } } function Rt(t, n, e) { var r = K(t), i = r.CustomEvent; "function" == typeof i ? i = new i(n, e) : (i = r.document.createEvent("Event"), e ? (i.initEvent(n, e.bubbles, e.cancelable), i.detail = e.detail) : i.initEvent(n, !1, !1)), t.dispatchEvent(i) } function Lt(t, n) { return function () { return Rt(this, t, n) } } function qt(t, n) { return function () { return Rt(this, t, n.apply(this, arguments)) } } function Dt(t, n) { this._groups = t, this._parents = n } function Ut() { return new Dt([[document.documentElement]], ch) } function Ot(t) { return "string" == typeof t ? new Dt([[document.querySelector(t)]], [document.documentElement]) : new Dt([[t]], ch) } function Ft() { return new It } function It() { this._ = "@" + (++sh).toString(36) } function Yt() { for (var n, e = t.event; n = e.sourceEvent;)e = n; return e } function Bt(t, n) { var e = t.ownerSVGElement || t; if (e.createSVGPoint) { var r = e.createSVGPoint(); return r.x = n.clientX, r.y = n.clientY, r = r.matrixTransform(t.getScreenCTM().inverse()), [r.x, r.y] } var i = t.getBoundingClientRect(); return [n.clientX - i.left - t.clientLeft, n.clientY - i.top - t.clientTop] } function Ht(t) { var n = Yt(); return n.changedTouches && (n = n.changedTouches[0]), Bt(t, n) } function jt(t, n, e) { arguments.length < 3 && (e = n, n = Yt().changedTouches); for (var r, i = 0, o = n ? n.length : 0; i < o; ++i)if ((r = n[i]).identifier === e) return Bt(t, r); return null } function Xt() { t.event.stopImmediatePropagation() } function Vt() { t.event.preventDefault(), t.event.stopImmediatePropagation() } function $t(t) { var n = t.document.documentElement, e = Ot(t).on("dragstart.drag", Vt, !0); "onselectstart" in n ? e.on("selectstart.drag", Vt, !0) : (n.__noselect = n.style.MozUserSelect, n.style.MozUserSelect = "none") } function Wt(t, n) { var e = t.document.documentElement, r = Ot(t).on("dragstart.drag", null); n && (r.on("click.drag", Vt, !0), setTimeout(function () { r.on("click.drag", null) }, 0)), "onselectstart" in e ? r.on("selectstart.drag", null) : (e.style.MozUserSelect = e.__noselect, delete e.__noselect) } function Zt(t) { return function () { return t } } function Gt(t, n, e, r, i, o, u, a, c, s) { this.target = t, this.type = n, this.subject = e, this.identifier = r, this.active = i, this.x = o, this.y = u, this.dx = a, this.dy = c, this._ = s } function Qt() { return !t.event.button } function Jt() { return this.parentNode } function Kt(n) { return null == n ? { x: t.event.x, y: t.event.y } : n } function tn() { return "ontouchstart" in this } function nn(t, n, e) { t.prototype = n.prototype = e, e.constructor = t } function en(t, n) { var e = Object.create(t.prototype); for (var r in n) e[r] = n[r]; return e } function rn() { } function on(t) { var n; return t = (t + "").trim().toLowerCase(), (n = ph.exec(t)) ? (n = parseInt(n[1], 16), new fn(n >> 8 & 15 | n >> 4 & 240, n >> 4 & 15 | 240 & n, (15 & n) << 4 | 15 & n, 1)) : (n = dh.exec(t)) ? un(parseInt(n[1], 16)) : (n = vh.exec(t)) ? new fn(n[1], n[2], n[3], 1) : (n = gh.exec(t)) ? new fn(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, 1) : (n = _h.exec(t)) ? an(n[1], n[2], n[3], n[4]) : (n = yh.exec(t)) ? an(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, n[4]) : (n = mh.exec(t)) ? ln(n[1], n[2] / 100, n[3] / 100, 1) : (n = xh.exec(t)) ? ln(n[1], n[2] / 100, n[3] / 100, n[4]) : bh.hasOwnProperty(t) ? un(bh[t]) : "transparent" === t ? new fn(NaN, NaN, NaN, 0) : null } function un(t) { return new fn(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function an(t, n, e, r) { return r <= 0 && (t = n = e = NaN), new fn(t, n, e, r) } function cn(t) { return t instanceof rn || (t = on(t)), t ? (t = t.rgb(), new fn(t.r, t.g, t.b, t.opacity)) : new fn } function sn(t, n, e, r) { return 1 === arguments.length ? cn(t) : new fn(t, n, e, null == r ? 1 : r) } function fn(t, n, e, r) { this.r = +t, this.g = +n, this.b = +e, this.opacity = +r } function ln(t, n, e, r) { return r <= 0 ? t = n = e = NaN : e <= 0 || e >= 1 ? t = n = NaN : n <= 0 && (t = NaN), new dn(t, n, e, r) } function hn(t) { if (t instanceof dn) return new dn(t.h, t.s, t.l, t.opacity); if (t instanceof rn || (t = on(t)), !t) return new dn; if (t instanceof dn) return t; var n = (t = t.rgb()).r / 255, e = t.g / 255, r = t.b / 255, i = Math.min(n, e, r), o = Math.max(n, e, r), u = NaN, a = o - i, c = (o + i) / 2; return a ? (u = n === o ? (e - r) / a + 6 * (e < r) : e === o ? (r - n) / a + 2 : (n - e) / a + 4, a /= c < .5 ? o + i : 2 - o - i, u *= 60) : a = c > 0 && c < 1 ? 0 : u, new dn(u, a, c, t.opacity) } function pn(t, n, e, r) { return 1 === arguments.length ? hn(t) : new dn(t, n, e, null == r ? 1 : r) } function dn(t, n, e, r) { this.h = +t, this.s = +n, this.l = +e, this.opacity = +r } function vn(t, n, e) { return 255 * (t < 60 ? n + (e - n) * t / 60 : t < 180 ? e : t < 240 ? n + (e - n) * (240 - t) / 60 : n) } function gn(t) { if (t instanceof yn) return new yn(t.l, t.a, t.b, t.opacity); if (t instanceof Nn) { var n = t.h * wh; return new yn(t.l, Math.cos(n) * t.c, Math.sin(n) * t.c, t.opacity) } t instanceof fn || (t = cn(t)); var e = wn(t.r), r = wn(t.g), i = wn(t.b), o = mn((.4124564 * e + .3575761 * r + .1804375 * i) / Th), u = mn((.2126729 * e + .7151522 * r + .072175 * i) / Nh); return new yn(116 * u - 16, 500 * (o - u), 200 * (u - mn((.0193339 * e + .119192 * r + .9503041 * i) / kh)), t.opacity) } function _n(t, n, e, r) { return 1 === arguments.length ? gn(t) : new yn(t, n, e, null == r ? 1 : r) } function yn(t, n, e, r) { this.l = +t, this.a = +n, this.b = +e, this.opacity = +r } function mn(t) { return t > Ch ? Math.pow(t, 1 / 3) : t / Ah + Sh } function xn(t) { return t > Eh ? t * t * t : Ah * (t - Sh) } function bn(t) { return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055) } function wn(t) { return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4) } function Mn(t) { if (t instanceof Nn) return new Nn(t.h, t.c, t.l, t.opacity); t instanceof yn || (t = gn(t)); var n = Math.atan2(t.b, t.a) * Mh; return new Nn(n < 0 ? n + 360 : n, Math.sqrt(t.a * t.a + t.b * t.b), t.l, t.opacity) } function Tn(t, n, e, r) { return 1 === arguments.length ? Mn(t) : new Nn(t, n, e, null == r ? 1 : r) } function Nn(t, n, e, r) { this.h = +t, this.c = +n, this.l = +e, this.opacity = +r } function kn(t) { if (t instanceof En) return new En(t.h, t.s, t.l, t.opacity); t instanceof fn || (t = cn(t)); var n = t.r / 255, e = t.g / 255, r = t.b / 255, i = (Oh * r + Dh * n - Uh * e) / (Oh + Dh - Uh), o = r - i, u = (qh * (e - i) - Rh * o) / Lh, a = Math.sqrt(u * u + o * o) / (qh * i * (1 - i)), c = a ? Math.atan2(u, o) * Mh - 120 : NaN; return new En(c < 0 ? c + 360 : c, a, i, t.opacity) } function Sn(t, n, e, r) { return 1 === arguments.length ? kn(t) : new En(t, n, e, null == r ? 1 : r) } function En(t, n, e, r) { this.h = +t, this.s = +n, this.l = +e, this.opacity = +r } function An(t, n, e, r, i) { var o = t * t, u = o * t; return ((1 - 3 * t + 3 * o - u) * n + (4 - 6 * o + 3 * u) * e + (1 + 3 * t + 3 * o - 3 * u) * r + u * i) / 6 } function Cn(t) { var n = t.length - 1; return function (e) { var r = e <= 0 ? e = 0 : e >= 1 ? (e = 1, n - 1) : Math.floor(e * n), i = t[r], o = t[r + 1], u = r > 0 ? t[r - 1] : 2 * i - o, a = r < n - 1 ? t[r + 2] : 2 * o - i; return An((e - r / n) * n, u, i, o, a) } } function zn(t) { var n = t.length; return function (e) { var r = Math.floor(((e %= 1) < 0 ? ++e : e) * n), i = t[(r + n - 1) % n], o = t[r % n], u = t[(r + 1) % n], a = t[(r + 2) % n]; return An((e - r / n) * n, i, o, u, a) } } function Pn(t) { return function () { return t } } function Rn(t, n) { return function (e) { return t + e * n } } function Ln(t, n, e) { return t = Math.pow(t, e), n = Math.pow(n, e) - t, e = 1 / e, function (r) { return Math.pow(t + r * n, e) } } function qn(t, n) { var e = n - t; return e ? Rn(t, e > 180 || e < -180 ? e - 360 * Math.round(e / 360) : e) : Pn(isNaN(t) ? n : t) } function Dn(t) { return 1 == (t = +t) ? Un : function (n, e) { return e - n ? Ln(n, e, t) : Pn(isNaN(n) ? e : n) } } function Un(t, n) { var e = n - t; return e ? Rn(t, e) : Pn(isNaN(t) ? n : t) } function On(t) { return function (n) { var e, r, i = n.length, o = new Array(i), u = new Array(i), a = new Array(i); for (e = 0; e < i; ++e)r = sn(n[e]), o[e] = r.r || 0, u[e] = r.g || 0, a[e] = r.b || 0; return o = t(o), u = t(u), a = t(a), r.opacity = 1, function (t) { return r.r = o(t), r.g = u(t), r.b = a(t), r + "" } } } function Fn(t, n) { var e, r = n ? n.length : 0, i = t ? Math.min(r, t.length) : 0, o = new Array(i), u = new Array(r); for (e = 0; e < i; ++e)o[e] = Vn(t[e], n[e]); for (; e < r; ++e)u[e] = n[e]; return function (t) { for (e = 0; e < i; ++e)u[e] = o[e](t); return u } } function In(t, n) { var e = new Date; return t = +t, n -= t, function (r) { return e.setTime(t + n * r), e } } function Yn(t, n) { return t = +t, n -= t, function (e) { return t + n * e } } function Bn(t, n) { var e, r = {}, i = {}; null !== t && "object" == typeof t || (t = {}), null !== n && "object" == typeof n || (n = {}); for (e in n) e in t ? r[e] = Vn(t[e], n[e]) : i[e] = n[e]; return function (t) { for (e in r) i[e] = r[e](t); return i } } function Hn(t) { return function () { return t } } function jn(t) { return function (n) { return t(n) + "" } } function Xn(t, n) { var e, r, i, o = Wh.lastIndex = Zh.lastIndex = 0, u = -1, a = [], c = []; for (t += "", n += ""; (e = Wh.exec(t)) && (r = Zh.exec(n));)(i = r.index) > o && (i = n.slice(o, i), a[u] ? a[u] += i : a[++u] = i), (e = e[0]) === (r = r[0]) ? a[u] ? a[u] += r : a[++u] = r : (a[++u] = null, c.push({ i: u, x: Yn(e, r) })), o = Zh.lastIndex; return o < n.length && (i = n.slice(o), a[u] ? a[u] += i : a[++u] = i), a.length < 2 ? c[0] ? jn(c[0].x) : Hn(n) : (n = c.length, function (t) { for (var e, r = 0; r < n; ++r)a[(e = c[r]).i] = e.x(t); return a.join("") }) } function Vn(t, n) { var e, r = typeof n; return null == n || "boolean" === r ? Pn(n) : ("number" === r ? Yn : "string" === r ? (e = on(n)) ? (n = e, Xh) : Xn : n instanceof on ? Xh : n instanceof Date ? In : Array.isArray(n) ? Fn : "function" != typeof n.valueOf && "function" != typeof n.toString || isNaN(n) ? Bn : Yn)(t, n) } function $n(t, n) { return t = +t, n -= t, function (e) { return Math.round(t + n * e) } } function Wn(t, n, e, r, i, o) { var u, a, c; return (u = Math.sqrt(t * t + n * n)) && (t /= u, n /= u), (c = t * e + n * r) && (e -= t * c, r -= n * c), (a = Math.sqrt(e * e + r * r)) && (e /= a, r /= a, c /= a), t * r < n * e && (t = -t, n = -n, c = -c, u = -u), { translateX: i, translateY: o, rotate: Math.atan2(n, t) * Gh, skewX: Math.atan(c) * Gh, scaleX: u, scaleY: a } } function Zn(t, n, e, r) { function i(t) { return t.length ? t.pop() + " " : "" } function o(t, r, i, o, u, a) { if (t !== i || r !== o) { var c = u.push("translate(", null, n, null, e); a.push({ i: c - 4, x: Yn(t, i) }, { i: c - 2, x: Yn(r, o) }) } else (i || o) && u.push("translate(" + i + n + o + e) } function u(t, n, e, o) { t !== n ? (t - n > 180 ? n += 360 : n - t > 180 && (t += 360), o.push({ i: e.push(i(e) + "rotate(", null, r) - 2, x: Yn(t, n) })) : n && e.push(i(e) + "rotate(" + n + r) } function a(t, n, e, o) { t !== n ? o.push({ i: e.push(i(e) + "skewX(", null, r) - 2, x: Yn(t, n) }) : n && e.push(i(e) + "skewX(" + n + r) } function c(t, n, e, r, o, u) { if (t !== e || n !== r) { var a = o.push(i(o) + "scale(", null, ",", null, ")"); u.push({ i: a - 4, x: Yn(t, e) }, { i: a - 2, x: Yn(n, r) }) } else 1 === e && 1 === r || o.push(i(o) + "scale(" + e + "," + r + ")") } return function (n, e) { var r = [], i = []; return n = t(n), e = t(e), o(n.translateX, n.translateY, e.translateX, e.translateY, r, i), u(n.rotate, e.rotate, r, i), a(n.skewX, e.skewX, r, i), c(n.scaleX, n.scaleY, e.scaleX, e.scaleY, r, i), n = e = null, function (t) { for (var n, e = -1, o = i.length; ++e < o;)r[(n = i[e]).i] = n.x(t); return r.join("") } } } function Gn(t) { return ((t = Math.exp(t)) + 1 / t) / 2 } function Qn(t) { return ((t = Math.exp(t)) - 1 / t) / 2 } function Jn(t) { return ((t = Math.exp(2 * t)) - 1) / (t + 1) } function Kn(t, n) { var e, r, i = t[0], o = t[1], u = t[2], a = n[0], c = n[1], s = n[2], f = a - i, l = c - o, h = f * f + l * l; if (h < rp) r = Math.log(s / u) / tp, e = function (t) { return [i + t * f, o + t * l, u * Math.exp(tp * t * r)] }; else { var p = Math.sqrt(h), d = (s * s - u * u + ep * h) / (2 * u * np * p), v = (s * s - u * u - ep * h) / (2 * s * np * p), g = Math.log(Math.sqrt(d * d + 1) - d), _ = Math.log(Math.sqrt(v * v + 1) - v); r = (_ - g) / tp, e = function (t) { var n = t * r, e = Gn(g), a = u / (np * p) * (e * Jn(tp * n + g) - Qn(g)); return [i + a * f, o + a * l, u * e / Gn(tp * n + g)] } } return e.duration = 1e3 * r, e } function te(t) { return function (n, e) { var r = t((n = pn(n)).h, (e = pn(e)).h), i = Un(n.s, e.s), o = Un(n.l, e.l), u = Un(n.opacity, e.opacity); return function (t) { return n.h = r(t), n.s = i(t), n.l = o(t), n.opacity = u(t), n + "" } } } function ne(t) { return function (n, e) { var r = t((n = Tn(n)).h, (e = Tn(e)).h), i = Un(n.c, e.c), o = Un(n.l, e.l), u = Un(n.opacity, e.opacity); return function (t) { return n.h = r(t), n.c = i(t), n.l = o(t), n.opacity = u(t), n + "" } } } function ee(t) { return function n(e) { function r(n, r) { var i = t((n = Sn(n)).h, (r = Sn(r)).h), o = Un(n.s, r.s), u = Un(n.l, r.l), a = Un(n.opacity, r.opacity); return function (t) { return n.h = i(t), n.s = o(t), n.l = u(Math.pow(t, e)), n.opacity = a(t), n + "" } } return e = +e, r.gamma = n, r }(1) } function re() { return vp || (yp(ie), vp = _p.now() + gp) } function ie() { vp = 0 } function oe() { this._call = this._time = this._next = null } function ue(t, n, e) { var r = new oe; return r.restart(t, n, e), r } function ae() { re(), ++fp; for (var t, n = Hh; n;)(t = vp - n._time) >= 0 && n._call.call(null, t), n = n._next; --fp } function ce() { vp = (dp = _p.now()) + gp, fp = lp = 0; try { ae() } finally { fp = 0, fe(), vp = 0 } } function se() { var t = _p.now(), n = t - dp; n > pp && (gp -= n, dp = t) } function fe() { for (var t, n, e = Hh, r = 1 / 0; e;)e._call ? (r > e._time && (r = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : Hh = n); jh = t, le(r) } function le(t) { fp || (lp && (lp = clearTimeout(lp)), t - vp > 24 ? (t < 1 / 0 && (lp = setTimeout(ce, t - _p.now() - gp)), hp && (hp = clearInterval(hp))) : (hp || (dp = _p.now(), hp = setInterval(se, pp)), fp = 1, yp(ce))) } function he(t, n, e) { var r = new oe; return n = null == n ? 0 : +n, r.restart(function (e) { r.stop(), t(e + n) }, n, e), r } function pe(t, n, e, r, i, o) { var u = t.__transition; if (u) { if (e in u) return } else t.__transition = {}; _e(t, e, { name: n, index: r, group: i, on: mp, tween: xp, time: o.time, delay: o.delay, duration: o.duration, ease: o.ease, timer: null, state: bp }) } function de(t, n) { var e = ge(t, n); if (e.state > bp) throw new Error("too late; already scheduled"); return e } function ve(t, n) { var e = ge(t, n); if (e.state > Mp) throw new Error("too late; already started"); return e } function ge(t, n) { var e = t.__transition; if (!e || !(e = e[n])) throw new Error("transition not found"); return e } function _e(t, n, e) { function r(c) { var s, f, l, h; if (e.state !== wp) return o(); for (s in a) if ((h = a[s]).name === e.name) { if (h.state === Tp) return he(r); h.state === Np ? (h.state = Sp, h.timer.stop(), h.on.call("interrupt", t, t.__data__, h.index, h.group), delete a[s]) : +s < n && (h.state = Sp, h.timer.stop(), delete a[s]) } if (he(function () { e.state === Tp && (e.state = Np, e.timer.restart(i, e.delay, e.time), i(c)) }), e.state = Mp, e.on.call("start", t, t.__data__, e.index, e.group), e.state === Mp) { for (e.state = Tp, u = new Array(l = e.tween.length), s = 0, f = -1; s < l; ++s)(h = e.tween[s].value.call(t, t.__data__, e.index, e.group)) && (u[++f] = h); u.length = f + 1 } } function i(n) { for (var r = n < e.duration ? e.ease.call(null, n / e.duration) : (e.timer.restart(o), e.state = kp, 1), i = -1, a = u.length; ++i < a;)u[i].call(null, r); e.state === kp && (e.on.call("end", t, t.__data__, e.index, e.group), o()) } function o() { e.state = Sp, e.timer.stop(), delete a[n]; for (var r in a) return; delete t.__transition } var u, a = t.__transition; a[n] = e, e.timer = ue(function (t) { e.state = wp, e.timer.restart(r, e.delay, e.time), e.delay <= t && r(t - e.delay) }, 0, e.time) } function ye(t, n) { var e, r, i, o = t.__transition, u = !0; if (o) { n = null == n ? null : n + ""; for (i in o) (e = o[i]).name === n ? (r = e.state > Mp && e.state < kp, e.state = Sp, e.timer.stop(), r && e.on.call("interrupt", t, t.__data__, e.index, e.group), delete o[i]) : u = !1; u && delete t.__transition } } function me(t, n) { var e, r; return function () { var i = ve(this, t), o = i.tween; if (o !== e) for (var u = 0, a = (r = e = o).length; u < a; ++u)if (r[u].name === n) { (r = r.slice()).splice(u, 1); break } i.tween = r } } function xe(t, n, e) { var r, i; if ("function" != typeof e) throw new Error; return function () { var o = ve(this, t), u = o.tween; if (u !== r) { i = (r = u).slice(); for (var a = { name: n, value: e }, c = 0, s = i.length; c < s; ++c)if (i[c].name === n) { i[c] = a; break } c === s && i.push(a) } o.tween = i } } function be(t, n, e) { var r = t._id; return t.each(function () { var t = ve(this, r); (t.value || (t.value = {}))[n] = e.apply(this, arguments) }), function (t) { return ge(t, r).value[n] } } function we(t, n) { var e; return ("number" == typeof n ? Yn : n instanceof on ? Xh : (e = on(n)) ? (n = e, Xh) : Xn)(t, n) } function Me(t) { return function () { this.removeAttribute(t) } } function Te(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function Ne(t, n, e) { var r, i; return function () { var o = this.getAttribute(t); return o === e ? null : o === r ? i : i = n(r = o, e) } } function ke(t, n, e) { var r, i; return function () { var o = this.getAttributeNS(t.space, t.local); return o === e ? null : o === r ? i : i = n(r = o, e) } } function Se(t, n, e) { var r, i, o; return function () { var u, a = e(this); { if (null != a) return (u = this.getAttribute(t)) === a ? null : u === r && a === i ? o : o = n(r = u, i = a); this.removeAttribute(t) } } } function Ee(t, n, e) { var r, i, o; return function () { var u, a = e(this); { if (null != a) return (u = this.getAttributeNS(t.space, t.local)) === a ? null : u === r && a === i ? o : o = n(r = u, i = a); this.removeAttributeNS(t.space, t.local) } } } function Ae(t, n) { function e() { var e = this, r = n.apply(e, arguments); return r && function (n) { e.setAttributeNS(t.space, t.local, r(n)) } } return e._value = n, e } function Ce(t, n) { function e() { var e = this, r = n.apply(e, arguments); return r && function (n) { e.setAttribute(t, r(n)) } } return e._value = n, e } function ze(t, n) { return function () { de(this, t).delay = +n.apply(this, arguments) } } function Pe(t, n) { return n = +n, function () { de(this, t).delay = n } } function Re(t, n) { return function () { ve(this, t).duration = +n.apply(this, arguments) } } function Le(t, n) { return n = +n, function () { ve(this, t).duration = n } } function qe(t, n) { if ("function" != typeof n) throw new Error; return function () { ve(this, t).ease = n } } function De(t) { return (t + "").trim().split(/^|\s+/).every(function (t) { var n = t.indexOf("."); return n >= 0 && (t = t.slice(0, n)), !t || "start" === t }) } function Ue(t, n, e) { var r, i, o = De(n) ? de : ve; return function () { var u = o(this, t), a = u.on; a !== r && (i = (r = a).copy()).on(n, e), u.on = i } } function Oe(t) { return function () { var n = this.parentNode; for (var e in this.__transition) if (+e !== t) return; n && n.removeChild(this) } } function Fe(t, n) { var e, r, i; return function () { var o = rt(this, t), u = (this.style.removeProperty(t), rt(this, t)); return o === u ? null : o === e && u === r ? i : i = n(e = o, r = u) } } function Ie(t) { return function () { this.style.removeProperty(t) } } function Ye(t, n, e) { var r, i; return function () { var o = rt(this, t); return o === e ? null : o === r ? i : i = n(r = o, e) } } function Be(t, n, e) { var r, i, o; return function () { var u = rt(this, t), a = e(this); return null == a && (this.style.removeProperty(t), a = rt(this, t)), u === a ? null : u === r && a === i ? o : o = n(r = u, i = a) } } function He(t, n, e) { function r() { var r = this, i = n.apply(r, arguments); return i && function (n) { r.style.setProperty(t, i(n), e) } } return r._value = n, r } function je(t) { return function () { this.textContent = t } } function Xe(t) { return function () { var n = t(this); this.textContent = null == n ? "" : n } } function Ve(t, n, e, r) { this._groups = t, this._parents = n, this._name = e, this._id = r } function $e(t) { return Ut().transition(t) } function We() { return ++Ap } function Ze(t) { return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2 } function Ge(t) { return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2 } function Qe(t) { return (1 - Math.cos(Lp * t)) / 2 } function Je(t) { return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2 } function Ke(t) { return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2 } function tr(t) { return (t = +t) < Dp ? Xp * t * t : t < Op ? Xp * (t -= Up) * t + Fp : t < Yp ? Xp * (t -= Ip) * t + Bp : Xp * (t -= Hp) * t + jp } function nr(t, n) { for (var e; !(e = t.__transition) || !(e = e[n]);)if (!(t = t.parentNode)) return Kp.time = re(), Kp; return e } function er(t) { return function () { return t } } function rr(t, n, e) { this.target = t, this.type = n, this.selection = e } function ir() { t.event.stopImmediatePropagation() } function or() { t.event.preventDefault(), t.event.stopImmediatePropagation() } function ur(t) { return { type: t } } function ar() { return !t.event.button } function cr() { var t = this.ownerSVGElement || this; return [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]] } function sr(t) { for (; !t.__brush;)if (!(t = t.parentNode)) return; return t.__brush } function fr(t) { return t[0][0] === t[1][0] || t[0][1] === t[1][1] } function lr(n) { function e(t) { var e = t.property("__brush", a).selectAll(".overlay").data([ur("overlay")]); e.enter().append("rect").attr("class", "overlay").attr("pointer-events", "all").attr("cursor", cd.overlay).merge(e).each(function () { var t = sr(this).extent; Ot(this).attr("x", t[0][0]).attr("y", t[0][1]).attr("width", t[1][0] - t[0][0]).attr("height", t[1][1] - t[0][1]) }), t.selectAll(".selection").data([ur("selection")]).enter().append("rect").attr("class", "selection").attr("cursor", cd.selection).attr("fill", "#777").attr("fill-opacity", .3).attr("stroke", "#fff").attr("shape-rendering", "crispEdges"); var i = t.selectAll(".handle").data(n.handles, function (t) { return t.type }); i.exit().remove(), i.enter().append("rect").attr("class", function (t) { return "handle handle--" + t.type }).attr("cursor", function (t) { return cd[t.type] }), t.each(r).attr("fill", "none").attr("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush touchstart.brush", u) } function r() { var t = Ot(this), n = sr(this).selection; n ? (t.selectAll(".selection").style("display", null).attr("x", n[0][0]).attr("y", n[0][1]).attr("width", n[1][0] - n[0][0]).attr("height", n[1][1] - n[0][1]), t.selectAll(".handle").style("display", null).attr("x", function (t) { return "e" === t.type[t.type.length - 1] ? n[1][0] - h / 2 : n[0][0] - h / 2 }).attr("y", function (t) { return "s" === t.type[0] ? n[1][1] - h / 2 : n[0][1] - h / 2 }).attr("width", function (t) { return "n" === t.type || "s" === t.type ? n[1][0] - n[0][0] + h : h }).attr("height", function (t) { return "e" === t.type || "w" === t.type ? n[1][1] - n[0][1] + h : h })) : t.selectAll(".selection,.handle").style("display", "none").attr("x", null).attr("y", null).attr("width", null).attr("height", null) } function i(t, n) { return t.__brush.emitter || new o(t, n) } function o(t, n) { this.that = t, this.args = n, this.state = t.__brush, this.active = 0 } function u() { function e() { var t = Ht(w); !L || x || b || (Math.abs(t[0] - D[0]) > Math.abs(t[1] - D[1]) ? b = !0 : x = !0), D = t, m = !0, or(), o() } function o() { var t; switch (_ = D[0] - q[0], y = D[1] - q[1], T) { case ed: case nd: N && (_ = Math.max(C - a, Math.min(P - p, _)), s = a + _, d = p + _), k && (y = Math.max(z - l, Math.min(R - v, y)), h = l + y, g = v + y); break; case rd: N < 0 ? (_ = Math.max(C - a, Math.min(P - a, _)), s = a + _, d = p) : N > 0 && (_ = Math.max(C - p, Math.min(P - p, _)), s = a, d = p + _), k < 0 ? (y = Math.max(z - l, Math.min(R - l, y)), h = l + y, g = v) : k > 0 && (y = Math.max(z - v, Math.min(R - v, y)), h = l, g = v + y); break; case id: N && (s = Math.max(C, Math.min(P, a - _ * N)), d = Math.max(C, Math.min(P, p + _ * N))), k && (h = Math.max(z, Math.min(R, l - y * k)), g = Math.max(z, Math.min(R, v + y * k))) }d < s && (N *= -1, t = a, a = p, p = t, t = s, s = d, d = t, M in sd && F.attr("cursor", cd[M = sd[M]])), g < h && (k *= -1, t = l, l = v, v = t, t = h, h = g, g = t, M in fd && F.attr("cursor", cd[M = fd[M]])), S.selection && (A = S.selection), x && (s = A[0][0], d = A[1][0]), b && (h = A[0][1], g = A[1][1]), A[0][0] === s && A[0][1] === h && A[1][0] === d && A[1][1] === g || (S.selection = [[s, h], [d, g]], r.call(w), U.brush()) } function u() { if (ir(), t.event.touches) { if (t.event.touches.length) return; c && clearTimeout(c), c = setTimeout(function () { c = null }, 500), O.on("touchmove.brush touchend.brush touchcancel.brush", null) } else Wt(t.event.view, m), I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush", null); O.attr("pointer-events", "all"), F.attr("cursor", cd.overlay), S.selection && (A = S.selection), fr(A) && (S.selection = null, r.call(w)), U.end() } if (t.event.touches) { if (t.event.changedTouches.length < t.event.touches.length) return or() } else if (c) return; if (f.apply(this, arguments)) { var a, s, l, h, p, d, v, g, _, y, m, x, b, w = this, M = t.event.target.__data__.type, T = "selection" === (t.event.metaKey ? M = "overlay" : M) ? nd : t.event.altKey ? id : rd, N = n === ud ? null : ld[M], k = n === od ? null : hd[M], S = sr(w), E = S.extent, A = S.selection, C = E[0][0], z = E[0][1], P = E[1][0], R = E[1][1], L = N && k && t.event.shiftKey, q = Ht(w), D = q, U = i(w, arguments).beforestart(); "overlay" === M ? S.selection = A = [[a = n === ud ? C : q[0], l = n === od ? z : q[1]], [p = n === ud ? P : a, v = n === od ? R : l]] : (a = A[0][0], l = A[0][1], p = A[1][0], v = A[1][1]), s = a, h = l, d = p, g = v; var O = Ot(w).attr("pointer-events", "none"), F = O.selectAll(".overlay").attr("cursor", cd[M]); if (t.event.touches) O.on("touchmove.brush", e, !0).on("touchend.brush touchcancel.brush", u, !0); else { var I = Ot(t.event.view).on("keydown.brush", function () { switch (t.event.keyCode) { case 16: L = N && k; break; case 18: T === rd && (N && (p = d - _ * N, a = s + _ * N), k && (v = g - y * k, l = h + y * k), T = id, o()); break; case 32: T !== rd && T !== id || (N < 0 ? p = d - _ : N > 0 && (a = s - _), k < 0 ? v = g - y : k > 0 && (l = h - y), T = ed, F.attr("cursor", cd.selection), o()); break; default: return }or() }, !0).on("keyup.brush", function () { switch (t.event.keyCode) { case 16: L && (x = b = L = !1, o()); break; case 18: T === id && (N < 0 ? p = d : N > 0 && (a = s), k < 0 ? v = g : k > 0 && (l = h), T = rd, o()); break; case 32: T === ed && (t.event.altKey ? (N && (p = d - _ * N, a = s + _ * N), k && (v = g - y * k, l = h + y * k), T = id) : (N < 0 ? p = d : N > 0 && (a = s), k < 0 ? v = g : k > 0 && (l = h), T = rd), F.attr("cursor", cd[M]), o()); break; default: return }or() }, !0).on("mousemove.brush", e, !0).on("mouseup.brush", u, !0); $t(t.event.view) } ir(), ye(w), r.call(w), U.start() } } function a() { var t = this.__brush || { selection: null }; return t.extent = s.apply(this, arguments), t.dim = n, t } var c, s = cr, f = ar, l = E(e, "start", "brush", "end"), h = 6; return e.move = function (t, e) { t.selection ? t.on("start.brush", function () { i(this, arguments).beforestart().start() }).on("interrupt.brush end.brush", function () { i(this, arguments).end() }).tween("brush", function () { function t(t) { u.selection = 1 === t && fr(s) ? null : f(t), r.call(o), a.brush() } var o = this, u = o.__brush, a = i(o, arguments), c = u.selection, s = n.input("function" == typeof e ? e.apply(this, arguments) : e, u.extent), f = Vn(c, s); return c && s ? t : t(1) }) : t.each(function () { var t = this, o = arguments, u = t.__brush, a = n.input("function" == typeof e ? e.apply(t, o) : e, u.extent), c = i(t, o).beforestart(); ye(t), u.selection = null == a || fr(a) ? null : a, r.call(t), c.start().brush().end() }) }, o.prototype = { beforestart: function () { return 1 == ++this.active && (this.state.emitter = this, this.starting = !0), this }, start: function () { return this.starting && (this.starting = !1, this.emit("start")), this }, brush: function () { return this.emit("brush"), this }, end: function () { return 0 == --this.active && (delete this.state.emitter, this.emit("end")), this }, emit: function (t) { Pt(new rr(e, t, n.output(this.state.selection)), l.apply, l, [t, this.that, this.args]) } }, e.extent = function (t) { return arguments.length ? (s = "function" == typeof t ? t : er([[+t[0][0], +t[0][1]], [+t[1][0], +t[1][1]]]), e) : s }, e.filter = function (t) { return arguments.length ? (f = "function" == typeof t ? t : er(!!t), e) : f }, e.handleSize = function (t) { return arguments.length ? (h = +t, e) : h }, e.on = function () { var t = l.on.apply(l, arguments); return t === l ? e : t }, e } function hr(t) { return function (n, e) { return t(n.source.value + n.target.value, e.source.value + e.target.value) } } function pr(t) { return function () { return t } } function dr() { this._x0 = this._y0 = this._x1 = this._y1 = null, this._ = "" } function vr() { return new dr } function gr(t) { return t.source } function _r(t) { return t.target } function yr(t) { return t.radius } function mr(t) { return t.startAngle } function xr(t) { return t.endAngle } function br() { } function wr(t, n) { var e = new br; if (t instanceof br) t.each(function (t, n) { e.set(n, t) }); else if (Array.isArray(t)) { var r, i = -1, o = t.length; if (null == n) for (; ++i < o;)e.set(i, t[i]); else for (; ++i < o;)e.set(n(r = t[i], i, t), r) } else if (t) for (var u in t) e.set(u, t[u]); return e } function Mr() { return {} } function Tr(t, n, e) { t[n] = e } function Nr() { return wr() } function kr(t, n, e) { t.set(n, e) } function Sr() { } function Er(t, n) { var e = new Sr; if (t instanceof Sr) t.each(function (t) { e.add(t) }); else if (t) { var r = -1, i = t.length; if (null == n) for (; ++r < i;)e.add(t[r]); else for (; ++r < i;)e.add(n(t[r], r, t)) } return e } function Ar(t) { return new Function("d", "return {" + t.map(function (t, n) { return JSON.stringify(t) + ": d[" + n + "]" }).join(",") + "}") } function Cr(t, n) { var e = Ar(t); return function (r, i) { return n(e(r), i, t) } } function zr(t) { var n = Object.create(null), e = []; return t.forEach(function (t) { for (var r in t) r in n || e.push(n[r] = r) }), e } function Pr(t) { function n(t, n) { function e() { if (s) return Nd; if (f) return f = !1, Td; var n, e, r = a; if (t.charCodeAt(r) === kd) { for (; a++ < u && t.charCodeAt(a) !== kd || t.charCodeAt(++a) === kd;); return (n = a) >= u ? s = !0 : (e = t.charCodeAt(a++)) === Sd ? f = !0 : e === Ed && (f = !0, t.charCodeAt(a) === Sd && ++a), t.slice(r + 1, n - 1).replace(/""/g, '"') } for (; a < u;) { if ((e = t.charCodeAt(n = a++)) === Sd) f = !0; else if (e === Ed) f = !0, t.charCodeAt(a) === Sd && ++a; else if (e !== o) continue; return t.slice(r, n) } return s = !0, t.slice(r, u) } var r, i = [], u = t.length, a = 0, c = 0, s = u <= 0, f = !1; for (t.charCodeAt(u - 1) === Sd && --u, t.charCodeAt(u - 1) === Ed && --u; (r = e()) !== Nd;) { for (var l = []; r !== Td && r !== Nd;)l.push(r), r = e(); n && null == (l = n(l, c++)) || i.push(l) } return i } function e(n) { return n.map(r).join(t) } function r(t) { return null == t ? "" : i.test(t += "") ? '"' + t.replace(/"/g, '""') + '"' : t } var i = new RegExp('["' + t + "\n\r]"), o = t.charCodeAt(0); return { parse: function (t, e) { var r, i, o = n(t, function (t, n) { if (r) return r(t, n - 1); i = t, r = e ? Cr(t, e) : Ar(t) }); return o.columns = i || [], o }, parseRows: n, format: function (n, e) { return null == e && (e = zr(n)), [e.map(r).join(t)].concat(n.map(function (n) { return e.map(function (t) { return r(n[t]) }).join(t) })).join("\n") }, formatRows: function (t) { return t.map(e).join("\n") } } } function Rr(t) { return function () { return t } } function Lr() { return 1e-6 * (Math.random() - .5) } function qr(t, n, e, r) { if (isNaN(n) || isNaN(e)) return t; var i, o, u, a, c, s, f, l, h, p = t._root, d = { data: r }, v = t._x0, g = t._y0, _ = t._x1, y = t._y1; if (!p) return t._root = d, t; for (; p.length;)if ((s = n >= (o = (v + _) / 2)) ? v = o : _ = o, (f = e >= (u = (g + y) / 2)) ? g = u : y = u, i = p, !(p = p[l = f << 1 | s])) return i[l] = d, t; if (a = +t._x.call(null, p.data), c = +t._y.call(null, p.data), n === a && e === c) return d.next = p, i ? i[l] = d : t._root = d, t; do { i = i ? i[l] = new Array(4) : t._root = new Array(4), (s = n >= (o = (v + _) / 2)) ? v = o : _ = o, (f = e >= (u = (g + y) / 2)) ? g = u : y = u } while ((l = f << 1 | s) == (h = (c >= u) << 1 | a >= o)); return i[h] = p, i[l] = d, t } function Dr(t, n, e, r, i) { this.node = t, this.x0 = n, this.y0 = e, this.x1 = r, this.y1 = i } function Ur(t) { return t[0] } function Or(t) { return t[1] } function Fr(t, n, e) { var r = new Ir(null == n ? Ur : n, null == e ? Or : e, NaN, NaN, NaN, NaN); return null == t ? r : r.addAll(t) } function Ir(t, n, e, r, i, o) { this._x = t, this._y = n, this._x0 = e, this._y0 = r, this._x1 = i, this._y1 = o, this._root = void 0 } function Yr(t) { for (var n = { data: t.data }, e = n; t = t.next;)e = e.next = { data: t.data }; return n } function Br(t) { return t.x + t.vx } function Hr(t) { return t.y + t.vy } function jr(t) { return t.index } function Xr(t, n) { var e = t.get(n); if (!e) throw new Error("missing: " + n); return e } function Vr(t) { return t.x } function $r(t) { return t.y } function Wr(t, n) { if ((e = (t = n ? t.toExponential(n - 1) : t.toExponential()).indexOf("e")) < 0) return null; var e, r = t.slice(0, e); return [r.length > 1 ? r[0] + r.slice(2) : r, +t.slice(e + 1)] } function Zr(t) { return (t = Wr(Math.abs(t))) ? t[1] : NaN } function Gr(t, n) { return function (e, r) { for (var i = e.length, o = [], u = 0, a = t[0], c = 0; i > 0 && a > 0 && (c + a + 1 > r && (a = Math.max(1, r - c)), o.push(e.substring(i -= a, i + a)), !((c += a + 1) > r));)a = t[u = (u + 1) % t.length]; return o.reverse().join(n) } } function Qr(t) { return function (n) { return n.replace(/[0-9]/g, function (n) { return t[+n] }) } } function Jr(t, n) { var e = Wr(t, n); if (!e) return t + ""; var r = e[0], i = e[1]; return i < 0 ? "0." + new Array(-i).join("0") + r : r.length > i + 1 ? r.slice(0, i + 1) + "." + r.slice(i + 1) : r + new Array(i - r.length + 2).join("0") } function Kr(t) { return new ti(t) } function ti(t) { if (!(n = jd.exec(t))) throw new Error("invalid format: " + t); var n, e = n[1] || " ", r = n[2] || ">", i = n[3] || "-", o = n[4] || "", u = !!n[5], a = n[6] && +n[6], c = !!n[7], s = n[8] && +n[8].slice(1), f = n[9] || ""; "n" === f ? (c = !0, f = "g") : Hd[f] || (f = ""), (u || "0" === e && "=" === r) && (u = !0, e = "0", r = "="), this.fill = e, this.align = r, this.sign = i, this.symbol = o, this.zero = u, this.width = a, this.comma = c, this.precision = s, this.type = f } function ni(t) { return t } function ei(t) { function n(t) { function n(t) { var n, r, u, f = g, x = _; if ("c" === v) x = y(t) + x, t = ""; else { var b = (t = +t) < 0; if (t = y(Math.abs(t), d), b && 0 == +t && (b = !1), f = (b ? "(" === s ? s : "-" : "-" === s || "(" === s ? "" : s) + f, x = ("s" === v ? Vd[8 + Id / 3] : "") + x + (b && "(" === s ? ")" : ""), m) for (n = -1, r = t.length; ++n < r;)if (48 > (u = t.charCodeAt(n)) || u > 57) { x = (46 === u ? i + t.slice(n + 1) : t.slice(n)) + x, t = t.slice(0, n); break } } p && !l && (t = e(t, 1 / 0)); var w = f.length + t.length + x.length, M = w < h ? new Array(h - w + 1).join(a) : ""; switch (p && l && (t = e(M + t, M.length ? h - x.length : 1 / 0), M = ""), c) { case "<": t = f + t + x + M; break; case "=": t = f + M + t + x; break; case "^": t = M.slice(0, w = M.length >> 1) + f + t + x + M.slice(w); break; default: t = M + f + t + x }return o(t) } var a = (t = Kr(t)).fill, c = t.align, s = t.sign, f = t.symbol, l = t.zero, h = t.width, p = t.comma, d = t.precision, v = t.type, g = "$" === f ? r[0] : "#" === f && /[boxX]/.test(v) ? "0" + v.toLowerCase() : "", _ = "$" === f ? r[1] : /[%p]/.test(v) ? u : "", y = Hd[v], m = !v || /[defgprs%]/.test(v); return d = null == d ? v ? 6 : 12 : /[gprs]/.test(v) ? Math.max(1, Math.min(21, d)) : Math.max(0, Math.min(20, d)), n.toString = function () { return t + "" }, n } var e = t.grouping && t.thousands ? Gr(t.grouping, t.thousands) : ni, r = t.currency, i = t.decimal, o = t.numerals ? Qr(t.numerals) : ni, u = t.percent || "%"; return { format: n, formatPrefix: function (t, e) { var r = n((t = Kr(t), t.type = "f", t)), i = 3 * Math.max(-8, Math.min(8, Math.floor(Zr(e) / 3))), o = Math.pow(10, -i), u = Vd[8 + i / 3]; return function (t) { return r(o * t) + u } } } } function ri(n) { return Xd = ei(n), t.format = Xd.format, t.formatPrefix = Xd.formatPrefix, Xd } function ii(t) { return Math.max(0, -Zr(Math.abs(t))) } function oi(t, n) { return Math.max(0, 3 * Math.max(-8, Math.min(8, Math.floor(Zr(n) / 3))) - Zr(Math.abs(t))) } function ui(t, n) { return t = Math.abs(t), n = Math.abs(n) - t, Math.max(0, Zr(n) - Zr(t)) + 1 } function ai() { return new ci } function ci() { this.reset() } function si(t, n, e) { var r = t.s = n + e, i = r - n, o = r - i; t.t = n - o + (e - i) } function fi(t) { return t > 1 ? 0 : t < -1 ? Sv : Math.acos(t) } function li(t) { return t > 1 ? Ev : t < -1 ? -Ev : Math.asin(t) } function hi(t) { return (t = Yv(t / 2)) * t } function pi() { } function di(t, n) { t && Vv.hasOwnProperty(t.type) && Vv[t.type](t, n) } function vi(t, n, e) { var r, i = -1, o = t.length - e; for (n.lineStart(); ++i < o;)r = t[i], n.point(r[0], r[1], r[2]); n.lineEnd() } function gi(t, n) { var e = -1, r = t.length; for (n.polygonStart(); ++e < r;)vi(t[e], n, 1); n.polygonEnd() } function _i(t, n) { t && Xv.hasOwnProperty(t.type) ? Xv[t.type](t, n) : di(t, n) } function yi() { Zv.point = xi } function mi() { bi($d, Wd) } function xi(t, n) { Zv.point = bi, $d = t, Wd = n, Zd = t *= Pv, Gd = Dv(n = (n *= Pv) / 2 + Av), Qd = Yv(n) } function bi(t, n) { n = (n *= Pv) / 2 + Av; var e = (t *= Pv) - Zd, r = e >= 0 ? 1 : -1, i = r * e, o = Dv(n), u = Yv(n), a = Qd * u, c = Gd * o + a * Dv(i), s = a * r * Yv(i); $v.add(qv(s, c)), Zd = t, Gd = o, Qd = u } function wi(t) { return [qv(t[1], t[0]), li(t[2])] } function Mi(t) { var n = t[0], e = t[1], r = Dv(e); return [r * Dv(n), r * Yv(n), Yv(e)] } function Ti(t, n) { return t[0] * n[0] + t[1] * n[1] + t[2] * n[2] } function Ni(t, n) { return [t[1] * n[2] - t[2] * n[1], t[2] * n[0] - t[0] * n[2], t[0] * n[1] - t[1] * n[0]] } function ki(t, n) { t[0] += n[0], t[1] += n[1], t[2] += n[2] } function Si(t, n) { return [t[0] * n, t[1] * n, t[2] * n] } function Ei(t) { var n = Hv(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]); t[0] /= n, t[1] /= n, t[2] /= n } function Ai(t, n) { uv.push(av = [Jd = t, tv = t]), n < Kd && (Kd = n), n > nv && (nv = n) } function Ci(t, n) { var e = Mi([t * Pv, n * Pv]); if (ov) { var r = Ni(ov, e), i = Ni([r[1], -r[0], 0], r); Ei(i), i = wi(i); var o, u = t - ev, a = u > 0 ? 1 : -1, c = i[0] * zv * a, s = Rv(u) > 180; s ^ (a * ev < c && c < a * t) ? (o = i[1] * zv) > nv && (nv = o) : (c = (c + 360) % 360 - 180, s ^ (a * ev < c && c < a * t) ? (o = -i[1] * zv) < Kd && (Kd = o) : (n < Kd && (Kd = n), n > nv && (nv = n))), s ? t < ev ? Di(Jd, t) > Di(Jd, tv) && (tv = t) : Di(t, tv) > Di(Jd, tv) && (Jd = t) : tv >= Jd ? (t < Jd && (Jd = t), t > tv && (tv = t)) : t > ev ? Di(Jd, t) > Di(Jd, tv) && (tv = t) : Di(t, tv) > Di(Jd, tv) && (Jd = t) } else uv.push(av = [Jd = t, tv = t]); n < Kd && (Kd = n), n > nv && (nv = n), ov = e, ev = t } function zi() { Qv.point = Ci } function Pi() { av[0] = Jd, av[1] = tv, Qv.point = Ai, ov = null } function Ri(t, n) { if (ov) { var e = t - ev; Gv.add(Rv(e) > 180 ? e + (e > 0 ? 360 : -360) : e) } else rv = t, iv = n; Zv.point(t, n), Ci(t, n) } function Li() { Zv.lineStart() } function qi() { Ri(rv, iv), Zv.lineEnd(), Rv(Gv) > Nv && (Jd = -(tv = 180)), av[0] = Jd, av[1] = tv, ov = null } function Di(t, n) { return (n -= t) < 0 ? n + 360 : n } function Ui(t, n) { return t[0] - n[0] } function Oi(t, n) { return t[0] <= t[1] ? t[0] <= n && n <= t[1] : n < t[0] || t[1] < n } function Fi(t, n) { t *= Pv; var e = Dv(n *= Pv); Ii(e * Dv(t), e * Yv(t), Yv(n)) } function Ii(t, n, e) { fv += (t - fv) / ++cv, lv += (n - lv) / cv, hv += (e - hv) / cv } function Yi() { Jv.point = Bi } function Bi(t, n) { t *= Pv; var e = Dv(n *= Pv); bv = e * Dv(t), wv = e * Yv(t), Mv = Yv(n), Jv.point = Hi, Ii(bv, wv, Mv) } function Hi(t, n) { t *= Pv; var e = Dv(n *= Pv), r = e * Dv(t), i = e * Yv(t), o = Yv(n), u = qv(Hv((u = wv * o - Mv * i) * u + (u = Mv * r - bv * o) * u + (u = bv * i - wv * r) * u), bv * r + wv * i + Mv * o); sv += u, pv += u * (bv + (bv = r)), dv += u * (wv + (wv = i)), vv += u * (Mv + (Mv = o)), Ii(bv, wv, Mv) } function ji() { Jv.point = Fi } function Xi() { Jv.point = $i } function Vi() { Wi(mv, xv), Jv.point = Fi } function $i(t, n) { mv = t, xv = n, t *= Pv, n *= Pv, Jv.point = Wi; var e = Dv(n); bv = e * Dv(t), wv = e * Yv(t), Mv = Yv(n), Ii(bv, wv, Mv) } function Wi(t, n) { t *= Pv; var e = Dv(n *= Pv), r = e * Dv(t), i = e * Yv(t), o = Yv(n), u = wv * o - Mv * i, a = Mv * r - bv * o, c = bv * i - wv * r, s = Hv(u * u + a * a + c * c), f = li(s), l = s && -f / s; gv += l * u, _v += l * a, yv += l * c, sv += f, pv += f * (bv + (bv = r)), dv += f * (wv + (wv = i)), vv += f * (Mv + (Mv = o)), Ii(bv, wv, Mv) } function Zi(t) { return function () { return t } } function Gi(t, n) { function e(e, r) { return e = t(e, r), n(e[0], e[1]) } return t.invert && n.invert && (e.invert = function (e, r) { return (e = n.invert(e, r)) && t.invert(e[0], e[1]) }), e } function Qi(t, n) { return [t > Sv ? t - Cv : t < -Sv ? t + Cv : t, n] } function Ji(t, n, e) { return (t %= Cv) ? n || e ? Gi(to(t), no(n, e)) : to(t) : n || e ? no(n, e) : Qi } function Ki(t) { return function (n, e) { return n += t, [n > Sv ? n - Cv : n < -Sv ? n + Cv : n, e] } } function to(t) { var n = Ki(t); return n.invert = Ki(-t), n } function no(t, n) { function e(t, n) { var e = Dv(n), a = Dv(t) * e, c = Yv(t) * e, s = Yv(n), f = s * r + a * i; return [qv(c * o - f * u, a * r - s * i), li(f * o + c * u)] } var r = Dv(t), i = Yv(t), o = Dv(n), u = Yv(n); return e.invert = function (t, n) { var e = Dv(n), a = Dv(t) * e, c = Yv(t) * e, s = Yv(n), f = s * o - c * u; return [qv(c * o + s * u, a * r + f * i), li(f * r - a * i)] }, e } function eo(t) { function n(n) { return n = t(n[0] * Pv, n[1] * Pv), n[0] *= zv, n[1] *= zv, n } return t = Ji(t[0] * Pv, t[1] * Pv, t.length > 2 ? t[2] * Pv : 0), n.invert = function (n) { return n = t.invert(n[0] * Pv, n[1] * Pv), n[0] *= zv, n[1] *= zv, n }, n } function ro(t, n, e, r, i, o) { if (e) { var u = Dv(n), a = Yv(n), c = r * e; null == i ? (i = n + r * Cv, o = n - c / 2) : (i = io(u, i), o = io(u, o), (r > 0 ? i < o : i > o) && (i += r * Cv)); for (var s, f = i; r > 0 ? f > o : f < o; f -= c)s = wi([u, -a * Dv(f), -a * Yv(f)]), t.point(s[0], s[1]) } } function io(t, n) { (n = Mi(n))[0] -= t, Ei(n); var e = fi(-n[1]); return ((-n[2] < 0 ? -e : e) + Cv - Nv) % Cv } function oo() { var t, n = []; return { point: function (n, e) { t.push([n, e]) }, lineStart: function () { n.push(t = []) }, lineEnd: pi, rejoin: function () { n.length > 1 && n.push(n.pop().concat(n.shift())) }, result: function () { var e = n; return n = [], t = null, e } } } function uo(t, n) { return Rv(t[0] - n[0]) < Nv && Rv(t[1] - n[1]) < Nv } function ao(t, n, e, r) { this.x = t, this.z = n, this.o = e, this.e = r, this.v = !1, this.n = this.p = null } function co(t, n, e, r, i) { var o, u, a = [], c = []; if (t.forEach(function (t) { if (!((n = t.length - 1) <= 0)) { var n, e, r = t[0], u = t[n]; if (uo(r, u)) { for (i.lineStart(), o = 0; o < n; ++o)i.point((r = t[o])[0], r[1]); i.lineEnd() } else a.push(e = new ao(r, t, null, !0)), c.push(e.o = new ao(r, null, e, !1)), a.push(e = new ao(u, t, null, !1)), c.push(e.o = new ao(u, null, e, !0)) } }), a.length) { for (c.sort(n), so(a), so(c), o = 0, u = c.length; o < u; ++o)c[o].e = e = !e; for (var s, f, l = a[0]; ;) { for (var h = l, p = !0; h.v;)if ((h = h.n) === l) return; s = h.z, i.lineStart(); do { if (h.v = h.o.v = !0, h.e) { if (p) for (o = 0, u = s.length; o < u; ++o)i.point((f = s[o])[0], f[1]); else r(h.x, h.n.x, 1, i); h = h.n } else { if (p) for (s = h.p.z, o = s.length - 1; o >= 0; --o)i.point((f = s[o])[0], f[1]); else r(h.x, h.p.x, -1, i); h = h.p } s = (h = h.o).z, p = !p } while (!h.v); i.lineEnd() } } } function so(t) { if (n = t.length) { for (var n, e, r = 0, i = t[0]; ++r < n;)i.n = e = t[r], e.p = i, i = e; i.n = e = t[0], e.p = i } } function fo(t, n) { var e = n[0], r = n[1], i = [Yv(e), -Dv(e), 0], o = 0, u = 0; fg.reset(); for (var a = 0, c = t.length; a < c; ++a)if (f = (s = t[a]).length) for (var s, f, l = s[f - 1], h = l[0], p = l[1] / 2 + Av, d = Yv(p), v = Dv(p), g = 0; g < f; ++g, h = y, d = x, v = b, l = _) { var _ = s[g], y = _[0], m = _[1] / 2 + Av, x = Yv(m), b = Dv(m), w = y - h, M = w >= 0 ? 1 : -1, T = M * w, N = T > Sv, k = d * x; if (fg.add(qv(k * M * Yv(T), v * b + k * Dv(T))), o += N ? w + M * Cv : w, N ^ h >= e ^ y >= e) { var S = Ni(Mi(l), Mi(_)); Ei(S); var E = Ni(i, S); Ei(E); var A = (N ^ w >= 0 ? -1 : 1) * li(E[2]); (r > A || r === A && (S[0] || S[1])) && (u += N ^ w >= 0 ? 1 : -1) } } return (o < -Nv || o < Nv && fg < -Nv) ^ 1 & u } function lo(t, n, e, r) { return function (i) { function o(n, e) { t(n, e) && i.point(n, e) } function u(t, n) { v.point(t, n) } function a() { x.point = u, v.lineStart() } function c() { x.point = o, v.lineEnd() } function s(t, n) { d.push([t, n]), y.point(t, n) } function f() { y.lineStart(), d = [] } function l() { s(d[0][0], d[0][1]), y.lineEnd(); var t, n, e, r, o = y.clean(), u = g.result(), a = u.length; if (d.pop(), h.push(d), d = null, a) if (1 & o) { if (e = u[0], (n = e.length - 1) > 0) { for (m || (i.polygonStart(), m = !0), i.lineStart(), t = 0; t < n; ++t)i.point((r = e[t])[0], r[1]); i.lineEnd() } } else a > 1 && 2 & o && u.push(u.pop().concat(u.shift())), p.push(u.filter(ho)) } var h, p, d, v = n(i), g = oo(), y = n(g), m = !1, x = { point: o, lineStart: a, lineEnd: c, polygonStart: function () { x.point = s, x.lineStart = f, x.lineEnd = l, p = [], h = [] }, polygonEnd: function () { x.point = o, x.lineStart = a, x.lineEnd = c, p = _(p); var t = fo(h, r); p.length ? (m || (i.polygonStart(), m = !0), co(p, po, t, e, i)) : t && (m || (i.polygonStart(), m = !0), i.lineStart(), e(null, null, 1, i), i.lineEnd()), m && (i.polygonEnd(), m = !1), p = h = null }, sphere: function () { i.polygonStart(), i.lineStart(), e(null, null, 1, i), i.lineEnd(), i.polygonEnd() } }; return x } } function ho(t) { return t.length > 1 } function po(t, n) { return ((t = t.x)[0] < 0 ? t[1] - Ev - Nv : Ev - t[1]) - ((n = n.x)[0] < 0 ? n[1] - Ev - Nv : Ev - n[1]) } function vo(t, n, e, r) { var i, o, u = Yv(t - e); return Rv(u) > Nv ? Lv((Yv(n) * (o = Dv(r)) * Yv(e) - Yv(r) * (i = Dv(n)) * Yv(t)) / (i * o * u)) : (n + r) / 2 } function go(t) { function n(t, n) { return Dv(t) * Dv(n) > i } function e(t, n, e) { var r = [1, 0, 0], o = Ni(Mi(t), Mi(n)), u = Ti(o, o), a = o[0], c = u - a * a; if (!c) return !e && t; var s = i * u / c, f = -i * a / c, l = Ni(r, o), h = Si(r, s); ki(h, Si(o, f)); var p = l, d = Ti(h, p), v = Ti(p, p), g = d * d - v * (Ti(h, h) - 1); if (!(g < 0)) { var _ = Hv(g), y = Si(p, (-d - _) / v); if (ki(y, h), y = wi(y), !e) return y; var m, x = t[0], b = n[0], w = t[1], M = n[1]; b < x && (m = x, x = b, b = m); var T = b - x, N = Rv(T - Sv) < Nv, k = N || T < Nv; if (!N && M < w && (m = w, w = M, M = m), k ? N ? w + M > 0 ^ y[1] < (Rv(y[0] - x) < Nv ? w : M) : w <= y[1] && y[1] <= M : T > Sv ^ (x <= y[0] && y[0] <= b)) { var S = Si(p, (-d + _) / v); return ki(S, h), [y, wi(S)] } } } function r(n, e) { var r = u ? t : Sv - t, i = 0; return n < -r ? i |= 1 : n > r && (i |= 2), e < -r ? i |= 4 : e > r && (i |= 8), i } var i = Dv(t), o = 6 * Pv, u = i > 0, a = Rv(i) > Nv; return lo(n, function (t) { var i, o, c, s, f; return { lineStart: function () { s = c = !1, f = 1 }, point: function (l, h) { var p, d = [l, h], v = n(l, h), g = u ? v ? 0 : r(l, h) : v ? r(l + (l < 0 ? Sv : -Sv), h) : 0; if (!i && (s = c = v) && t.lineStart(), v !== c && (!(p = e(i, d)) || uo(i, p) || uo(d, p)) && (d[0] += Nv, d[1] += Nv, v = n(d[0], d[1])), v !== c) f = 0, v ? (t.lineStart(), p = e(d, i), t.point(p[0], p[1])) : (p = e(i, d), t.point(p[0], p[1]), t.lineEnd()), i = p; else if (a && i && u ^ v) { var _; g & o || !(_ = e(d, i, !0)) || (f = 0, u ? (t.lineStart(), t.point(_[0][0], _[0][1]), t.point(_[1][0], _[1][1]), t.lineEnd()) : (t.point(_[1][0], _[1][1]), t.lineEnd(), t.lineStart(), t.point(_[0][0], _[0][1]))) } !v || i && uo(i, d) || t.point(d[0], d[1]), i = d, c = v, o = g }, lineEnd: function () { c && t.lineEnd(), i = null }, clean: function () { return f | (s && c) << 1 } } }, function (n, e, r, i) { ro(i, t, o, r, n, e) }, u ? [0, -t] : [-Sv, t - Sv]) } function _o(t, n, e, r, i, o) { var u, a = t[0], c = t[1], s = 0, f = 1, l = n[0] - a, h = n[1] - c; if (u = e - a, l || !(u > 0)) { if (u /= l, l < 0) { if (u < s) return; u < f && (f = u) } else if (l > 0) { if (u > f) return; u > s && (s = u) } if (u = i - a, l || !(u < 0)) { if (u /= l, l < 0) { if (u > f) return; u > s && (s = u) } else if (l > 0) { if (u < s) return; u < f && (f = u) } if (u = r - c, h || !(u > 0)) { if (u /= h, h < 0) { if (u < s) return; u < f && (f = u) } else if (h > 0) { if (u > f) return; u > s && (s = u) } if (u = o - c, h || !(u < 0)) { if (u /= h, h < 0) { if (u > f) return; u > s && (s = u) } else if (h > 0) { if (u < s) return; u < f && (f = u) } return s > 0 && (t[0] = a + s * l, t[1] = c + s * h), f < 1 && (n[0] = a + f * l, n[1] = c + f * h), !0 } } } } } function yo(t, n, e, r) { function i(i, o) { return t <= i && i <= e && n <= o && o <= r } function o(i, o, a, s) { var f = 0, l = 0; if (null == i || (f = u(i, a)) !== (l = u(o, a)) || c(i, o) < 0 ^ a > 0) do { s.point(0 === f || 3 === f ? t : e, f > 1 ? r : n) } while ((f = (f + a + 4) % 4) !== l); else s.point(o[0], o[1]) } function u(r, i) { return Rv(r[0] - t) < Nv ? i > 0 ? 0 : 3 : Rv(r[0] - e) < Nv ? i > 0 ? 2 : 1 : Rv(r[1] - n) < Nv ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2 } function a(t, n) { return c(t.x, n.x) } function c(t, n) { var e = u(t, 1), r = u(n, 1); return e !== r ? e - r : 0 === e ? n[1] - t[1] : 1 === e ? t[0] - n[0] : 2 === e ? t[1] - n[1] : n[0] - t[0] } return function (u) { function c(t, n) { i(t, n) && M.point(t, n) } function s() { for (var n = 0, e = 0, i = h.length; e < i; ++e)for (var o, u, a = h[e], c = 1, s = a.length, f = a[0], l = f[0], p = f[1]; c < s; ++c)o = l, u = p, l = (f = a[c])[0], p = f[1], u <= r ? p > r && (l - o) * (r - u) > (p - u) * (t - o) && ++n : p <= r && (l - o) * (r - u) < (p - u) * (t - o) && --n; return n } function f(o, u) { var a = i(o, u); if (h && p.push([o, u]), b) d = o, v = u, g = a, b = !1, a && (M.lineStart(), M.point(o, u)); else if (a && x) M.point(o, u); else { var c = [y = Math.max(pg, Math.min(hg, y)), m = Math.max(pg, Math.min(hg, m))], s = [o = Math.max(pg, Math.min(hg, o)), u = Math.max(pg, Math.min(hg, u))]; _o(c, s, t, n, e, r) ? (x || (M.lineStart(), M.point(c[0], c[1])), M.point(s[0], s[1]), a || M.lineEnd(), w = !1) : a && (M.lineStart(), M.point(o, u), w = !1) } y = o, m = u, x = a } var l, h, p, d, v, g, y, m, x, b, w, M = u, T = oo(), N = { point: c, lineStart: function () { N.point = f, h && h.push(p = []), b = !0, x = !1, y = m = NaN }, lineEnd: function () { l && (f(d, v), g && x && T.rejoin(), l.push(T.result())), N.point = c, x && M.lineEnd() }, polygonStart: function () { M = T, l = [], h = [], w = !0 }, polygonEnd: function () { var t = s(), n = w && t, e = (l = _(l)).length; (n || e) && (u.polygonStart(), n && (u.lineStart(), o(null, null, 1, u), u.lineEnd()), e && co(l, a, t, o, u), u.polygonEnd()), M = u, l = h = p = null } }; return N } } function mo() { vg.point = vg.lineEnd = pi } function xo(t, n) { Kv = t *= Pv, tg = Yv(n *= Pv), ng = Dv(n), vg.point = bo } function bo(t, n) { t *= Pv; var e = Yv(n *= Pv), r = Dv(n), i = Rv(t - Kv), o = Dv(i), u = r * Yv(i), a = ng * e - tg * r * o, c = tg * e + ng * r * o; dg.add(qv(Hv(u * u + a * a), c)), Kv = t, tg = e, ng = r } function wo(t) { return dg.reset(), _i(t, vg), +dg } function Mo(t, n) { return gg[0] = t, gg[1] = n, wo(_g) } function To(t, n) { return !(!t || !mg.hasOwnProperty(t.type)) && mg[t.type](t, n) } function No(t, n) { return 0 === Mo(t, n) } function ko(t, n) { var e = Mo(t[0], t[1]); return Mo(t[0], n) + Mo(n, t[1]) <= e + Nv } function So(t, n) { return !!fo(t.map(Eo), Ao(n)) } function Eo(t) { return (t = t.map(Ao)).pop(), t } function Ao(t) { return [t[0] * Pv, t[1] * Pv] } function Co(t, n, e) { var r = l(t, n - Nv, e).concat(n); return function (t) { return r.map(function (n) { return [t, n] }) } } function zo(t, n, e) { var r = l(t, n - Nv, e).concat(n); return function (t) { return r.map(function (n) { return [n, t] }) } } function Po() { function t() { return { type: "MultiLineString", coordinates: n() } } function n() { return l(Uv(o / _) * _, i, _).map(p).concat(l(Uv(s / y) * y, c, y).map(d)).concat(l(Uv(r / v) * v, e, v).filter(function (t) { return Rv(t % _) > Nv }).map(f)).concat(l(Uv(a / g) * g, u, g).filter(function (t) { return Rv(t % y) > Nv }).map(h)) } var e, r, i, o, u, a, c, s, f, h, p, d, v = 10, g = v, _ = 90, y = 360, m = 2.5; return t.lines = function () { return n().map(function (t) { return { type: "LineString", coordinates: t } }) }, t.outline = function () { return { type: "Polygon", coordinates: [p(o).concat(d(c).slice(1), p(i).reverse().slice(1), d(s).reverse().slice(1))] } }, t.extent = function (n) { return arguments.length ? t.extentMajor(n).extentMinor(n) : t.extentMinor() }, t.extentMajor = function (n) { return arguments.length ? (o = +n[0][0], i = +n[1][0], s = +n[0][1], c = +n[1][1], o > i && (n = o, o = i, i = n), s > c && (n = s, s = c, c = n), t.precision(m)) : [[o, s], [i, c]] }, t.extentMinor = function (n) { return arguments.length ? (r = +n[0][0], e = +n[1][0], a = +n[0][1], u = +n[1][1], r > e && (n = r, r = e, e = n), a > u && (n = a, a = u, u = n), t.precision(m)) : [[r, a], [e, u]] }, t.step = function (n) { return arguments.length ? t.stepMajor(n).stepMinor(n) : t.stepMinor() }, t.stepMajor = function (n) { return arguments.length ? (_ = +n[0], y = +n[1], t) : [_, y] }, t.stepMinor = function (n) { return arguments.length ? (v = +n[0], g = +n[1], t) : [v, g] }, t.precision = function (n) { return arguments.length ? (m = +n, f = Co(a, u, 90), h = zo(r, e, m), p = Co(s, c, 90), d = zo(o, i, m), t) : m }, t.extentMajor([[-180, -90 + Nv], [180, 90 - Nv]]).extentMinor([[-180, -80 - Nv], [180, 80 + Nv]]) } function Ro(t) { return t } function Lo() { wg.point = qo } function qo(t, n) { wg.point = Do, eg = ig = t, rg = og = n } function Do(t, n) { bg.add(og * t - ig * n), ig = t, og = n } function Uo() { Do(eg, rg) } function Oo(t, n) { Eg += t, Ag += n, ++Cg } function Fo() { Ug.point = Io } function Io(t, n) { Ug.point = Yo, Oo(cg = t, sg = n) } function Yo(t, n) { var e = t - cg, r = n - sg, i = Hv(e * e + r * r); zg += i * (cg + t) / 2, Pg += i * (sg + n) / 2, Rg += i, Oo(cg = t, sg = n) } function Bo() { Ug.point = Oo } function Ho() { Ug.point = Xo } function jo() { Vo(ug, ag) } function Xo(t, n) { Ug.point = Vo, Oo(ug = cg = t, ag = sg = n) } function Vo(t, n) { var e = t - cg, r = n - sg, i = Hv(e * e + r * r); zg += i * (cg + t) / 2, Pg += i * (sg + n) / 2, Rg += i, Lg += (i = sg * t - cg * n) * (cg + t), qg += i * (sg + n), Dg += 3 * i, Oo(cg = t, sg = n) } function $o(t) { this._context = t } function Wo(t, n) { jg.point = Zo, Fg = Yg = t, Ig = Bg = n } function Zo(t, n) { Yg -= t, Bg -= n, Hg.add(Hv(Yg * Yg + Bg * Bg)), Yg = t, Bg = n } function Go() { this._string = [] } function Qo(t) { return "m0," + t + "a" + t + "," + t + " 0 1,1 0," + -2 * t + "a" + t + "," + t + " 0 1,1 0," + 2 * t + "z" } function Jo(t) { return function (n) { var e = new Ko; for (var r in t) e[r] = t[r]; return e.stream = n, e } } function Ko() { } function tu(t, n, e) { var r = t.clipExtent && t.clipExtent(); return t.scale(150).translate([0, 0]), null != r && t.clipExtent(null), _i(e, t.stream(Sg)), n(Sg.result()), null != r && t.clipExtent(r), t } function nu(t, n, e) { return tu(t, function (e) { var r = n[1][0] - n[0][0], i = n[1][1] - n[0][1], o = Math.min(r / (e[1][0] - e[0][0]), i / (e[1][1] - e[0][1])), u = +n[0][0] + (r - o * (e[1][0] + e[0][0])) / 2, a = +n[0][1] + (i - o * (e[1][1] + e[0][1])) / 2; t.scale(150 * o).translate([u, a]) }, e) } function eu(t, n, e) { return nu(t, [[0, 0], n], e) } function ru(t, n, e) { return tu(t, function (e) { var r = +n, i = r / (e[1][0] - e[0][0]), o = (r - i * (e[1][0] + e[0][0])) / 2, u = -i * e[0][1]; t.scale(150 * i).translate([o, u]) }, e) } function iu(t, n, e) { return tu(t, function (e) { var r = +n, i = r / (e[1][1] - e[0][1]), o = -i * e[0][0], u = (r - i * (e[1][1] + e[0][1])) / 2; t.scale(150 * i).translate([o, u]) }, e) } function ou(t, n) { return +n ? au(t, n) : uu(t) } function uu(t) { return Jo({ point: function (n, e) { n = t(n, e), this.stream.point(n[0], n[1]) } }) } function au(t, n) { function e(r, i, o, u, a, c, s, f, l, h, p, d, v, g) { var _ = s - r, y = f - i, m = _ * _ + y * y; if (m > 4 * n && v--) { var x = u + h, b = a + p, w = c + d, M = Hv(x * x + b * b + w * w), T = li(w /= M), N = Rv(Rv(w) - 1) < Nv || Rv(o - l) < Nv ? (o + l) / 2 : qv(b, x), k = t(N, T), S = k[0], E = k[1], A = S - r, C = E - i, z = y * A - _ * C; (z * z / m > n || Rv((_ * A + y * C) / m - .5) > .3 || u * h + a * p + c * d < Vg) && (e(r, i, o, u, a, c, S, E, N, x /= M, b /= M, w, v, g), g.point(S, E), e(S, E, N, x, b, w, s, f, l, h, p, d, v, g)) } } return function (n) { function r(e, r) { e = t(e, r), n.point(e[0], e[1]) } function i() { _ = NaN, w.point = o, n.lineStart() } function o(r, i) { var o = Mi([r, i]), u = t(r, i); e(_, y, g, m, x, b, _ = u[0], y = u[1], g = r, m = o[0], x = o[1], b = o[2], Xg, n), n.point(_, y) } function u() { w.point = r, n.lineEnd() } function a() { i(), w.point = c, w.lineEnd = s } function c(t, n) { o(f = t, n), l = _, h = y, p = m, d = x, v = b, w.point = o } function s() { e(_, y, g, m, x, b, l, h, f, p, d, v, Xg, n), w.lineEnd = u, u() } var f, l, h, p, d, v, g, _, y, m, x, b, w = { point: r, lineStart: i, lineEnd: u, polygonStart: function () { n.polygonStart(), w.lineStart = a }, polygonEnd: function () { n.polygonEnd(), w.lineStart = i } }; return w } } function cu(t) { return Jo({ point: function (n, e) { var r = t(n, e); return this.stream.point(r[0], r[1]) } }) } function su(t) { return fu(function () { return t })() } function fu(t) { function n(t) { return t = f(t[0] * Pv, t[1] * Pv), [t[0] * g + a, c - t[1] * g] } function e(t) { return (t = f.invert((t[0] - a) / g, (c - t[1]) / g)) && [t[0] * zv, t[1] * zv] } function r(t, n) { return t = u(t, n), [t[0] * g + a, c - t[1] * g] } function i() { f = Gi(s = Ji(b, w, M), u); var t = u(m, x); return a = _ - t[0] * g, c = y + t[1] * g, o() } function o() { return d = v = null, n } var u, a, c, s, f, l, h, p, d, v, g = 150, _ = 480, y = 250, m = 0, x = 0, b = 0, w = 0, M = 0, T = null, N = lg, k = null, S = Ro, E = .5, A = ou(r, E); return n.stream = function (t) { return d && v === t ? d : d = $g(cu(s)(N(A(S(v = t))))) }, n.preclip = function (t) { return arguments.length ? (N = t, T = void 0, o()) : N }, n.postclip = function (t) { return arguments.length ? (S = t, k = l = h = p = null, o()) : S }, n.clipAngle = function (t) { return arguments.length ? (N = +t ? go(T = t * Pv) : (T = null, lg), o()) : T * zv }, n.clipExtent = function (t) { return arguments.length ? (S = null == t ? (k = l = h = p = null, Ro) : yo(k = +t[0][0], l = +t[0][1], h = +t[1][0], p = +t[1][1]), o()) : null == k ? null : [[k, l], [h, p]] }, n.scale = function (t) { return arguments.length ? (g = +t, i()) : g }, n.translate = function (t) { return arguments.length ? (_ = +t[0], y = +t[1], i()) : [_, y] }, n.center = function (t) { return arguments.length ? (m = t[0] % 360 * Pv, x = t[1] % 360 * Pv, i()) : [m * zv, x * zv] }, n.rotate = function (t) { return arguments.length ? (b = t[0] % 360 * Pv, w = t[1] % 360 * Pv, M = t.length > 2 ? t[2] % 360 * Pv : 0, i()) : [b * zv, w * zv, M * zv] }, n.precision = function (t) { return arguments.length ? (A = ou(r, E = t * t), o()) : Hv(E) }, n.fitExtent = function (t, e) { return nu(n, t, e) }, n.fitSize = function (t, e) { return eu(n, t, e) }, n.fitWidth = function (t, e) { return ru(n, t, e) }, n.fitHeight = function (t, e) { return iu(n, t, e) }, function () { return u = t.apply(this, arguments), n.invert = u.invert && e, i() } } function lu(t) { var n = 0, e = Sv / 3, r = fu(t), i = r(n, e); return i.parallels = function (t) { return arguments.length ? r(n = t[0] * Pv, e = t[1] * Pv) : [n * zv, e * zv] }, i } function hu(t) { function n(t, n) { return [t * e, Yv(n) / e] } var e = Dv(t); return n.invert = function (t, n) { return [t / e, li(n * e)] }, n } function pu(t, n) { function e(t, n) { var e = Hv(o - 2 * i * Yv(n)) / i; return [e * Yv(t *= i), u - e * Dv(t)] } var r = Yv(t), i = (r + Yv(n)) / 2; if (Rv(i) < Nv) return hu(t); var o = 1 + r * (2 * i - r), u = Hv(o) / i; return e.invert = function (t, n) { var e = u - n; return [qv(t, Rv(e)) / i * Bv(e), li((o - (t * t + e * e) * i * i) / (2 * i))] }, e } function du() { return lu(pu).scale(155.424).center([0, 33.6442]) } function vu() { return du().parallels([29.5, 45.5]).scale(1070).translate([480, 250]).rotate([96, 0]).center([-.6, 38.7]) } function gu(t) { var n = t.length; return { point: function (e, r) { for (var i = -1; ++i < n;)t[i].point(e, r) }, sphere: function () { for (var e = -1; ++e < n;)t[e].sphere() }, lineStart: function () { for (var e = -1; ++e < n;)t[e].lineStart() }, lineEnd: function () { for (var e = -1; ++e < n;)t[e].lineEnd() }, polygonStart: function () { for (var e = -1; ++e < n;)t[e].polygonStart() }, polygonEnd: function () { for (var e = -1; ++e < n;)t[e].polygonEnd() } } } function _u(t) { return function (n, e) { var r = Dv(n), i = Dv(e), o = t(r * i); return [o * i * Yv(n), o * Yv(e)] } } function yu(t) { return function (n, e) { var r = Hv(n * n + e * e), i = t(r), o = Yv(i), u = Dv(i); return [qv(n * o, r * u), li(r && e * o / r)] } } function mu(t, n) { return [t, Fv(jv((Ev + n) / 2))] } function xu(t) { function n() { var n = Sv * a(), u = o(eo(o.rotate()).invert([0, 0])); return s(null == f ? [[u[0] - n, u[1] - n], [u[0] + n, u[1] + n]] : t === mu ? [[Math.max(u[0] - n, f), e], [Math.min(u[0] + n, r), i]] : [[f, Math.max(u[1] - n, e)], [r, Math.min(u[1] + n, i)]]) } var e, r, i, o = su(t), u = o.center, a = o.scale, c = o.translate, s = o.clipExtent, f = null; return o.scale = function (t) { return arguments.length ? (a(t), n()) : a() }, o.translate = function (t) { return arguments.length ? (c(t), n()) : c() }, o.center = function (t) { return arguments.length ? (u(t), n()) : u() }, o.clipExtent = function (t) { return arguments.length ? (null == t ? f = e = r = i = null : (f = +t[0][0], e = +t[0][1], r = +t[1][0], i = +t[1][1]), n()) : null == f ? null : [[f, e], [r, i]] }, n() } function bu(t) { return jv((Ev + t) / 2) } function wu(t, n) { function e(t, n) { o > 0 ? n < -Ev + Nv && (n = -Ev + Nv) : n > Ev - Nv && (n = Ev - Nv); var e = o / Iv(bu(n), i); return [e * Yv(i * t), o - e * Dv(i * t)] } var r = Dv(t), i = t === n ? Yv(t) : Fv(r / Dv(n)) / Fv(bu(n) / bu(t)), o = r * Iv(bu(t), i) / i; return i ? (e.invert = function (t, n) { var e = o - n, r = Bv(i) * Hv(t * t + e * e); return [qv(t, Rv(e)) / i * Bv(e), 2 * Lv(Iv(o / r, 1 / i)) - Ev] }, e) : mu } function Mu(t, n) { return [t, n] } function Tu(t, n) { function e(t, n) { var e = o - n, r = i * t; return [e * Yv(r), o - e * Dv(r)] } var r = Dv(t), i = t === n ? Yv(t) : (r - Dv(n)) / (n - t), o = r / i + t; return Rv(i) < Nv ? Mu : (e.invert = function (t, n) { var e = o - n; return [qv(t, Rv(e)) / i * Bv(e), o - Bv(i) * Hv(t * t + e * e)] }, e) } function Nu(t, n) { var e = Dv(n), r = Dv(t) * e; return [e * Yv(t) / r, Yv(n) / r] } function ku(t, n, e, r) { return 1 === t && 1 === n && 0 === e && 0 === r ? Ro : Jo({ point: function (i, o) { this.stream.point(i * t + e, o * n + r) } }) } function Su(t, n) { var e = n * n, r = e * e; return [t * (.8707 - .131979 * e + r * (r * (.003971 * e - .001529 * r) - .013791)), n * (1.007226 + e * (.015085 + r * (.028874 * e - .044475 - .005916 * r)))] } function Eu(t, n) { return [Dv(n) * Yv(t), Yv(n)] } function Au(t, n) { var e = Dv(n), r = 1 + Dv(t) * e; return [e * Yv(t) / r, Yv(n) / r] } function Cu(t, n) { return [Fv(jv((Ev + n) / 2)), -t] } function zu(t, n) { return t.parent === n.parent ? 1 : 2 } function Pu(t) { return t.reduce(Ru, 0) / t.length } function Ru(t, n) { return t + n.x } function Lu(t) { return 1 + t.reduce(qu, 0) } function qu(t, n) { return Math.max(t, n.y) } function Du(t) { for (var n; n = t.children;)t = n[0]; return t } function Uu(t) { for (var n; n = t.children;)t = n[n.length - 1]; return t } function Ou(t) { var n = 0, e = t.children, r = e && e.length; if (r) for (; --r >= 0;)n += e[r].value; else n = 1; t.value = n } function Fu(t, n) { if (t === n) return t; var e = t.ancestors(), r = n.ancestors(), i = null; for (t = e.pop(), n = r.pop(); t === n;)i = t, t = e.pop(), n = r.pop(); return i } function Iu(t, n) { var e, r, i, o, u, a = new ju(t), c = +t.value && (a.value = t.value), s = [a]; for (null == n && (n = Yu); e = s.pop();)if (c && (e.value = +e.data.value), (i = n(e.data)) && (u = i.length)) for (e.children = new Array(u), o = u - 1; o >= 0; --o)s.push(r = e.children[o] = new ju(i[o])), r.parent = e, r.depth = e.depth + 1; return a.eachBefore(Hu) } function Yu(t) { return t.children } function Bu(t) { t.data = t.data.data } function Hu(t) { var n = 0; do { t.height = n } while ((t = t.parent) && t.height < ++n) } function ju(t) { this.data = t, this.depth = this.height = 0, this.parent = null } function Xu(t) { for (var n, e, r = t.length; r;)e = Math.random() * r-- | 0, n = t[r], t[r] = t[e], t[e] = n; return t } function Vu(t) { for (var n, e, r = 0, i = (t = Xu(Gg.call(t))).length, o = []; r < i;)n = t[r], e && Zu(e, n) ? ++r : (e = Qu(o = $u(o, n)), r = 0); return e } function $u(t, n) { var e, r; if (Gu(n, t)) return [n]; for (e = 0; e < t.length; ++e)if (Wu(n, t[e]) && Gu(Ku(t[e], n), t)) return [t[e], n]; for (e = 0; e < t.length - 1; ++e)for (r = e + 1; r < t.length; ++r)if (Wu(Ku(t[e], t[r]), n) && Wu(Ku(t[e], n), t[r]) && Wu(Ku(t[r], n), t[e]) && Gu(ta(t[e], t[r], n), t)) return [t[e], t[r], n]; throw new Error } function Wu(t, n) { var e = t.r - n.r, r = n.x - t.x, i = n.y - t.y; return e < 0 || e * e < r * r + i * i } function Zu(t, n) { var e = t.r - n.r + 1e-6, r = n.x - t.x, i = n.y - t.y; return e > 0 && e * e > r * r + i * i } function Gu(t, n) { for (var e = 0; e < n.length; ++e)if (!Zu(t, n[e])) return !1; return !0 } function Qu(t) { switch (t.length) { case 1: return Ju(t[0]); case 2: return Ku(t[0], t[1]); case 3: return ta(t[0], t[1], t[2]) } } function Ju(t) { return { x: t.x, y: t.y, r: t.r } } function Ku(t, n) { var e = t.x, r = t.y, i = t.r, o = n.x, u = n.y, a = n.r, c = o - e, s = u - r, f = a - i, l = Math.sqrt(c * c + s * s); return { x: (e + o + c / l * f) / 2, y: (r + u + s / l * f) / 2, r: (l + i + a) / 2 } } function ta(t, n, e) { var r = t.x, i = t.y, o = t.r, u = n.x, a = n.y, c = n.r, s = e.x, f = e.y, l = e.r, h = r - u, p = r - s, d = i - a, v = i - f, g = c - o, _ = l - o, y = r * r + i * i - o * o, m = y - u * u - a * a + c * c, x = y - s * s - f * f + l * l, b = p * d - h * v, w = (d * x - v * m) / (2 * b) - r, M = (v * g - d * _) / b, T = (p * m - h * x) / (2 * b) - i, N = (h * _ - p * g) / b, k = M * M + N * N - 1, S = 2 * (o + w * M + T * N), E = w * w + T * T - o * o, A = -(k ? (S + Math.sqrt(S * S - 4 * k * E)) / (2 * k) : E / S); return { x: r + w + M * A, y: i + T + N * A, r: A } } function na(t, n, e) { var r = t.x, i = t.y, o = n.r + e.r, u = t.r + e.r, a = n.x - r, c = n.y - i, s = a * a + c * c; if (s) { var f = .5 + ((u *= u) - (o *= o)) / (2 * s), l = Math.sqrt(Math.max(0, 2 * o * (u + s) - (u -= s) * u - o * o)) / (2 * s); e.x = r + f * a + l * c, e.y = i + f * c - l * a } else e.x = r + u, e.y = i } function ea(t, n) { var e = n.x - t.x, r = n.y - t.y, i = t.r + n.r; return i * i - 1e-6 > e * e + r * r } function ra(t) { var n = t._, e = t.next._, r = n.r + e.r, i = (n.x * e.r + e.x * n.r) / r, o = (n.y * e.r + e.y * n.r) / r; return i * i + o * o } function ia(t) { this._ = t, this.next = null, this.previous = null } function oa(t) { if (!(i = t.length)) return 0; var n, e, r, i, o, u, a, c, s, f, l; if (n = t[0], n.x = 0, n.y = 0, !(i > 1)) return n.r; if (e = t[1], n.x = -e.r, e.x = n.r, e.y = 0, !(i > 2)) return n.r + e.r; na(e, n, r = t[2]), n = new ia(n), e = new ia(e), r = new ia(r), n.next = r.previous = e, e.next = n.previous = r, r.next = e.previous = n; t: for (a = 3; a < i; ++a) { na(n._, e._, r = t[a]), r = new ia(r), c = e.next, s = n.previous, f = e._.r, l = n._.r; do { if (f <= l) { if (ea(c._, r._)) { e = c, n.next = e, e.previous = n, --a; continue t } f += c._.r, c = c.next } else { if (ea(s._, r._)) { (n = s).next = e, e.previous = n, --a; continue t } l += s._.r, s = s.previous } } while (c !== s.next); for (r.previous = n, r.next = e, n.next = e.previous = e = r, o = ra(n); (r = r.next) !== e;)(u = ra(r)) < o && (n = r, o = u); e = n.next } for (n = [e._], r = e; (r = r.next) !== e;)n.push(r._); for (r = Vu(n), a = 0; a < i; ++a)n = t[a], n.x -= r.x, n.y -= r.y; return r.r } function ua(t) { return null == t ? null : aa(t) } function aa(t) { if ("function" != typeof t) throw new Error; return t } function ca() { return 0 } function sa(t) { return function () { return t } } function fa(t) { return Math.sqrt(t.value) } function la(t) { return function (n) { n.children || (n.r = Math.max(0, +t(n) || 0)) } } function ha(t, n) { return function (e) { if (r = e.children) { var r, i, o, u = r.length, a = t(e) * n || 0; if (a) for (i = 0; i < u; ++i)r[i].r += a; if (o = oa(r), a) for (i = 0; i < u; ++i)r[i].r -= a; e.r = o + a } } } function pa(t) { return function (n) { var e = n.parent; n.r *= t, e && (n.x = e.x + t * n.x, n.y = e.y + t * n.y) } } function da(t) { t.x0 = Math.round(t.x0), t.y0 = Math.round(t.y0), t.x1 = Math.round(t.x1), t.y1 = Math.round(t.y1) } function va(t, n, e, r, i) { for (var o, u = t.children, a = -1, c = u.length, s = t.value && (r - n) / t.value; ++a < c;)(o = u[a]).y0 = e, o.y1 = i, o.x0 = n, o.x1 = n += o.value * s } function ga(t) { return t.id } function _a(t) { return t.parentId } function ya(t, n) { return t.parent === n.parent ? 1 : 2 } function ma(t) { var n = t.children; return n ? n[0] : t.t } function xa(t) { var n = t.children; return n ? n[n.length - 1] : t.t } function ba(t, n, e) { var r = e / (n.i - t.i); n.c -= r, n.s += e, t.c += r, n.z += e, n.m += e } function wa(t) { for (var n, e = 0, r = 0, i = t.children, o = i.length; --o >= 0;)(n = i[o]).z += e, n.m += e, e += n.s + (r += n.c) } function Ma(t, n, e) { return t.a.parent === n.parent ? t.a : e } function Ta(t, n) { this._ = t, this.parent = null, this.children = null, this.A = null, this.a = this, this.z = 0, this.m = 0, this.c = 0, this.s = 0, this.t = null, this.i = n } function Na(t) { for (var n, e, r, i, o, u = new Ta(t, 0), a = [u]; n = a.pop();)if (r = n._.children) for (n.children = new Array(o = r.length), i = o - 1; i >= 0; --i)a.push(e = n.children[i] = new Ta(r[i], i)), e.parent = n; return (u.parent = new Ta(null, 0)).children = [u], u } function ka(t, n, e, r, i) { for (var o, u = t.children, a = -1, c = u.length, s = t.value && (i - e) / t.value; ++a < c;)(o = u[a]).x0 = n, o.x1 = r, o.y0 = e, o.y1 = e += o.value * s } function Sa(t, n, e, r, i, o) { for (var u, a, c, s, f, l, h, p, d, v, g, _ = [], y = n.children, m = 0, x = 0, b = y.length, w = n.value; m < b;) { c = i - e, s = o - r; do { f = y[x++].value } while (!f && x < b); for (l = h = f, g = f * f * (v = Math.max(s / c, c / s) / (w * t)), d = Math.max(h / g, g / l); x < b; ++x) { if (f += a = y[x].value, a < l && (l = a), a > h && (h = a), g = f * f * v, (p = Math.max(h / g, g / l)) > d) { f -= a; break } d = p } _.push(u = { value: f, dice: c < s, children: y.slice(m, x) }), u.dice ? va(u, e, r, i, w ? r += s * f / w : o) : ka(u, e, r, w ? e += c * f / w : i, o), w -= f, m = x } return _ } function Ea(t, n, e) { return (n[0] - t[0]) * (e[1] - t[1]) - (n[1] - t[1]) * (e[0] - t[0]) } function Aa(t, n) { return t[0] - n[0] || t[1] - n[1] } function Ca(t) { for (var n = t.length, e = [0, 1], r = 2, i = 2; i < n; ++i) { for (; r > 1 && Ea(t[e[r - 2]], t[e[r - 1]], t[i]) <= 0;)--r; e[r++] = i } return e.slice(0, r) } function za(t) { this._size = t, this._call = this._error = null, this._tasks = [], this._data = [], this._waiting = this._active = this._ended = this._start = 0 } function Pa(t) { if (!t._start) try { Ra(t) } catch (n) { if (t._tasks[t._ended + t._active - 1]) qa(t, n); else if (!t._data) throw n } } function Ra(t) { for (; t._start = t._waiting && t._active < t._size;) { var n = t._ended + t._active, e = t._tasks[n], r = e.length - 1, i = e[r]; e[r] = La(t, n), --t._waiting, ++t._active, e = i.apply(null, e), t._tasks[n] && (t._tasks[n] = e || i_) } } function La(t, n) { return function (e, r) { t._tasks[n] && (--t._active, ++t._ended, t._tasks[n] = null, null == t._error && (null != e ? qa(t, e) : (t._data[n] = r, t._waiting ? Pa(t) : Da(t)))) } } function qa(t, n) { var e, r = t._tasks.length; for (t._error = n, t._data = void 0, t._waiting = NaN; --r >= 0;)if ((e = t._tasks[r]) && (t._tasks[r] = null, e.abort)) try { e.abort() } catch (n) { } t._active = NaN, Da(t) } function Da(t) { if (!t._active && t._call) { var n = t._data; t._data = void 0, t._call(t._error, n) } } function Ua(t) { if (null == t) t = 1 / 0; else if (!((t = +t) >= 1)) throw new Error("invalid concurrency"); return new za(t) } function Oa() { return Math.random() } function Fa(t, n) { function e(t) { var n, e = s.status; if (!e && Ya(s) || e >= 200 && e < 300 || 304 === e) { if (o) try { n = o.call(r, s) } catch (t) { return void a.call("error", r, t) } else n = s; a.call("load", r, n) } else a.call("error", r, t) } var r, i, o, u, a = E("beforesend", "progress", "load", "error"), c = wr(), s = new XMLHttpRequest, f = null, l = null, h = 0; if ("undefined" == typeof XDomainRequest || "withCredentials" in s || !/^(http(s)?:)?\/\//.test(t) || (s = new XDomainRequest), "onload" in s ? s.onload = s.onerror = s.ontimeout = e : s.onreadystatechange = function (t) { s.readyState > 3 && e(t) }, s.onprogress = function (t) { a.call("progress", r, t) }, r = { header: function (t, n) { return t = (t + "").toLowerCase(), arguments.length < 2 ? c.get(t) : (null == n ? c.remove(t) : c.set(t, n + ""), r) }, mimeType: function (t) { return arguments.length ? (i = null == t ? null : t + "", r) : i }, responseType: function (t) { return arguments.length ? (u = t, r) : u }, timeout: function (t) { return arguments.length ? (h = +t, r) : h }, user: function (t) { return arguments.length < 1 ? f : (f = null == t ? null : t + "", r) }, password: function (t) { return arguments.length < 1 ? l : (l = null == t ? null : t + "", r) }, response: function (t) { return o = t, r }, get: function (t, n) { return r.send("GET", t, n) }, post: function (t, n) { return r.send("POST", t, n) }, send: function (n, e, o) { return s.open(n, t, !0, f, l), null == i || c.has("accept") || c.set("accept", i + ",*/*"), s.setRequestHeader && c.each(function (t, n) { s.setRequestHeader(n, t) }), null != i && s.overrideMimeType && s.overrideMimeType(i), null != u && (s.responseType = u), h > 0 && (s.timeout = h), null == o && "function" == typeof e && (o = e, e = null), null != o && 1 === o.length && (o = Ia(o)), null != o && r.on("error", o).on("load", function (t) { o(null, t) }), a.call("beforesend", r, s), s.send(null == e ? null : e), r }, abort: function () { return s.abort(), r }, on: function () { var t = a.on.apply(a, arguments); return t === a ? r : t } }, null != n) { if ("function" != typeof n) throw new Error("invalid callback: " + n); return r.get(n) } return r } function Ia(t) { return function (n, e) { t(null == n ? e : null) } } function Ya(t) { var n = t.responseType; return n && "text" !== n ? t.response : t.responseText } function Ba(t, n) { return function (e, r) { var i = Fa(e).mimeType(t).response(n); if (null != r) { if ("function" != typeof r) throw new Error("invalid callback: " + r); return i.get(r) } return i } } function Ha(t, n) { return function (e, r, i) { arguments.length < 3 && (i = r, r = null); var o = Fa(e).mimeType(t); return o.row = function (t) { return arguments.length ? o.response(ja(n, r = t)) : r }, o.row(r), i ? o.get(i) : o } } function ja(t, n) { return function (e) { return t(e.responseText, n) } } function Xa(t) { function n(n) { var o = n + "", u = e.get(o); if (!u) { if (i !== x_) return i; e.set(o, u = r.push(n)) } return t[(u - 1) % t.length] } var e = wr(), r = [], i = x_; return t = null == t ? [] : m_.call(t), n.domain = function (t) { if (!arguments.length) return r.slice(); r = [], e = wr(); for (var i, o, u = -1, a = t.length; ++u < a;)e.has(o = (i = t[u]) + "") || e.set(o, r.push(i)); return n }, n.range = function (e) { return arguments.length ? (t = m_.call(e), n) : t.slice() }, n.unknown = function (t) { return arguments.length ? (i = t, n) : i }, n.copy = function () { return Xa().domain(r).range(t).unknown(i) }, n } function Va() { function t() { var t = i().length, r = u[1] < u[0], h = u[r - 0], p = u[1 - r]; n = (p - h) / Math.max(1, t - c + 2 * s), a && (n = Math.floor(n)), h += (p - h - n * (t - c)) * f, e = n * (1 - c), a && (h = Math.round(h), e = Math.round(e)); var d = l(t).map(function (t) { return h + n * t }); return o(r ? d.reverse() : d) } var n, e, r = Xa().unknown(void 0), i = r.domain, o = r.range, u = [0, 1], a = !1, c = 0, s = 0, f = .5; return delete r.unknown, r.domain = function (n) { return arguments.length ? (i(n), t()) : i() }, r.range = function (n) { return arguments.length ? (u = [+n[0], +n[1]], t()) : u.slice() }, r.rangeRound = function (n) { return u = [+n[0], +n[1]], a = !0, t() }, r.bandwidth = function () { return e }, r.step = function () { return n }, r.round = function (n) { return arguments.length ? (a = !!n, t()) : a }, r.padding = function (n) { return arguments.length ? (c = s = Math.max(0, Math.min(1, n)), t()) : c }, r.paddingInner = function (n) { return arguments.length ? (c = Math.max(0, Math.min(1, n)), t()) : c }, r.paddingOuter = function (n) { return arguments.length ? (s = Math.max(0, Math.min(1, n)), t()) : s }, r.align = function (n) { return arguments.length ? (f = Math.max(0, Math.min(1, n)), t()) : f }, r.copy = function () { return Va().domain(i()).range(u).round(a).paddingInner(c).paddingOuter(s).align(f) }, t() } function $a(t) { var n = t.copy; return t.padding = t.paddingOuter, delete t.paddingInner, delete t.paddingOuter, t.copy = function () { return $a(n()) }, t } function Wa(t) { return function () { return t } } function Za(t) { return +t } function Ga(t, n) { return (n -= t = +t) ? function (e) { return (e - t) / n } : Wa(n) } function Qa(t) { return function (n, e) { var r = t(n = +n, e = +e); return function (t) { return t <= n ? 0 : t >= e ? 1 : r(t) } } } function Ja(t) { return function (n, e) { var r = t(n = +n, e = +e); return function (t) { return t <= 0 ? n : t >= 1 ? e : r(t) } } } function Ka(t, n, e, r) { var i = t[0], o = t[1], u = n[0], a = n[1]; return o < i ? (i = e(o, i), u = r(a, u)) : (i = e(i, o), u = r(u, a)), function (t) { return u(i(t)) } } function tc(t, n, e, r) { var i = Math.min(t.length, n.length) - 1, o = new Array(i), u = new Array(i), a = -1; for (t[i] < t[0] && (t = t.slice().reverse(), n = n.slice().reverse()); ++a < i;)o[a] = e(t[a], t[a + 1]), u[a] = r(n[a], n[a + 1]); return function (n) { var e = Fl(t, n, 1, i) - 1; return u[e](o[e](n)) } } function nc(t, n) { return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()) } function ec(t, n) { function e() { return i = Math.min(a.length, c.length) > 2 ? tc : Ka, o = u = null, r } function r(n) { return (o || (o = i(a, c, f ? Qa(t) : t, s)))(+n) } var i, o, u, a = b_, c = b_, s = Vn, f = !1; return r.invert = function (t) { return (u || (u = i(c, a, Ga, f ? Ja(n) : n)))(+t) }, r.domain = function (t) { return arguments.length ? (a = y_.call(t, Za), e()) : a.slice() }, r.range = function (t) { return arguments.length ? (c = m_.call(t), e()) : c.slice() }, r.rangeRound = function (t) { return c = m_.call(t), s = $n, e() }, r.clamp = function (t) { return arguments.length ? (f = !!t, e()) : f }, r.interpolate = function (t) { return arguments.length ? (s = t, e()) : s }, e() } function rc(n, e, r) { var i, o = n[0], u = n[n.length - 1], a = d(o, u, null == e ? 10 : e); switch ((r = Kr(null == r ? ",f" : r)).type) { case "s": var c = Math.max(Math.abs(o), Math.abs(u)); return null != r.precision || isNaN(i = oi(a, c)) || (r.precision = i), t.formatPrefix(r, c); case "": case "e": case "g": case "p": case "r": null != r.precision || isNaN(i = ui(a, Math.max(Math.abs(o), Math.abs(u)))) || (r.precision = i - ("e" === r.type)); break; case "f": case "%": null != r.precision || isNaN(i = ii(a)) || (r.precision = i - 2 * ("%" === r.type)) }return t.format(r) } function ic(t) { var n = t.domain; return t.ticks = function (t) { var e = n(); return h(e[0], e[e.length - 1], null == t ? 10 : t) }, t.tickFormat = function (t, e) { return rc(n(), t, e) }, t.nice = function (e) { null == e && (e = 10); var r, i = n(), o = 0, u = i.length - 1, a = i[o], c = i[u]; return c < a && (r = a, a = c, c = r, r = o, o = u, u = r), (r = p(a, c, e)) > 0 ? r = p(a = Math.floor(a / r) * r, c = Math.ceil(c / r) * r, e) : r < 0 && (r = p(a = Math.ceil(a * r) / r, c = Math.floor(c * r) / r, e)), r > 0 ? (i[o] = Math.floor(a / r) * r, i[u] = Math.ceil(c / r) * r, n(i)) : r < 0 && (i[o] = Math.ceil(a * r) / r, i[u] = Math.floor(c * r) / r, n(i)), t }, t } function oc() { var t = ec(Ga, Yn); return t.copy = function () { return nc(t, oc()) }, ic(t) } function uc() { function t(t) { return +t } var n = [0, 1]; return t.invert = t, t.domain = t.range = function (e) { return arguments.length ? (n = y_.call(e, Za), t) : n.slice() }, t.copy = function () { return uc().domain(n) }, ic(t) } function ac(t, n) { var e, r = 0, i = (t = t.slice()).length - 1, o = t[r], u = t[i]; return u < o && (e = r, r = i, i = e, e = o, o = u, u = e), t[r] = n.floor(o), t[i] = n.ceil(u), t } function cc(t, n) { return (n = Math.log(n / t)) ? function (e) { return Math.log(e / t) / n } : Wa(n) } function sc(t, n) { return t < 0 ? function (e) { return -Math.pow(-n, e) * Math.pow(-t, 1 - e) } : function (e) { return Math.pow(n, e) * Math.pow(t, 1 - e) } } function fc(t) { return isFinite(t) ? +("1e" + t) : t < 0 ? 0 : t } function lc(t) { return 10 === t ? fc : t === Math.E ? Math.exp : function (n) { return Math.pow(t, n) } } function hc(t) { return t === Math.E ? Math.log : 10 === t && Math.log10 || 2 === t && Math.log2 || (t = Math.log(t), function (n) { return Math.log(n) / t }) } function pc(t) { return function (n) { return -t(-n) } } function dc() { function n() { return o = hc(i), u = lc(i), r()[0] < 0 && (o = pc(o), u = pc(u)), e } var e = ec(cc, sc).domain([1, 10]), r = e.domain, i = 10, o = hc(10), u = lc(10); return e.base = function (t) { return arguments.length ? (i = +t, n()) : i }, e.domain = function (t) { return arguments.length ? (r(t), n()) : r() }, e.ticks = function (t) { var n, e = r(), a = e[0], c = e[e.length - 1]; (n = c < a) && (p = a, a = c, c = p); var s, f, l, p = o(a), d = o(c), v = null == t ? 10 : +t, g = []; if (!(i % 1) && d - p < v) { if (p = Math.round(p) - 1, d = Math.round(d) + 1, a > 0) { for (; p < d; ++p)for (f = 1, s = u(p); f < i; ++f)if (!((l = s * f) < a)) { if (l > c) break; g.push(l) } } else for (; p < d; ++p)for (f = i - 1, s = u(p); f >= 1; --f)if (!((l = s * f) < a)) { if (l > c) break; g.push(l) } } else g = h(p, d, Math.min(d - p, v)).map(u); return n ? g.reverse() : g }, e.tickFormat = function (n, r) { if (null == r && (r = 10 === i ? ".0e" : ","), "function" != typeof r && (r = t.format(r)), n === 1 / 0) return r; null == n && (n = 10); var a = Math.max(1, i * n / e.ticks().length); return function (t) { var n = t / u(Math.round(o(t))); return n * i < i - .5 && (n *= i), n <= a ? r(t) : "" } }, e.nice = function () { return r(ac(r(), { floor: function (t) { return u(Math.floor(o(t))) }, ceil: function (t) { return u(Math.ceil(o(t))) } })) }, e.copy = function () { return nc(e, dc().base(i)) }, e } function vc(t, n) { return t < 0 ? -Math.pow(-t, n) : Math.pow(t, n) } function gc() { var t = 1, n = ec(function (n, e) { return (e = vc(e, t) - (n = vc(n, t))) ? function (r) { return (vc(r, t) - n) / e } : Wa(e) }, function (n, e) { return e = vc(e, t) - (n = vc(n, t)), function (r) { return vc(n + e * r, 1 / t) } }), e = n.domain; return n.exponent = function (n) { return arguments.length ? (t = +n, e(e())) : t }, n.copy = function () { return nc(n, gc().exponent(t)) }, ic(n) } function _c() { function t() { var t = 0, n = Math.max(1, i.length); for (o = new Array(n - 1); ++t < n;)o[t - 1] = g(r, t / n); return e } function e(t) { if (!isNaN(t = +t)) return i[Fl(o, t)] } var r = [], i = [], o = []; return e.invertExtent = function (t) { var n = i.indexOf(t); return n < 0 ? [NaN, NaN] : [n > 0 ? o[n - 1] : r[0], n < o.length ? o[n] : r[r.length - 1]] }, e.domain = function (e) { if (!arguments.length) return r.slice(); r = []; for (var i, o = 0, u = e.length; o < u; ++o)null == (i = e[o]) || isNaN(i = +i) || r.push(i); return r.sort(n), t() }, e.range = function (n) { return arguments.length ? (i = m_.call(n), t()) : i.slice() }, e.quantiles = function () { return o.slice() }, e.copy = function () { return _c().domain(r).range(i) }, e } function yc() { function t(t) { if (t <= t) return u[Fl(o, t, 0, i)] } function n() { var n = -1; for (o = new Array(i); ++n < i;)o[n] = ((n + 1) * r - (n - i) * e) / (i + 1); return t } var e = 0, r = 1, i = 1, o = [.5], u = [0, 1]; return t.domain = function (t) { return arguments.length ? (e = +t[0], r = +t[1], n()) : [e, r] }, t.range = function (t) { return arguments.length ? (i = (u = m_.call(t)).length - 1, n()) : u.slice() }, t.invertExtent = function (t) { var n = u.indexOf(t); return n < 0 ? [NaN, NaN] : n < 1 ? [e, o[0]] : n >= i ? [o[i - 1], r] : [o[n - 1], o[n]] }, t.copy = function () { return yc().domain([e, r]).range(u) }, ic(t) } function mc() { function t(t) { if (t <= t) return e[Fl(n, t, 0, r)] } var n = [.5], e = [0, 1], r = 1; return t.domain = function (i) { return arguments.length ? (n = m_.call(i), r = Math.min(n.length, e.length - 1), t) : n.slice() }, t.range = function (i) { return arguments.length ? (e = m_.call(i), r = Math.min(n.length, e.length - 1), t) : e.slice() }, t.invertExtent = function (t) { var r = e.indexOf(t); return [n[r - 1], n[r]] }, t.copy = function () { return mc().domain(n).range(e) }, t } function xc(t, n, e, r) { function i(n) { return t(n = new Date(+n)), n } return i.floor = i, i.ceil = function (e) { return t(e = new Date(e - 1)), n(e, 1), t(e), e }, i.round = function (t) { var n = i(t), e = i.ceil(t); return t - n < e - t ? n : e }, i.offset = function (t, e) { return n(t = new Date(+t), null == e ? 1 : Math.floor(e)), t }, i.range = function (e, r, o) { var u, a = []; if (e = i.ceil(e), o = null == o ? 1 : Math.floor(o), !(e < r && o > 0)) return a; do { a.push(u = new Date(+e)), n(e, o), t(e) } while (u < e && e < r); return a }, i.filter = function (e) { return xc(function (n) { if (n >= n) for (; t(n), !e(n);)n.setTime(n - 1) }, function (t, r) { if (t >= t) if (r < 0) for (; ++r <= 0;)for (; n(t, -1), !e(t);); else for (; --r >= 0;)for (; n(t, 1), !e(t);); }) }, e && (i.count = function (n, r) { return w_.setTime(+n), M_.setTime(+r), t(w_), t(M_), Math.floor(e(w_, M_)) }, i.every = function (t) { return t = Math.floor(t), isFinite(t) && t > 0 ? t > 1 ? i.filter(r ? function (n) { return r(n) % t == 0 } : function (n) { return i.count(0, n) % t == 0 }) : i : null }), i } function bc(t) { return xc(function (n) { n.setDate(n.getDate() - (n.getDay() + 7 - t) % 7), n.setHours(0, 0, 0, 0) }, function (t, n) { t.setDate(t.getDate() + 7 * n) }, function (t, n) { return (n - t - (n.getTimezoneOffset() - t.getTimezoneOffset()) * k_) / S_ }) } function wc(t) { return xc(function (n) { n.setUTCDate(n.getUTCDate() - (n.getUTCDay() + 7 - t) % 7), n.setUTCHours(0, 0, 0, 0) }, function (t, n) { t.setUTCDate(t.getUTCDate() + 7 * n) }, function (t, n) { return (n - t) / S_ }) } function Mc(t) { if (0 <= t.y && t.y < 100) { var n = new Date(-1, t.m, t.d, t.H, t.M, t.S, t.L); return n.setFullYear(t.y), n } return new Date(t.y, t.m, t.d, t.H, t.M, t.S, t.L) } function Tc(t) { if (0 <= t.y && t.y < 100) { var n = new Date(Date.UTC(-1, t.m, t.d, t.H, t.M, t.S, t.L)); return n.setUTCFullYear(t.y), n } return new Date(Date.UTC(t.y, t.m, t.d, t.H, t.M, t.S, t.L)) } function Nc(t) { return { y: t, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0 } } function kc(t) { function n(t, n) { return function (e) { var r, i, o, u = [], a = -1, c = 0, s = t.length; for (e instanceof Date || (e = new Date(+e)); ++a < s;)37 === t.charCodeAt(a) && (u.push(t.slice(c, a)), null != (i = Ny[r = t.charAt(++a)]) ? r = t.charAt(++a) : i = "e" === r ? " " : "0", (o = n[r]) && (r = o(e, i)), u.push(r), c = a + 1); return u.push(t.slice(c, a)), u.join("") } } function e(t, n) { return function (e) { var i, o, u = Nc(1900); if (r(u, t, e += "", 0) != e.length) return null; if ("Q" in u) return new Date(u.Q); if ("p" in u && (u.H = u.H % 12 + 12 * u.p), "V" in u) { if (u.V < 1 || u.V > 53) return null; "w" in u || (u.w = 1), "Z" in u ? (i = (o = (i = Tc(Nc(u.y))).getUTCDay()) > 4 || 0 === o ? ay.ceil(i) : ay(i), i = iy.offset(i, 7 * (u.V - 1)), u.y = i.getUTCFullYear(), u.m = i.getUTCMonth(), u.d = i.getUTCDate() + (u.w + 6) % 7) : (i = (o = (i = n(Nc(u.y))).getDay()) > 4 || 0 === o ? U_.ceil(i) : U_(i), i = L_.offset(i, 7 * (u.V - 1)), u.y = i.getFullYear(), u.m = i.getMonth(), u.d = i.getDate() + (u.w + 6) % 7) } else ("W" in u || "U" in u) && ("w" in u || (u.w = "u" in u ? u.u % 7 : "W" in u ? 1 : 0), o = "Z" in u ? Tc(Nc(u.y)).getUTCDay() : n(Nc(u.y)).getDay(), u.m = 0, u.d = "W" in u ? (u.w + 6) % 7 + 7 * u.W - (o + 5) % 7 : u.w + 7 * u.U - (o + 6) % 7); return "Z" in u ? (u.H += u.Z / 100 | 0, u.M += u.Z % 100, Tc(u)) : n(u) } } function r(t, n, e, r) { for (var i, o, u = 0, a = n.length, c = e.length; u < a;) { if (r >= c) return -1; if (37 === (i = n.charCodeAt(u++))) { if (i = n.charAt(u++), !(o = T[i in Ny ? n.charAt(u++) : i]) || (r = o(t, e, r)) < 0) return -1 } else if (i != e.charCodeAt(r++)) return -1 } return r } var i = t.dateTime, o = t.date, u = t.time, a = t.periods, c = t.days, s = t.shortDays, f = t.months, l = t.shortMonths, h = Ac(a), p = Cc(a), d = Ac(c), v = Cc(c), g = Ac(s), _ = Cc(s), y = Ac(f), m = Cc(f), x = Ac(l), b = Cc(l), w = { a: function (t) { return s[t.getDay()] }, A: function (t) { return c[t.getDay()] }, b: function (t) { return l[t.getMonth()] }, B: function (t) { return f[t.getMonth()] }, c: null, d: Gc, e: Gc, f: ns, H: Qc, I: Jc, j: Kc, L: ts, m: es, M: rs, p: function (t) { return a[+(t.getHours() >= 12)] }, Q: zs, s: Ps, S: is, u: os, U: us, V: as, w: cs, W: ss, x: null, X: null, y: fs, Y: ls, Z: hs, "%": Cs }, M = { a: function (t) { return s[t.getUTCDay()] }, A: function (t) { return c[t.getUTCDay()] }, b: function (t) { return l[t.getUTCMonth()] }, B: function (t) { return f[t.getUTCMonth()] }, c: null, d: ps, e: ps, f: ys, H: ds, I: vs, j: gs, L: _s, m: ms, M: xs, p: function (t) { return a[+(t.getUTCHours() >= 12)] }, Q: zs, s: Ps, S: bs, u: ws, U: Ms, V: Ts, w: Ns, W: ks, x: null, X: null, y: Ss, Y: Es, Z: As, "%": Cs }, T = { a: function (t, n, e) { var r = g.exec(n.slice(e)); return r ? (t.w = _[r[0].toLowerCase()], e + r[0].length) : -1 }, A: function (t, n, e) { var r = d.exec(n.slice(e)); return r ? (t.w = v[r[0].toLowerCase()], e + r[0].length) : -1 }, b: function (t, n, e) { var r = x.exec(n.slice(e)); return r ? (t.m = b[r[0].toLowerCase()], e + r[0].length) : -1 }, B: function (t, n, e) { var r = y.exec(n.slice(e)); return r ? (t.m = m[r[0].toLowerCase()], e + r[0].length) : -1 }, c: function (t, n, e) { return r(t, i, n, e) }, d: Ic, e: Ic, f: Vc, H: Bc, I: Bc, j: Yc, L: Xc, m: Fc, M: Hc, p: function (t, n, e) { var r = h.exec(n.slice(e)); return r ? (t.p = p[r[0].toLowerCase()], e + r[0].length) : -1 }, Q: Wc, s: Zc, S: jc, u: Pc, U: Rc, V: Lc, w: zc, W: qc, x: function (t, n, e) { return r(t, o, n, e) }, X: function (t, n, e) { return r(t, u, n, e) }, y: Uc, Y: Dc, Z: Oc, "%": $c }; return w.x = n(o, w), w.X = n(u, w), w.c = n(i, w), M.x = n(o, M), M.X = n(u, M), M.c = n(i, M), { format: function (t) { var e = n(t += "", w); return e.toString = function () { return t }, e }, parse: function (t) { var n = e(t += "", Mc); return n.toString = function () { return t }, n }, utcFormat: function (t) { var e = n(t += "", M); return e.toString = function () { return t }, e }, utcParse: function (t) { var n = e(t, Tc); return n.toString = function () { return t }, n } } } function Sc(t, n, e) { var r = t < 0 ? "-" : "", i = (r ? -t : t) + "", o = i.length; return r + (o < e ? new Array(e - o + 1).join(n) + i : i) } function Ec(t) { return t.replace(Ey, "\\$&") } function Ac(t) { return new RegExp("^(?:" + t.map(Ec).join("|") + ")", "i") } function Cc(t) { for (var n = {}, e = -1, r = t.length; ++e < r;)n[t[e].toLowerCase()] = e; return n } function zc(t, n, e) { var r = ky.exec(n.slice(e, e + 1)); return r ? (t.w = +r[0], e + r[0].length) : -1 } function Pc(t, n, e) { var r = ky.exec(n.slice(e, e + 1)); return r ? (t.u = +r[0], e + r[0].length) : -1 } function Rc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.U = +r[0], e + r[0].length) : -1 } function Lc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.V = +r[0], e + r[0].length) : -1 } function qc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.W = +r[0], e + r[0].length) : -1 } function Dc(t, n, e) { var r = ky.exec(n.slice(e, e + 4)); return r ? (t.y = +r[0], e + r[0].length) : -1 } function Uc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.y = +r[0] + (+r[0] > 68 ? 1900 : 2e3), e + r[0].length) : -1 } function Oc(t, n, e) { var r = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e, e + 6)); return r ? (t.Z = r[1] ? 0 : -(r[2] + (r[3] || "00")), e + r[0].length) : -1 } function Fc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.m = r[0] - 1, e + r[0].length) : -1 } function Ic(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.d = +r[0], e + r[0].length) : -1 } function Yc(t, n, e) { var r = ky.exec(n.slice(e, e + 3)); return r ? (t.m = 0, t.d = +r[0], e + r[0].length) : -1 } function Bc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.H = +r[0], e + r[0].length) : -1 } function Hc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.M = +r[0], e + r[0].length) : -1 } function jc(t, n, e) { var r = ky.exec(n.slice(e, e + 2)); return r ? (t.S = +r[0], e + r[0].length) : -1 } function Xc(t, n, e) { var r = ky.exec(n.slice(e, e + 3)); return r ? (t.L = +r[0], e + r[0].length) : -1 } function Vc(t, n, e) { var r = ky.exec(n.slice(e, e + 6)); return r ? (t.L = Math.floor(r[0] / 1e3), e + r[0].length) : -1 } function $c(t, n, e) { var r = Sy.exec(n.slice(e, e + 1)); return r ? e + r[0].length : -1 } function Wc(t, n, e) { var r = ky.exec(n.slice(e)); return r ? (t.Q = +r[0], e + r[0].length) : -1 } function Zc(t, n, e) { var r = ky.exec(n.slice(e)); return r ? (t.Q = 1e3 * +r[0], e + r[0].length) : -1 } function Gc(t, n) { return Sc(t.getDate(), n, 2) } function Qc(t, n) { return Sc(t.getHours(), n, 2) } function Jc(t, n) { return Sc(t.getHours() % 12 || 12, n, 2) } function Kc(t, n) { return Sc(1 + L_.count(J_(t), t), n, 3) } function ts(t, n) { return Sc(t.getMilliseconds(), n, 3) } function ns(t, n) { return ts(t, n) + "000" } function es(t, n) { return Sc(t.getMonth() + 1, n, 2) } function rs(t, n) { return Sc(t.getMinutes(), n, 2) } function is(t, n) { return Sc(t.getSeconds(), n, 2) } function os(t) { var n = t.getDay(); return 0 === n ? 7 : n } function us(t, n) { return Sc(D_.count(J_(t), t), n, 2) } function as(t, n) { var e = t.getDay(); return t = e >= 4 || 0 === e ? I_(t) : I_.ceil(t), Sc(I_.count(J_(t), t) + (4 === J_(t).getDay()), n, 2) } function cs(t) { return t.getDay() } function ss(t, n) { return Sc(U_.count(J_(t), t), n, 2) } function fs(t, n) { return Sc(t.getFullYear() % 100, n, 2) } function ls(t, n) { return Sc(t.getFullYear() % 1e4, n, 4) } function hs(t) { var n = t.getTimezoneOffset(); return (n > 0 ? "-" : (n *= -1, "+")) + Sc(n / 60 | 0, "0", 2) + Sc(n % 60, "0", 2) } function ps(t, n) { return Sc(t.getUTCDate(), n, 2) } function ds(t, n) { return Sc(t.getUTCHours(), n, 2) } function vs(t, n) { return Sc(t.getUTCHours() % 12 || 12, n, 2) } function gs(t, n) { return Sc(1 + iy.count(wy(t), t), n, 3) } function _s(t, n) { return Sc(t.getUTCMilliseconds(), n, 3) } function ys(t, n) { return _s(t, n) + "000" } function ms(t, n) { return Sc(t.getUTCMonth() + 1, n, 2) } function xs(t, n) { return Sc(t.getUTCMinutes(), n, 2) } function bs(t, n) { return Sc(t.getUTCSeconds(), n, 2) } function ws(t) { var n = t.getUTCDay(); return 0 === n ? 7 : n } function Ms(t, n) { return Sc(uy.count(wy(t), t), n, 2) } function Ts(t, n) { var e = t.getUTCDay(); return t = e >= 4 || 0 === e ? fy(t) : fy.ceil(t), Sc(fy.count(wy(t), t) + (4 === wy(t).getUTCDay()), n, 2) } function Ns(t) { return t.getUTCDay() } function ks(t, n) { return Sc(ay.count(wy(t), t), n, 2) } function Ss(t, n) { return Sc(t.getUTCFullYear() % 100, n, 2) } function Es(t, n) { return Sc(t.getUTCFullYear() % 1e4, n, 4) } function As() { return "+0000" } function Cs() { return "%" } function zs(t) { return +t } function Ps(t) { return Math.floor(+t / 1e3) } function Rs(n) { return My = kc(n), t.timeFormat = My.format, t.timeParse = My.parse, t.utcFormat = My.utcFormat, t.utcParse = My.utcParse, My } function Ls(t) { return new Date(t) } function qs(t) { return t instanceof Date ? +t : +new Date(+t) } function Ds(t, n, r, i, o, u, a, c, s) { function f(e) { return (a(e) < e ? g : u(e) < e ? _ : o(e) < e ? y : i(e) < e ? m : n(e) < e ? r(e) < e ? x : b : t(e) < e ? w : M)(e) } function l(n, r, i, o) { if (null == n && (n = 10), "number" == typeof n) { var u = Math.abs(i - r) / n, a = e(function (t) { return t[2] }).right(T, u); a === T.length ? (o = d(r / Uy, i / Uy, n), n = t) : a ? (o = (a = T[u / T[a - 1][2] < T[a][2] / u ? a - 1 : a])[1], n = a[0]) : (o = Math.max(d(r, i, n), 1), n = c) } return null == o ? n : n.every(o) } var h = ec(Ga, Yn), p = h.invert, v = h.domain, g = s(".%L"), _ = s(":%S"), y = s("%I:%M"), m = s("%I %p"), x = s("%a %d"), b = s("%b %d"), w = s("%B"), M = s("%Y"), T = [[a, 1, zy], [a, 5, 5 * zy], [a, 15, 15 * zy], [a, 30, 30 * zy], [u, 1, Py], [u, 5, 5 * Py], [u, 15, 15 * Py], [u, 30, 30 * Py], [o, 1, Ry], [o, 3, 3 * Ry], [o, 6, 6 * Ry], [o, 12, 12 * Ry], [i, 1, Ly], [i, 2, 2 * Ly], [r, 1, qy], [n, 1, Dy], [n, 3, 3 * Dy], [t, 1, Uy]]; return h.invert = function (t) { return new Date(p(t)) }, h.domain = function (t) { return arguments.length ? v(y_.call(t, qs)) : v().map(Ls) }, h.ticks = function (t, n) { var e, r = v(), i = r[0], o = r[r.length - 1], u = o < i; return u && (e = i, i = o, o = e), e = l(t, i, o, n), e = e ? e.range(i, o + 1) : [], u ? e.reverse() : e }, h.tickFormat = function (t, n) { return null == n ? f : s(n) }, h.nice = function (t, n) { var e = v(); return (t = l(t, e[0], e[e.length - 1], n)) ? v(ac(e, t)) : h }, h.copy = function () { return nc(h, Ds(t, n, r, i, o, u, a, c, s)) }, h } function Us(t) { return t.match(/.{6}/g).map(function (t) { return "#" + t }) } function Os(t) { var n = t.length; return function (e) { return t[Math.max(0, Math.min(n - 1, Math.floor(e * n)))] } } function Fs(t) { function n(n) { var o = (n - e) / (r - e); return t(i ? Math.max(0, Math.min(1, o)) : o) } var e = 0, r = 1, i = !1; return n.domain = function (t) { return arguments.length ? (e = +t[0], r = +t[1], n) : [e, r] }, n.clamp = function (t) { return arguments.length ? (i = !!t, n) : i }, n.interpolator = function (e) { return arguments.length ? (t = e, n) : t }, n.copy = function () { return Fs(t).domain([e, r]).clamp(i) }, ic(n) } function Is(t) { return function () { return t } } function Ys(t) { return t > 1 ? 0 : t < -1 ? im : Math.acos(t) } function Bs(t) { return t >= 1 ? om : t <= -1 ? -om : Math.asin(t) } function Hs(t) { return t.innerRadius } function js(t) { return t.outerRadius } function Xs(t) { return t.startAngle } function Vs(t) { return t.endAngle } function $s(t) { return t && t.padAngle } function Ws(t, n, e, r, i, o, u, a) { var c = e - t, s = r - n, f = u - i, l = a - o, h = (f * (n - o) - l * (t - i)) / (l * c - f * s); return [t + h * c, n + h * s] } function Zs(t, n, e, r, i, o, u) { var a = t - e, c = n - r, s = (u ? o : -o) / em(a * a + c * c), f = s * c, l = -s * a, h = t + f, p = n + l, d = e + f, v = r + l, g = (h + d) / 2, _ = (p + v) / 2, y = d - h, m = v - p, x = y * y + m * m, b = i - o, w = h * v - d * p, M = (m < 0 ? -1 : 1) * em(Ky(0, b * b * x - w * w)), T = (w * m - y * M) / x, N = (-w * y - m * M) / x, k = (w * m + y * M) / x, S = (-w * y + m * M) / x, E = T - g, A = N - _, C = k - g, z = S - _; return E * E + A * A > C * C + z * z && (T = k, N = S), { cx: T, cy: N, x01: -f, y01: -l, x11: T * (i / b - 1), y11: N * (i / b - 1) } } function Gs(t) { this._context = t } function Qs(t) { return new Gs(t) } function Js(t) { return t[0] } function Ks(t) { return t[1] } function tf() { function t(t) { var a, c, s, f = t.length, l = !1; for (null == i && (u = o(s = vr())), a = 0; a <= f; ++a)!(a < f && r(c = t[a], a, t)) === l && ((l = !l) ? u.lineStart() : u.lineEnd()), l && u.point(+n(c, a, t), +e(c, a, t)); if (s) return u = null, s + "" || null } var n = Js, e = Ks, r = Is(!0), i = null, o = Qs, u = null; return t.x = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Is(+e), t) : n }, t.y = function (n) { return arguments.length ? (e = "function" == typeof n ? n : Is(+n), t) : e }, t.defined = function (n) { return arguments.length ? (r = "function" == typeof n ? n : Is(!!n), t) : r }, t.curve = function (n) { return arguments.length ? (o = n, null != i && (u = o(i)), t) : o }, t.context = function (n) { return arguments.length ? (null == n ? i = u = null : u = o(i = n), t) : i }, t } function nf() { function t(t) { var n, f, l, h, p, d = t.length, v = !1, g = new Array(d), _ = new Array(d); for (null == a && (s = c(p = vr())), n = 0; n <= d; ++n) { if (!(n < d && u(h = t[n], n, t)) === v) if (v = !v) f = n, s.areaStart(), s.lineStart(); else { for (s.lineEnd(), s.lineStart(), l = n - 1; l >= f; --l)s.point(g[l], _[l]); s.lineEnd(), s.areaEnd() } v && (g[n] = +e(h, n, t), _[n] = +i(h, n, t), s.point(r ? +r(h, n, t) : g[n], o ? +o(h, n, t) : _[n])) } if (p) return s = null, p + "" || null } function n() { return tf().defined(u).curve(c).context(a) } var e = Js, r = null, i = Is(0), o = Ks, u = Is(!0), a = null, c = Qs, s = null; return t.x = function (n) { return arguments.length ? (e = "function" == typeof n ? n : Is(+n), r = null, t) : e }, t.x0 = function (n) { return arguments.length ? (e = "function" == typeof n ? n : Is(+n), t) : e }, t.x1 = function (n) { return arguments.length ? (r = null == n ? null : "function" == typeof n ? n : Is(+n), t) : r }, t.y = function (n) { return arguments.length ? (i = "function" == typeof n ? n : Is(+n), o = null, t) : i }, t.y0 = function (n) { return arguments.length ? (i = "function" == typeof n ? n : Is(+n), t) : i }, t.y1 = function (n) { return arguments.length ? (o = null == n ? null : "function" == typeof n ? n : Is(+n), t) : o }, t.lineX0 = t.lineY0 = function () { return n().x(e).y(i) }, t.lineY1 = function () { return n().x(e).y(o) }, t.lineX1 = function () { return n().x(r).y(i) }, t.defined = function (n) { return arguments.length ? (u = "function" == typeof n ? n : Is(!!n), t) : u }, t.curve = function (n) { return arguments.length ? (c = n, null != a && (s = c(a)), t) : c }, t.context = function (n) { return arguments.length ? (null == n ? a = s = null : s = c(a = n), t) : a }, t } function ef(t, n) { return n < t ? -1 : n > t ? 1 : n >= t ? 0 : NaN } function rf(t) { return t } function of(t) { this._curve = t } function uf(t) { function n(n) { return new of(t(n)) } return n._curve = t, n } function af(t) { var n = t.curve; return t.angle = t.x, delete t.x, t.radius = t.y, delete t.y, t.curve = function (t) { return arguments.length ? n(uf(t)) : n()._curve }, t } function cf() { return af(tf().curve(am)) } function sf() { var t = nf().curve(am), n = t.curve, e = t.lineX0, r = t.lineX1, i = t.lineY0, o = t.lineY1; return t.angle = t.x, delete t.x, t.startAngle = t.x0, delete t.x0, t.endAngle = t.x1, delete t.x1, t.radius = t.y, delete t.y, t.innerRadius = t.y0, delete t.y0, t.outerRadius = t.y1, delete t.y1, t.lineStartAngle = function () { return af(e()) }, delete t.lineX0, t.lineEndAngle = function () { return af(r()) }, delete t.lineX1, t.lineInnerRadius = function () { return af(i()) }, delete t.lineY0, t.lineOuterRadius = function () { return af(o()) }, delete t.lineY1, t.curve = function (t) { return arguments.length ? n(uf(t)) : n()._curve }, t } function ff(t, n) { return [(n = +n) * Math.cos(t -= Math.PI / 2), n * Math.sin(t)] } function lf(t) { return t.source } function hf(t) { return t.target } function pf(t) { function n() { var n, a = cm.call(arguments), c = e.apply(this, a), s = r.apply(this, a); if (u || (u = n = vr()), t(u, +i.apply(this, (a[0] = c, a)), +o.apply(this, a), +i.apply(this, (a[0] = s, a)), +o.apply(this, a)), n) return u = null, n + "" || null } var e = lf, r = hf, i = Js, o = Ks, u = null; return n.source = function (t) { return arguments.length ? (e = t, n) : e }, n.target = function (t) { return arguments.length ? (r = t, n) : r }, n.x = function (t) { return arguments.length ? (i = "function" == typeof t ? t : Is(+t), n) : i }, n.y = function (t) { return arguments.length ? (o = "function" == typeof t ? t : Is(+t), n) : o }, n.context = function (t) { return arguments.length ? (u = null == t ? null : t, n) : u }, n } function df(t, n, e, r, i) { t.moveTo(n, e), t.bezierCurveTo(n = (n + r) / 2, e, n, i, r, i) } function vf(t, n, e, r, i) { t.moveTo(n, e), t.bezierCurveTo(n, e = (e + i) / 2, r, e, r, i) } function gf(t, n, e, r, i) { var o = ff(n, e), u = ff(n, e = (e + i) / 2), a = ff(r, e), c = ff(r, i); t.moveTo(o[0], o[1]), t.bezierCurveTo(u[0], u[1], a[0], a[1], c[0], c[1]) } function _f() { } function yf(t, n, e) { t._context.bezierCurveTo((2 * t._x0 + t._x1) / 3, (2 * t._y0 + t._y1) / 3, (t._x0 + 2 * t._x1) / 3, (t._y0 + 2 * t._y1) / 3, (t._x0 + 4 * t._x1 + n) / 6, (t._y0 + 4 * t._y1 + e) / 6) } function mf(t) { this._context = t } function xf(t) { this._context = t } function bf(t) { this._context = t } function wf(t, n) { this._basis = new mf(t), this._beta = n } function Mf(t, n, e) { t._context.bezierCurveTo(t._x1 + t._k * (t._x2 - t._x0), t._y1 + t._k * (t._y2 - t._y0), t._x2 + t._k * (t._x1 - n), t._y2 + t._k * (t._y1 - e), t._x2, t._y2) } function Tf(t, n) { this._context = t, this._k = (1 - n) / 6 } function Nf(t, n) { this._context = t, this._k = (1 - n) / 6 } function kf(t, n) { this._context = t, this._k = (1 - n) / 6 } function Sf(t, n, e) { var r = t._x1, i = t._y1, o = t._x2, u = t._y2; if (t._l01_a > rm) { var a = 2 * t._l01_2a + 3 * t._l01_a * t._l12_a + t._l12_2a, c = 3 * t._l01_a * (t._l01_a + t._l12_a); r = (r * a - t._x0 * t._l12_2a + t._x2 * t._l01_2a) / c, i = (i * a - t._y0 * t._l12_2a + t._y2 * t._l01_2a) / c } if (t._l23_a > rm) { var s = 2 * t._l23_2a + 3 * t._l23_a * t._l12_a + t._l12_2a, f = 3 * t._l23_a * (t._l23_a + t._l12_a); o = (o * s + t._x1 * t._l23_2a - n * t._l12_2a) / f, u = (u * s + t._y1 * t._l23_2a - e * t._l12_2a) / f } t._context.bezierCurveTo(r, i, o, u, t._x2, t._y2) } function Ef(t, n) { this._context = t, this._alpha = n } function Af(t, n) { this._context = t, this._alpha = n } function Cf(t, n) { this._context = t, this._alpha = n } function zf(t) { this._context = t } function Pf(t) { return t < 0 ? -1 : 1 } function Rf(t, n, e) { var r = t._x1 - t._x0, i = n - t._x1, o = (t._y1 - t._y0) / (r || i < 0 && -0), u = (e - t._y1) / (i || r < 0 && -0), a = (o * i + u * r) / (r + i); return (Pf(o) + Pf(u)) * Math.min(Math.abs(o), Math.abs(u), .5 * Math.abs(a)) || 0 } function Lf(t, n) { var e = t._x1 - t._x0; return e ? (3 * (t._y1 - t._y0) / e - n) / 2 : n } function qf(t, n, e) { var r = t._x0, i = t._y0, o = t._x1, u = t._y1, a = (o - r) / 3; t._context.bezierCurveTo(r + a, i + a * n, o - a, u - a * e, o, u) } function Df(t) { this._context = t } function Uf(t) { this._context = new Of(t) } function Of(t) { this._context = t } function Ff(t) { this._context = t } function If(t) { var n, e, r = t.length - 1, i = new Array(r), o = new Array(r), u = new Array(r); for (i[0] = 0, o[0] = 2, u[0] = t[0] + 2 * t[1], n = 1; n < r - 1; ++n)i[n] = 1, o[n] = 4, u[n] = 4 * t[n] + 2 * t[n + 1]; for (i[r - 1] = 2, o[r - 1] = 7, u[r - 1] = 8 * t[r - 1] + t[r], n = 1; n < r; ++n)e = i[n] / o[n - 1], o[n] -= e, u[n] -= e * u[n - 1]; for (i[r - 1] = u[r - 1] / o[r - 1], n = r - 2; n >= 0; --n)i[n] = (u[n] - i[n + 1]) / o[n]; for (o[r - 1] = (t[r] + i[r - 1]) / 2, n = 0; n < r - 1; ++n)o[n] = 2 * t[n + 1] - i[n + 1]; return [i, o] } function Yf(t, n) { this._context = t, this._t = n } function Bf(t, n) { if ((i = t.length) > 1) for (var e, r, i, o = 1, u = t[n[0]], a = u.length; o < i; ++o)for (r = u, u = t[n[o]], e = 0; e < a; ++e)u[e][1] += u[e][0] = isNaN(r[e][1]) ? r[e][0] : r[e][1] } function Hf(t) { for (var n = t.length, e = new Array(n); --n >= 0;)e[n] = n; return e } function jf(t, n) { return t[n] } function Xf(t) { var n = t.map(Vf); return Hf(t).sort(function (t, e) { return n[t] - n[e] }) } function Vf(t) { for (var n, e = 0, r = -1, i = t.length; ++r < i;)(n = +t[r][1]) && (e += n); return e } function $f(t) { return function () { return t } } function Wf(t) { return t[0] } function Zf(t) { return t[1] } function Gf() { this._ = null } function Qf(t) { t.U = t.C = t.L = t.R = t.P = t.N = null } function Jf(t, n) { var e = n, r = n.R, i = e.U; i ? i.L === e ? i.L = r : i.R = r : t._ = r, r.U = i, e.U = r, e.R = r.L, e.R && (e.R.U = e), r.L = e } function Kf(t, n) { var e = n, r = n.L, i = e.U; i ? i.L === e ? i.L = r : i.R = r : t._ = r, r.U = i, e.U = r, e.L = r.R, e.L && (e.L.U = e), r.R = e } function tl(t) { for (; t.L;)t = t.L; return t } function nl(t, n, e, r) { var i = [null, null], o = Om.push(i) - 1; return i.left = t, i.right = n, e && rl(i, t, n, e), r && rl(i, n, t, r), Dm[t.index].halfedges.push(o), Dm[n.index].halfedges.push(o), i } function el(t, n, e) { var r = [n, e]; return r.left = t, r } function rl(t, n, e, r) { t[0] || t[1] ? t.left === e ? t[1] = r : t[0] = r : (t[0] = r, t.left = n, t.right = e) } function il(t, n, e, r, i) { var o, u = t[0], a = t[1], c = u[0], s = u[1], f = 0, l = 1, h = a[0] - c, p = a[1] - s; if (o = n - c, h || !(o > 0)) { if (o /= h, h < 0) { if (o < f) return; o < l && (l = o) } else if (h > 0) { if (o > l) return; o > f && (f = o) } if (o = r - c, h || !(o < 0)) { if (o /= h, h < 0) { if (o > l) return; o > f && (f = o) } else if (h > 0) { if (o < f) return; o < l && (l = o) } if (o = e - s, p || !(o > 0)) { if (o /= p, p < 0) { if (o < f) return; o < l && (l = o) } else if (p > 0) { if (o > l) return; o > f && (f = o) } if (o = i - s, p || !(o < 0)) { if (o /= p, p < 0) { if (o > l) return; o > f && (f = o) } else if (p > 0) { if (o < f) return; o < l && (l = o) } return !(f > 0 || l < 1) || (f > 0 && (t[0] = [c + f * h, s + f * p]), l < 1 && (t[1] = [c + l * h, s + l * p]), !0) } } } } } function ol(t, n, e, r, i) { var o = t[1]; if (o) return !0; var u, a, c = t[0], s = t.left, f = t.right, l = s[0], h = s[1], p = f[0], d = f[1], v = (l + p) / 2, g = (h + d) / 2; if (d === h) { if (v < n || v >= r) return; if (l > p) { if (c) { if (c[1] >= i) return } else c = [v, e]; o = [v, i] } else { if (c) { if (c[1] < e) return } else c = [v, i]; o = [v, e] } } else if (u = (l - p) / (d - h), a = g - u * v, u < -1 || u > 1) if (l > p) { if (c) { if (c[1] >= i) return } else c = [(e - a) / u, e]; o = [(i - a) / u, i] } else { if (c) { if (c[1] < e) return } else c = [(i - a) / u, i]; o = [(e - a) / u, e] } else if (h < d) { if (c) { if (c[0] >= r) return } else c = [n, u * n + a]; o = [r, u * r + a] } else { if (c) { if (c[0] < n) return } else c = [r, u * r + a]; o = [n, u * n + a] } return t[0] = c, t[1] = o, !0 } function ul(t, n, e, r) { for (var i, o = Om.length; o--;)ol(i = Om[o], t, n, e, r) && il(i, t, n, e, r) && (Math.abs(i[0][0] - i[1][0]) > Ym || Math.abs(i[0][1] - i[1][1]) > Ym) || delete Om[o] } function al(t) { return Dm[t.index] = { site: t, halfedges: [] } } function cl(t, n) { var e = t.site, r = n.left, i = n.right; return e === i && (i = r, r = e), i ? Math.atan2(i[1] - r[1], i[0] - r[0]) : (e === r ? (r = n[1], i = n[0]) : (r = n[0], i = n[1]), Math.atan2(r[0] - i[0], i[1] - r[1])) } function sl(t, n) { return n[+(n.left !== t.site)] } function fl(t, n) { return n[+(n.left === t.site)] } function ll() { for (var t, n, e, r, i = 0, o = Dm.length; i < o; ++i)if ((t = Dm[i]) && (r = (n = t.halfedges).length)) { var u = new Array(r), a = new Array(r); for (e = 0; e < r; ++e)u[e] = e, a[e] = cl(t, Om[n[e]]); for (u.sort(function (t, n) { return a[n] - a[t] }), e = 0; e < r; ++e)a[e] = n[u[e]]; for (e = 0; e < r; ++e)n[e] = a[e] } } function hl(t, n, e, r) { var i, o, u, a, c, s, f, l, h, p, d, v, g = Dm.length, _ = !0; for (i = 0; i < g; ++i)if (o = Dm[i]) { for (u = o.site, a = (c = o.halfedges).length; a--;)Om[c[a]] || c.splice(a, 1); for (a = 0, s = c.length; a < s;)d = (p = fl(o, Om[c[a]]))[0], v = p[1], l = (f = sl(o, Om[c[++a % s]]))[0], h = f[1], (Math.abs(d - l) > Ym || Math.abs(v - h) > Ym) && (c.splice(a, 0, Om.push(el(u, p, Math.abs(d - t) < Ym && r - v > Ym ? [t, Math.abs(l - t) < Ym ? h : r] : Math.abs(v - r) < Ym && e - d > Ym ? [Math.abs(h - r) < Ym ? l : e, r] : Math.abs(d - e) < Ym && v - n > Ym ? [e, Math.abs(l - e) < Ym ? h : n] : Math.abs(v - n) < Ym && d - t > Ym ? [Math.abs(h - n) < Ym ? l : t, n] : null)) - 1), ++s); s && (_ = !1) } if (_) { var y, m, x, b = 1 / 0; for (i = 0, _ = null; i < g; ++i)(o = Dm[i]) && (x = (y = (u = o.site)[0] - t) * y + (m = u[1] - n) * m) < b && (b = x, _ = o); if (_) { var w = [t, n], M = [t, r], T = [e, r], N = [e, n]; _.halfedges.push(Om.push(el(u = _.site, w, M)) - 1, Om.push(el(u, M, T)) - 1, Om.push(el(u, T, N)) - 1, Om.push(el(u, N, w)) - 1) } } for (i = 0; i < g; ++i)(o = Dm[i]) && (o.halfedges.length || delete Dm[i]) } function pl() { Qf(this), this.x = this.y = this.arc = this.site = this.cy = null } function dl(t) { var n = t.P, e = t.N; if (n && e) { var r = n.site, i = t.site, o = e.site; if (r !== o) { var u = i[0], a = i[1], c = r[0] - u, s = r[1] - a, f = o[0] - u, l = o[1] - a, h = 2 * (c * l - s * f); if (!(h >= -Bm)) { var p = c * c + s * s, d = f * f + l * l, v = (l * p - s * d) / h, g = (c * d - f * p) / h, _ = Fm.pop() || new pl; _.arc = t, _.site = i, _.x = v + u, _.y = (_.cy = g + a) + Math.sqrt(v * v + g * g), t.circle = _; for (var y = null, m = Um._; m;)if (_.y < m.y || _.y === m.y && _.x <= m.x) { if (!m.L) { y = m.P; break } m = m.L } else { if (!m.R) { y = m; break } m = m.R } Um.insert(y, _), y || (Lm = _) } } } } function vl(t) { var n = t.circle; n && (n.P || (Lm = n.N), Um.remove(n), Fm.push(n), Qf(n), t.circle = null) } function gl() { Qf(this), this.edge = this.site = this.circle = null } function _l(t) { var n = Im.pop() || new gl; return n.site = t, n } function yl(t) { vl(t), qm.remove(t), Im.push(t), Qf(t) } function ml(t) { var n = t.circle, e = n.x, r = n.cy, i = [e, r], o = t.P, u = t.N, a = [t]; yl(t); for (var c = o; c.circle && Math.abs(e - c.circle.x) < Ym && Math.abs(r - c.circle.cy) < Ym;)o = c.P, a.unshift(c), yl(c), c = o; a.unshift(c), vl(c); for (var s = u; s.circle && Math.abs(e - s.circle.x) < Ym && Math.abs(r - s.circle.cy) < Ym;)u = s.N, a.push(s), yl(s), s = u; a.push(s), vl(s); var f, l = a.length; for (f = 1; f < l; ++f)s = a[f], c = a[f - 1], rl(s.edge, c.site, s.site, i); c = a[0], (s = a[l - 1]).edge = nl(c.site, s.site, null, i), dl(c), dl(s) } function xl(t) { for (var n, e, r, i, o = t[0], u = t[1], a = qm._; a;)if ((r = bl(a, u) - o) > Ym) a = a.L; else { if (!((i = o - wl(a, u)) > Ym)) { r > -Ym ? (n = a.P, e = a) : i > -Ym ? (n = a, e = a.N) : n = e = a; break } if (!a.R) { n = a; break } a = a.R } al(t); var c = _l(t); if (qm.insert(n, c), n || e) { if (n === e) return vl(n), e = _l(n.site), qm.insert(c, e), c.edge = e.edge = nl(n.site, c.site), dl(n), void dl(e); if (e) { vl(n), vl(e); var s = n.site, f = s[0], l = s[1], h = t[0] - f, p = t[1] - l, d = e.site, v = d[0] - f, g = d[1] - l, _ = 2 * (h * g - p * v), y = h * h + p * p, m = v * v + g * g, x = [(g * y - p * m) / _ + f, (h * m - v * y) / _ + l]; rl(e.edge, s, d, x), c.edge = nl(s, t, null, x), e.edge = nl(t, d, null, x), dl(n), dl(e) } else c.edge = nl(n.site, c.site) } } function bl(t, n) { var e = t.site, r = e[0], i = e[1], o = i - n; if (!o) return r; var u = t.P; if (!u) return -1 / 0; var a = (e = u.site)[0], c = e[1], s = c - n; if (!s) return a; var f = a - r, l = 1 / o - 1 / s, h = f / s; return l ? (-h + Math.sqrt(h * h - 2 * l * (f * f / (-2 * s) - c + s / 2 + i - o / 2))) / l + r : (r + a) / 2 } function wl(t, n) { var e = t.N; if (e) return bl(e, n); var r = t.site; return r[1] === n ? r[0] : 1 / 0 } function Ml(t, n, e) { return (t[0] - e[0]) * (n[1] - t[1]) - (t[0] - n[0]) * (e[1] - t[1]) } function Tl(t, n) { return n[1] - t[1] || n[0] - t[0] } function Nl(t, n) { var e, r, i, o = t.sort(Tl).pop(); for (Om = [], Dm = new Array(t.length), qm = new Gf, Um = new Gf; ;)if (i = Lm, o && (!i || o[1] < i.y || o[1] === i.y && o[0] < i.x)) o[0] === e && o[1] === r || (xl(o), e = o[0], r = o[1]), o = t.pop(); else { if (!i) break; ml(i.arc) } if (ll(), n) { var u = +n[0][0], a = +n[0][1], c = +n[1][0], s = +n[1][1]; ul(u, a, c, s), hl(u, a, c, s) } this.edges = Om, this.cells = Dm, qm = Um = Om = Dm = null } function kl(t) { return function () { return t } } function Sl(t, n, e) { this.target = t, this.type = n, this.transform = e } function El(t, n, e) { this.k = t, this.x = n, this.y = e } function Al(t) { return t.__zoom || Hm } function Cl() { t.event.stopImmediatePropagation() } function zl() { t.event.preventDefault(), t.event.stopImmediatePropagation() } function Pl() { return !t.event.button } function Rl() { var t, n, e = this; return e instanceof SVGElement ? (t = (e = e.ownerSVGElement || e).width.baseVal.value, n = e.height.baseVal.value) : (t = e.clientWidth, n = e.clientHeight), [[0, 0], [t, n]] } function Ll() { return this.__zoom || Hm } function ql() { return -t.event.deltaY * (t.event.deltaMode ? 120 : 1) / 500 } function Dl() { return "ontouchstart" in this } function Ul(t, n, e) { var r = t.invertX(n[0][0]) - e[0][0], i = t.invertX(n[1][0]) - e[1][0], o = t.invertY(n[0][1]) - e[0][1], u = t.invertY(n[1][1]) - e[1][1]; return t.translate(i > r ? (r + i) / 2 : Math.min(0, r) || Math.max(0, i), u > o ? (o + u) / 2 : Math.min(0, o) || Math.max(0, u)) } var Ol = e(n), Fl = Ol.right, Il = Ol.left, Yl = Array.prototype, Bl = Yl.slice, Hl = Yl.map, jl = Math.sqrt(50), Xl = Math.sqrt(10), Vl = Math.sqrt(2), $l = Array.prototype.slice, Wl = 1, Zl = 2, Gl = 3, Ql = 4, Jl = 1e-6, Kl = { value: function () { } }; A.prototype = E.prototype = { constructor: A, on: function (t, n) { var e, r = this._, i = C(t + "", r), o = -1, u = i.length; { if (!(arguments.length < 2)) { if (null != n && "function" != typeof n) throw new Error("invalid callback: " + n); for (; ++o < u;)if (e = (t = i[o]).type) r[e] = P(r[e], t.name, n); else if (null == n) for (e in r) r[e] = P(r[e], t.name, null); return this } for (; ++o < u;)if ((e = (t = i[o]).type) && (e = z(r[e], t.name))) return e } }, copy: function () { var t = {}, n = this._; for (var e in n) t[e] = n[e].slice(); return new A(t) }, call: function (t, n) { if ((e = arguments.length - 2) > 0) for (var e, r, i = new Array(e), o = 0; o < e; ++o)i[o] = arguments[o + 2]; if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (o = 0, e = (r = this._[t]).length; o < e; ++o)r[o].value.apply(n, i) }, apply: function (t, n, e) { if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (var r = this._[t], i = 0, o = r.length; i < o; ++i)r[i].value.apply(n, e) } }; var th = "http://www.w3.org/1999/xhtml", nh = { svg: "http://www.w3.org/2000/svg", xhtml: th, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }, eh = function (t) { return function () { return this.matches(t) } }; if ("undefined" != typeof document) { var rh = document.documentElement; if (!rh.matches) { var ih = rh.webkitMatchesSelector || rh.msMatchesSelector || rh.mozMatchesSelector || rh.oMatchesSelector; eh = function (t) { return function () { return ih.call(this, t) } } } } var oh = eh; B.prototype = { constructor: B, appendChild: function (t) { return this._parent.insertBefore(t, this._next) }, insertBefore: function (t, n) { return this._parent.insertBefore(t, n) }, querySelector: function (t) { return this._parent.querySelector(t) }, querySelectorAll: function (t) { return this._parent.querySelectorAll(t) } }; var uh = "$"; st.prototype = { add: function (t) { this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" "))) }, remove: function (t) { var n = this._names.indexOf(t); n >= 0 && (this._names.splice(n, 1), this._node.setAttribute("class", this._names.join(" "))) }, contains: function (t) { return this._names.indexOf(t) >= 0 } }; var ah = {}; t.event = null, "undefined" != typeof document && ("onmouseenter" in document.documentElement || (ah = { mouseenter: "mouseover", mouseleave: "mouseout" })); var ch = [null]; Dt.prototype = Ut.prototype = { constructor: Dt, select: function (t) { "function" != typeof t && (t = O(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, u, a = n[i], c = a.length, s = r[i] = new Array(c), f = 0; f < c; ++f)(o = a[f]) && (u = t.call(o, o.__data__, f, a)) && ("__data__" in o && (u.__data__ = o.__data__), s[f] = u); return new Dt(r, this._parents) }, selectAll: function (t) { "function" != typeof t && (t = I(t)); for (var n = this._groups, e = n.length, r = [], i = [], o = 0; o < e; ++o)for (var u, a = n[o], c = a.length, s = 0; s < c; ++s)(u = a[s]) && (r.push(t.call(u, u.__data__, s, a)), i.push(u)); return new Dt(r, i) }, filter: function (t) { "function" != typeof t && (t = oh(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, u = n[i], a = u.length, c = r[i] = [], s = 0; s < a; ++s)(o = u[s]) && t.call(o, o.__data__, s, u) && c.push(o); return new Dt(r, this._parents) }, data: function (t, n) { if (!t) return p = new Array(this.size()), s = -1, this.each(function (t) { p[++s] = t }), p; var e = n ? X : j, r = this._parents, i = this._groups; "function" != typeof t && (t = H(t)); for (var o = i.length, u = new Array(o), a = new Array(o), c = new Array(o), s = 0; s < o; ++s) { var f = r[s], l = i[s], h = l.length, p = t.call(f, f && f.__data__, s, r), d = p.length, v = a[s] = new Array(d), g = u[s] = new Array(d); e(f, l, v, g, c[s] = new Array(h), p, n); for (var _, y, m = 0, x = 0; m < d; ++m)if (_ = v[m]) { for (m >= x && (x = m + 1); !(y = g[x]) && ++x < d;); _._next = y || null } } return u = new Dt(u, r), u._enter = a, u._exit = c, u }, enter: function () { return new Dt(this._enter || this._groups.map(Y), this._parents) }, exit: function () { return new Dt(this._exit || this._groups.map(Y), this._parents) }, merge: function (t) { for (var n = this._groups, e = t._groups, r = n.length, i = e.length, o = Math.min(r, i), u = new Array(r), a = 0; a < o; ++a)for (var c, s = n[a], f = e[a], l = s.length, h = u[a] = new Array(l), p = 0; p < l; ++p)(c = s[p] || f[p]) && (h[p] = c); for (; a < r; ++a)u[a] = n[a]; return new Dt(u, this._parents) }, order: function () { for (var t = this._groups, n = -1, e = t.length; ++n < e;)for (var r, i = t[n], o = i.length - 1, u = i[o]; --o >= 0;)(r = i[o]) && (u && u !== r.nextSibling && u.parentNode.insertBefore(r, u), u = r); return this }, sort: function (t) { t || (t = V); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i) { for (var o, u = n[i], a = u.length, c = r[i] = new Array(a), s = 0; s < a; ++s)(o = u[s]) && (c[s] = o); c.sort(function (n, e) { return n && e ? t(n.__data__, e.__data__) : !n - !e }) } return new Dt(r, this._parents).order() }, call: function () { var t = arguments[0]; return arguments[0] = this, t.apply(null, arguments), this }, nodes: function () { var t = new Array(this.size()), n = -1; return this.each(function () { t[++n] = this }), t }, node: function () { for (var t = this._groups, n = 0, e = t.length; n < e; ++n)for (var r = t[n], i = 0, o = r.length; i < o; ++i) { var u = r[i]; if (u) return u } return null }, size: function () { var t = 0; return this.each(function () { ++t }), t }, empty: function () { return !this.node() }, each: function (t) { for (var n = this._groups, e = 0, r = n.length; e < r; ++e)for (var i, o = n[e], u = 0, a = o.length; u < a; ++u)(i = o[u]) && t.call(i, i.__data__, u, o); return this }, attr: function (t, n) { var e = R(t); if (arguments.length < 2) { var r = this.node(); return e.local ? r.getAttributeNS(e.space, e.local) : r.getAttribute(e) } return this.each((null == n ? e.local ? W : $ : "function" == typeof n ? e.local ? J : Q : e.local ? G : Z)(e, n)) }, style: function (t, n, e) { return arguments.length > 1 ? this.each((null == n ? tt : "function" == typeof n ? et : nt)(t, n, null == e ? "" : e)) : rt(this.node(), t) }, property: function (t, n) { return arguments.length > 1 ? this.each((null == n ? it : "function" == typeof n ? ut : ot)(t, n)) : this.node()[t] }, classed: function (t, n) { var e = at(t + ""); if (arguments.length < 2) { for (var r = ct(this.node()), i = -1, o = e.length; ++i < o;)if (!r.contains(e[i])) return !1; return !0 } return this.each(("function" == typeof n ? dt : n ? ht : pt)(e, n)) }, text: function (t) { return arguments.length ? this.each(null == t ? vt : ("function" == typeof t ? _t : gt)(t)) : this.node().textContent }, html: function (t) { return arguments.length ? this.each(null == t ? yt : ("function" == typeof t ? xt : mt)(t)) : this.node().innerHTML }, raise: function () { return this.each(bt) }, lower: function () { return this.each(wt) }, append: function (t) { var n = "function" == typeof t ? t : D(t); return this.select(function () { return this.appendChild(n.apply(this, arguments)) }) }, insert: function (t, n) { var e = "function" == typeof t ? t : D(t), r = null == n ? Mt : "function" == typeof n ? n : O(n); return this.select(function () { return this.insertBefore(e.apply(this, arguments), r.apply(this, arguments) || null) }) }, remove: function () { return this.each(Tt) }, clone: function (t) { return this.select(t ? kt : Nt) }, datum: function (t) { return arguments.length ? this.property("__data__", t) : this.node().__data__ }, on: function (t, n, e) { var r, i, o = At(t + ""), u = o.length; { if (!(arguments.length < 2)) { for (a = n ? zt : Ct, null == e && (e = !1), r = 0; r < u; ++r)this.each(a(o[r], n, e)); return this } var a = this.node().__on; if (a) for (var c, s = 0, f = a.length; s < f; ++s)for (r = 0, c = a[s]; r < u; ++r)if ((i = o[r]).type === c.type && i.name === c.name) return c.value } }, dispatch: function (t, n) { return this.each(("function" == typeof n ? qt : Lt)(t, n)) } }; var sh = 0; It.prototype = Ft.prototype = { constructor: It, get: function (t) { for (var n = this._; !(n in t);)if (!(t = t.parentNode)) return; return t[n] }, set: function (t, n) { return t[this._] = n }, remove: function (t) { return this._ in t && delete t[this._] }, toString: function () { return this._ } }, Gt.prototype.on = function () { var t = this._.on.apply(this._, arguments); return t === this._ ? this : t }; var fh = "\\s*([+-]?\\d+)\\s*", lh = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", hh = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", ph = /^#([0-9a-f]{3})$/, dh = /^#([0-9a-f]{6})$/, vh = new RegExp("^rgb\\(" + [fh, fh, fh] + "\\)$"), gh = new RegExp("^rgb\\(" + [hh, hh, hh] + "\\)$"), _h = new RegExp("^rgba\\(" + [fh, fh, fh, lh] + "\\)$"), yh = new RegExp("^rgba\\(" + [hh, hh, hh, lh] + "\\)$"), mh = new RegExp("^hsl\\(" + [lh, hh, hh] + "\\)$"), xh = new RegExp("^hsla\\(" + [lh, hh, hh, lh] + "\\)$"), bh = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; nn(rn, on, { displayable: function () { return this.rgb().displayable() }, toString: function () { return this.rgb() + "" } }), nn(fn, sn, en(rn, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new fn(this.r * t, this.g * t, this.b * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new fn(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb: function () { return this }, displayable: function () { return 0 <= this.r && this.r <= 255 && 0 <= this.g && this.g <= 255 && 0 <= this.b && this.b <= 255 && 0 <= this.opacity && this.opacity <= 1 }, toString: function () { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === t ? ")" : ", " + t + ")") } })), nn(dn, pn, en(rn, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new dn(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new dn(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = this.h % 360 + 360 * (this.h < 0), n = isNaN(t) || isNaN(this.s) ? 0 : this.s, e = this.l, r = e + (e < .5 ? e : 1 - e) * n, i = 2 * e - r; return new fn(vn(t >= 240 ? t - 240 : t + 120, i, r), vn(t, i, r), vn(t < 120 ? t + 240 : t - 120, i, r), this.opacity) }, displayable: function () { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 } })); var wh = Math.PI / 180, Mh = 180 / Math.PI, Th = .95047, Nh = 1, kh = 1.08883, Sh = 4 / 29, Eh = 6 / 29, Ah = 3 * Eh * Eh, Ch = Eh * Eh * Eh; nn(yn, _n, en(rn, { brighter: function (t) { return new yn(this.l + 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, darker: function (t) { return new yn(this.l - 18 * (null == t ? 1 : t), this.a, this.b, this.opacity) }, rgb: function () { var t = (this.l + 16) / 116, n = isNaN(this.a) ? t : t + this.a / 500, e = isNaN(this.b) ? t : t - this.b / 200; return t = Nh * xn(t), n = Th * xn(n), e = kh * xn(e), new fn(bn(3.2404542 * n - 1.5371385 * t - .4985314 * e), bn(-.969266 * n + 1.8760108 * t + .041556 * e), bn(.0556434 * n - .2040259 * t + 1.0572252 * e), this.opacity) } })), nn(Nn, Tn, en(rn, { brighter: function (t) { return new Nn(this.h, this.c, this.l + 18 * (null == t ? 1 : t), this.opacity) }, darker: function (t) { return new Nn(this.h, this.c, this.l - 18 * (null == t ? 1 : t), this.opacity) }, rgb: function () { return gn(this).rgb() } })); var zh = -.14861, Ph = 1.78277, Rh = -.29227, Lh = -.90649, qh = 1.97294, Dh = qh * Lh, Uh = qh * Ph, Oh = Ph * Rh - Lh * zh; nn(En, Sn, en(rn, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new En(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new En(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = isNaN(this.h) ? 0 : (this.h + 120) * wh, n = +this.l, e = isNaN(this.s) ? 0 : this.s * n * (1 - n), r = Math.cos(t), i = Math.sin(t); return new fn(255 * (n + e * (zh * r + Ph * i)), 255 * (n + e * (Rh * r + Lh * i)), 255 * (n + e * (qh * r)), this.opacity) } })); var Fh, Ih, Yh, Bh, Hh, jh, Xh = function t(n) { function e(t, n) { var e = r((t = sn(t)).r, (n = sn(n)).r), i = r(t.g, n.g), o = r(t.b, n.b), u = Un(t.opacity, n.opacity); return function (n) { return t.r = e(n), t.g = i(n), t.b = o(n), t.opacity = u(n), t + "" } } var r = Dn(n); return e.gamma = t, e }(1), Vh = On(Cn), $h = On(zn), Wh = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Zh = new RegExp(Wh.source, "g"), Gh = 180 / Math.PI, Qh = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }, Jh = Zn(function (t) { return "none" === t ? Qh : (Fh || (Fh = document.createElement("DIV"), Ih = document.documentElement, Yh = document.defaultView), Fh.style.transform = t, t = Yh.getComputedStyle(Ih.appendChild(Fh), null).getPropertyValue("transform"), Ih.removeChild(Fh), t = t.slice(7, -1).split(","), Wn(+t[0], +t[1], +t[2], +t[3], +t[4], +t[5])) }, "px, ", "px)", "deg)"), Kh = Zn(function (t) { return null == t ? Qh : (Bh || (Bh = document.createElementNS("http://www.w3.org/2000/svg", "g")), Bh.setAttribute("transform", t), (t = Bh.transform.baseVal.consolidate()) ? (t = t.matrix, Wn(t.a, t.b, t.c, t.d, t.e, t.f)) : Qh) }, ", ", ")", ")"), tp = Math.SQRT2, np = 2, ep = 4, rp = 1e-12, ip = te(qn), op = te(Un), up = ne(qn), ap = ne(Un), cp = ee(qn), sp = ee(Un), fp = 0, lp = 0, hp = 0, pp = 1e3, dp = 0, vp = 0, gp = 0, _p = "object" == typeof performance && performance.now ? performance : Date, yp = "object" == typeof window && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) { setTimeout(t, 17) }; oe.prototype = ue.prototype = { constructor: oe, restart: function (t, n, e) { if ("function" != typeof t) throw new TypeError("callback is not a function"); e = (null == e ? re() : +e) + (null == n ? 0 : +n), this._next || jh === this || (jh ? jh._next = this : Hh = this, jh = this), this._call = t, this._time = e, le() }, stop: function () { this._call && (this._call = null, this._time = 1 / 0, le()) } }; var mp = E("start", "end", "interrupt"), xp = [], bp = 0, wp = 1, Mp = 2, Tp = 3, Np = 4, kp = 5, Sp = 6, Ep = Ut.prototype.constructor, Ap = 0, Cp = Ut.prototype; Ve.prototype = $e.prototype = { constructor: Ve, select: function (t) { var n = this._name, e = this._id; "function" != typeof t && (t = O(t)); for (var r = this._groups, i = r.length, o = new Array(i), u = 0; u < i; ++u)for (var a, c, s = r[u], f = s.length, l = o[u] = new Array(f), h = 0; h < f; ++h)(a = s[h]) && (c = t.call(a, a.__data__, h, s)) && ("__data__" in a && (c.__data__ = a.__data__), l[h] = c, pe(l[h], n, e, h, l, ge(a, e))); return new Ve(o, this._parents, n, e) }, selectAll: function (t) { var n = this._name, e = this._id; "function" != typeof t && (t = I(t)); for (var r = this._groups, i = r.length, o = [], u = [], a = 0; a < i; ++a)for (var c, s = r[a], f = s.length, l = 0; l < f; ++l)if (c = s[l]) { for (var h, p = t.call(c, c.__data__, l, s), d = ge(c, e), v = 0, g = p.length; v < g; ++v)(h = p[v]) && pe(h, n, e, v, p, d); o.push(p), u.push(c) } return new Ve(o, u, n, e) }, filter: function (t) { "function" != typeof t && (t = oh(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, u = n[i], a = u.length, c = r[i] = [], s = 0; s < a; ++s)(o = u[s]) && t.call(o, o.__data__, s, u) && c.push(o); return new Ve(r, this._parents, this._name, this._id) }, merge: function (t) { if (t._id !== this._id) throw new Error; for (var n = this._groups, e = t._groups, r = n.length, i = e.length, o = Math.min(r, i), u = new Array(r), a = 0; a < o; ++a)for (var c, s = n[a], f = e[a], l = s.length, h = u[a] = new Array(l), p = 0; p < l; ++p)(c = s[p] || f[p]) && (h[p] = c); for (; a < r; ++a)u[a] = n[a]; return new Ve(u, this._parents, this._name, this._id) }, selection: function () { return new Ep(this._groups, this._parents) }, transition: function () { for (var t = this._name, n = this._id, e = We(), r = this._groups, i = r.length, o = 0; o < i; ++o)for (var u, a = r[o], c = a.length, s = 0; s < c; ++s)if (u = a[s]) { var f = ge(u, n); pe(u, t, e, s, a, { time: f.time + f.delay + f.duration, delay: 0, duration: f.duration, ease: f.ease }) } return new Ve(r, this._parents, t, e) }, call: Cp.call, nodes: Cp.nodes, node: Cp.node, size: Cp.size, empty: Cp.empty, each: Cp.each, on: function (t, n) { var e = this._id; return arguments.length < 2 ? ge(this.node(), e).on.on(t) : this.each(Ue(e, t, n)) }, attr: function (t, n) { var e = R(t), r = "transform" === e ? Kh : we; return this.attrTween(t, "function" == typeof n ? (e.local ? Ee : Se)(e, r, be(this, "attr." + t, n)) : null == n ? (e.local ? Te : Me)(e) : (e.local ? ke : Ne)(e, r, n + "")) }, attrTween: function (t, n) { var e = "attr." + t; if (arguments.length < 2) return (e = this.tween(e)) && e._value; if (null == n) return this.tween(e, null); if ("function" != typeof n) throw new Error; var r = R(t); return this.tween(e, (r.local ? Ae : Ce)(r, n)) }, style: function (t, n, e) { var r = "transform" == (t += "") ? Jh : we; return null == n ? this.styleTween(t, Fe(t, r)).on("end.style." + t, Ie(t)) : this.styleTween(t, "function" == typeof n ? Be(t, r, be(this, "style." + t, n)) : Ye(t, r, n + ""), e) }, styleTween: function (t, n, e) { var r = "style." + (t += ""); if (arguments.length < 2) return (r = this.tween(r)) && r._value; if (null == n) return this.tween(r, null); if ("function" != typeof n) throw new Error; return this.tween(r, He(t, n, null == e ? "" : e)) }, text: function (t) { return this.tween("text", "function" == typeof t ? Xe(be(this, "text", t)) : je(null == t ? "" : t + "")) }, remove: function () { return this.on("end.remove", Oe(this._id)) }, tween: function (t, n) { var e = this._id; if (t += "", arguments.length < 2) { for (var r, i = ge(this.node(), e).tween, o = 0, u = i.length; o < u; ++o)if ((r = i[o]).name === t) return r.value; return null } return this.each((null == n ? me : xe)(e, t, n)) }, delay: function (t) { var n = this._id; return arguments.length ? this.each(("function" == typeof t ? ze : Pe)(n, t)) : ge(this.node(), n).delay }, duration: function (t) { var n = this._id; return arguments.length ? this.each(("function" == typeof t ? Re : Le)(n, t)) : ge(this.node(), n).duration }, ease: function (t) { var n = this._id; return arguments.length ? this.each(qe(n, t)) : ge(this.node(), n).ease } }; var zp = function t(n) { function e(t) { return Math.pow(t, n) } return n = +n, e.exponent = t, e }(3), Pp = function t(n) { function e(t) { return 1 - Math.pow(1 - t, n) } return n = +n, e.exponent = t, e }(3), Rp = function t(n) { function e(t) { return ((t *= 2) <= 1 ? Math.pow(t, n) : 2 - Math.pow(2 - t, n)) / 2 } return n = +n, e.exponent = t, e }(3), Lp = Math.PI, qp = Lp / 2, Dp = 4 / 11, Up = 6 / 11, Op = 8 / 11, Fp = .75, Ip = 9 / 11, Yp = 10 / 11, Bp = .9375, Hp = 21 / 22, jp = 63 / 64, Xp = 1 / Dp / Dp, Vp = function t(n) { function e(t) { return t * t * ((n + 1) * t - n) } return n = +n, e.overshoot = t, e }(1.70158), $p = function t(n) { function e(t) { return --t * t * ((n + 1) * t + n) + 1 } return n = +n, e.overshoot = t, e }(1.70158), Wp = function t(n) { function e(t) { return ((t *= 2) < 1 ? t * t * ((n + 1) * t - n) : (t -= 2) * t * ((n + 1) * t + n) + 2) / 2 } return n = +n, e.overshoot = t, e }(1.70158), Zp = 2 * Math.PI, Gp = function t(n, e) { function r(t) { return n * Math.pow(2, 10 * --t) * Math.sin((i - t) / e) } var i = Math.asin(1 / (n = Math.max(1, n))) * (e /= Zp); return r.amplitude = function (n) { return t(n, e * Zp) }, r.period = function (e) { return t(n, e) }, r }(1, .3), Qp = function t(n, e) { function r(t) { return 1 - n * Math.pow(2, -10 * (t = +t)) * Math.sin((t + i) / e) } var i = Math.asin(1 / (n = Math.max(1, n))) * (e /= Zp); return r.amplitude = function (n) { return t(n, e * Zp) }, r.period = function (e) { return t(n, e) }, r }(1, .3), Jp = function t(n, e) { function r(t) { return ((t = 2 * t - 1) < 0 ? n * Math.pow(2, 10 * t) * Math.sin((i - t) / e) : 2 - n * Math.pow(2, -10 * t) * Math.sin((i + t) / e)) / 2 } var i = Math.asin(1 / (n = Math.max(1, n))) * (e /= Zp); return r.amplitude = function (n) { return t(n, e * Zp) }, r.period = function (e) { return t(n, e) }, r }(1, .3), Kp = { time: null, delay: 0, duration: 250, ease: Ge }; Ut.prototype.interrupt = function (t) { return this.each(function () { ye(this, t) }) }, Ut.prototype.transition = function (t) { var n, e; t instanceof Ve ? (n = t._id, t = t._name) : (n = We(), (e = Kp).time = re(), t = null == t ? null : t + ""); for (var r = this._groups, i = r.length, o = 0; o < i; ++o)for (var u, a = r[o], c = a.length, s = 0; s < c; ++s)(u = a[s]) && pe(u, t, n, s, a, e || nr(u, n)); return new Ve(r, this._parents, t, n) }; var td = [null], nd = { name: "drag" }, ed = { name: "space" }, rd = { name: "handle" }, id = { name: "center" }, od = { name: "x", handles: ["e", "w"].map(ur), input: function (t, n) { return t && [[t[0], n[0][1]], [t[1], n[1][1]]] }, output: function (t) { return t && [t[0][0], t[1][0]] } }, ud = { name: "y", handles: ["n", "s"].map(ur), input: function (t, n) { return t && [[n[0][0], t[0]], [n[1][0], t[1]]] }, output: function (t) { return t && [t[0][1], t[1][1]] } }, ad = { name: "xy", handles: ["n", "e", "s", "w", "nw", "ne", "se", "sw"].map(ur), input: function (t) { return t }, output: function (t) { return t } }, cd = { overlay: "crosshair", selection: "move", n: "ns-resize", e: "ew-resize", s: "ns-resize", w: "ew-resize", nw: "nwse-resize", ne: "nesw-resize", se: "nwse-resize", sw: "nesw-resize" }, sd = { e: "w", w: "e", nw: "ne", ne: "nw", se: "sw", sw: "se" }, fd = { n: "s", s: "n", nw: "sw", ne: "se", se: "ne", sw: "nw" }, ld = { overlay: 1, selection: 1, n: null, e: 1, s: null, w: -1, nw: -1, ne: 1, se: 1, sw: -1 }, hd = { overlay: 1, selection: 1, n: -1, e: null, s: 1, w: null, nw: -1, ne: -1, se: 1, sw: 1 }, pd = Math.cos, dd = Math.sin, vd = Math.PI, gd = vd / 2, _d = 2 * vd, yd = Math.max, md = Array.prototype.slice, xd = Math.PI, bd = 2 * xd, wd = bd - 1e-6; dr.prototype = vr.prototype = { constructor: dr, moveTo: function (t, n) { this._ += "M" + (this._x0 = this._x1 = +t) + "," + (this._y0 = this._y1 = +n) }, closePath: function () { null !== this._x1 && (this._x1 = this._x0, this._y1 = this._y0, this._ += "Z") }, lineTo: function (t, n) { this._ += "L" + (this._x1 = +t) + "," + (this._y1 = +n) }, quadraticCurveTo: function (t, n, e, r) { this._ += "Q" + +t + "," + +n + "," + (this._x1 = +e) + "," + (this._y1 = +r) }, bezierCurveTo: function (t, n, e, r, i, o) { this._ += "C" + +t + "," + +n + "," + +e + "," + +r + "," + (this._x1 = +i) + "," + (this._y1 = +o) }, arcTo: function (t, n, e, r, i) { t = +t, n = +n, e = +e, r = +r, i = +i; var o = this._x1, u = this._y1, a = e - t, c = r - n, s = o - t, f = u - n, l = s * s + f * f; if (i < 0) throw new Error("negative radius: " + i); if (null === this._x1) this._ += "M" + (this._x1 = t) + "," + (this._y1 = n); else if (l > 1e-6) if (Math.abs(f * a - c * s) > 1e-6 && i) { var h = e - o, p = r - u, d = a * a + c * c, v = h * h + p * p, g = Math.sqrt(d), _ = Math.sqrt(l), y = i * Math.tan((xd - Math.acos((d + l - v) / (2 * g * _))) / 2), m = y / _, x = y / g; Math.abs(m - 1) > 1e-6 && (this._ += "L" + (t + m * s) + "," + (n + m * f)), this._ += "A" + i + "," + i + ",0,0," + +(f * h > s * p) + "," + (this._x1 = t + x * a) + "," + (this._y1 = n + x * c) } else this._ += "L" + (this._x1 = t) + "," + (this._y1 = n); else; }, arc: function (t, n, e, r, i, o) { t = +t, n = +n; var u = (e = +e) * Math.cos(r), a = e * Math.sin(r), c = t + u, s = n + a, f = 1 ^ o, l = o ? r - i : i - r; if (e < 0) throw new Error("negative radius: " + e); null === this._x1 ? this._ += "M" + c + "," + s : (Math.abs(this._x1 - c) > 1e-6 || Math.abs(this._y1 - s) > 1e-6) && (this._ += "L" + c + "," + s), e && (l < 0 && (l = l % bd + bd), l > wd ? this._ += "A" + e + "," + e + ",0,1," + f + "," + (t - u) + "," + (n - a) + "A" + e + "," + e + ",0,1," + f + "," + (this._x1 = c) + "," + (this._y1 = s) : l > 1e-6 && (this._ += "A" + e + "," + e + ",0," + +(l >= xd) + "," + f + "," + (this._x1 = t + e * Math.cos(i)) + "," + (this._y1 = n + e * Math.sin(i)))) }, rect: function (t, n, e, r) { this._ += "M" + (this._x0 = this._x1 = +t) + "," + (this._y0 = this._y1 = +n) + "h" + +e + "v" + +r + "h" + -e + "Z" }, toString: function () { return this._ } }; br.prototype = wr.prototype = { constructor: br, has: function (t) { return "$" + t in this }, get: function (t) { return this["$" + t] }, set: function (t, n) { return this["$" + t] = n, this }, remove: function (t) { var n = "$" + t; return n in this && delete this[n] }, clear: function () { for (var t in this) "$" === t[0] && delete this[t] }, keys: function () { var t = []; for (var n in this) "$" === n[0] && t.push(n.slice(1)); return t }, values: function () { var t = []; for (var n in this) "$" === n[0] && t.push(this[n]); return t }, entries: function () { var t = []; for (var n in this) "$" === n[0] && t.push({ key: n.slice(1), value: this[n] }); return t }, size: function () { var t = 0; for (var n in this) "$" === n[0] && ++t; return t }, empty: function () { for (var t in this) if ("$" === t[0]) return !1; return !0 }, each: function (t) { for (var n in this) "$" === n[0] && t(this[n], n.slice(1), this) } }; var Md = wr.prototype; Sr.prototype = Er.prototype = { constructor: Sr, has: Md.has, add: function (t) { return t += "", this["$" + t] = t, this }, remove: Md.remove, clear: Md.clear, values: Md.keys, size: Md.size, empty: Md.empty, each: Md.each }; var Td = {}, Nd = {}, kd = 34, Sd = 10, Ed = 13, Ad = Pr(","), Cd = Ad.parse, zd = Ad.parseRows, Pd = Ad.format, Rd = Ad.formatRows, Ld = Pr("\t"), qd = Ld.parse, Dd = Ld.parseRows, Ud = Ld.format, Od = Ld.formatRows, Fd = Fr.prototype = Ir.prototype; Fd.copy = function () { var t, n, e = new Ir(this._x, this._y, this._x0, this._y0, this._x1, this._y1), r = this._root; if (!r) return e; if (!r.length) return e._root = Yr(r), e; for (t = [{ source: r, target: e._root = new Array(4) }]; r = t.pop();)for (var i = 0; i < 4; ++i)(n = r.source[i]) && (n.length ? t.push({ source: n, target: r.target[i] = new Array(4) }) : r.target[i] = Yr(n)); return e }, Fd.add = function (t) { var n = +this._x.call(null, t), e = +this._y.call(null, t); return qr(this.cover(n, e), n, e, t) }, Fd.addAll = function (t) { var n, e, r, i, o = t.length, u = new Array(o), a = new Array(o), c = 1 / 0, s = 1 / 0, f = -1 / 0, l = -1 / 0; for (e = 0; e < o; ++e)isNaN(r = +this._x.call(null, n = t[e])) || isNaN(i = +this._y.call(null, n)) || (u[e] = r, a[e] = i, r < c && (c = r), r > f && (f = r), i < s && (s = i), i > l && (l = i)); for (f < c && (c = this._x0, f = this._x1), l < s && (s = this._y0, l = this._y1), this.cover(c, s).cover(f, l), e = 0; e < o; ++e)qr(this, u[e], a[e], t[e]); return this }, Fd.cover = function (t, n) { if (isNaN(t = +t) || isNaN(n = +n)) return this; var e = this._x0, r = this._y0, i = this._x1, o = this._y1; if (isNaN(e)) i = (e = Math.floor(t)) + 1, o = (r = Math.floor(n)) + 1; else { if (!(e > t || t > i || r > n || n > o)) return this; var u, a, c = i - e, s = this._root; switch (a = (n < (r + o) / 2) << 1 | t < (e + i) / 2) { case 0: do { u = new Array(4), u[a] = s, s = u } while (c *= 2, i = e + c, o = r + c, t > i || n > o); break; case 1: do { u = new Array(4), u[a] = s, s = u } while (c *= 2, e = i - c, o = r + c, e > t || n > o); break; case 2: do { u = new Array(4), u[a] = s, s = u } while (c *= 2, i = e + c, r = o - c, t > i || r > n); break; case 3: do { u = new Array(4), u[a] = s, s = u } while (c *= 2, e = i - c, r = o - c, e > t || r > n) }this._root && this._root.length && (this._root = s) } return this._x0 = e, this._y0 = r, this._x1 = i, this._y1 = o, this }, Fd.data = function () { var t = []; return this.visit(function (n) { if (!n.length) do { t.push(n.data) } while (n = n.next) }), t }, Fd.extent = function (t) { return arguments.length ? this.cover(+t[0][0], +t[0][1]).cover(+t[1][0], +t[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]] }, Fd.find = function (t, n, e) { var r, i, o, u, a, c, s, f = this._x0, l = this._y0, h = this._x1, p = this._y1, d = [], v = this._root; for (v && d.push(new Dr(v, f, l, h, p)), null == e ? e = 1 / 0 : (f = t - e, l = n - e, h = t + e, p = n + e, e *= e); c = d.pop();)if (!(!(v = c.node) || (i = c.x0) > h || (o = c.y0) > p || (u = c.x1) < f || (a = c.y1) < l)) if (v.length) { var g = (i + u) / 2, _ = (o + a) / 2; d.push(new Dr(v[3], g, _, u, a), new Dr(v[2], i, _, g, a), new Dr(v[1], g, o, u, _), new Dr(v[0], i, o, g, _)), (s = (n >= _) << 1 | t >= g) && (c = d[d.length - 1], d[d.length - 1] = d[d.length - 1 - s], d[d.length - 1 - s] = c) } else { var y = t - +this._x.call(null, v.data), m = n - +this._y.call(null, v.data), x = y * y + m * m; if (x < e) { var b = Math.sqrt(e = x); f = t - b, l = n - b, h = t + b, p = n + b, r = v.data } } return r }, Fd.remove = function (t) { if (isNaN(o = +this._x.call(null, t)) || isNaN(u = +this._y.call(null, t))) return this; var n, e, r, i, o, u, a, c, s, f, l, h, p = this._root, d = this._x0, v = this._y0, g = this._x1, _ = this._y1; if (!p) return this; if (p.length) for (; ;) { if ((s = o >= (a = (d + g) / 2)) ? d = a : g = a, (f = u >= (c = (v + _) / 2)) ? v = c : _ = c, n = p, !(p = p[l = f << 1 | s])) return this; if (!p.length) break; (n[l + 1 & 3] || n[l + 2 & 3] || n[l + 3 & 3]) && (e = n, h = l) } for (; p.data !== t;)if (r = p, !(p = p.next)) return this; return (i = p.next) && delete p.next, r ? (i ? r.next = i : delete r.next, this) : n ? (i ? n[l] = i : delete n[l], (p = n[0] || n[1] || n[2] || n[3]) && p === (n[3] || n[2] || n[1] || n[0]) && !p.length && (e ? e[h] = p : this._root = p), this) : (this._root = i, this) }, Fd.removeAll = function (t) { for (var n = 0, e = t.length; n < e; ++n)this.remove(t[n]); return this }, Fd.root = function () { return this._root }, Fd.size = function () { var t = 0; return this.visit(function (n) { if (!n.length) do { ++t } while (n = n.next) }), t }, Fd.visit = function (t) { var n, e, r, i, o, u, a = [], c = this._root; for (c && a.push(new Dr(c, this._x0, this._y0, this._x1, this._y1)); n = a.pop();)if (!t(c = n.node, r = n.x0, i = n.y0, o = n.x1, u = n.y1) && c.length) { var s = (r + o) / 2, f = (i + u) / 2; (e = c[3]) && a.push(new Dr(e, s, f, o, u)), (e = c[2]) && a.push(new Dr(e, r, f, s, u)), (e = c[1]) && a.push(new Dr(e, s, i, o, f)), (e = c[0]) && a.push(new Dr(e, r, i, s, f)) } return this }, Fd.visitAfter = function (t) { var n, e = [], r = []; for (this._root && e.push(new Dr(this._root, this._x0, this._y0, this._x1, this._y1)); n = e.pop();) { var i = n.node; if (i.length) { var o, u = n.x0, a = n.y0, c = n.x1, s = n.y1, f = (u + c) / 2, l = (a + s) / 2; (o = i[0]) && e.push(new Dr(o, u, a, f, l)), (o = i[1]) && e.push(new Dr(o, f, a, c, l)), (o = i[2]) && e.push(new Dr(o, u, l, f, s)), (o = i[3]) && e.push(new Dr(o, f, l, c, s)) } r.push(n) } for (; n = r.pop();)t(n.node, n.x0, n.y0, n.x1, n.y1); return this }, Fd.x = function (t) { return arguments.length ? (this._x = t, this) : this._x }, Fd.y = function (t) { return arguments.length ? (this._y = t, this) : this._y }; var Id, Yd = 10, Bd = Math.PI * (3 - Math.sqrt(5)), Hd = { "": function (t, n) { t: for (var e, r = (t = t.toPrecision(n)).length, i = 1, o = -1; i < r; ++i)switch (t[i]) { case ".": o = e = i; break; case "0": 0 === o && (o = i), e = i; break; case "e": break t; default: o > 0 && (o = 0) }return o > 0 ? t.slice(0, o) + t.slice(e + 1) : t }, "%": function (t, n) { return (100 * t).toFixed(n) }, b: function (t) { return Math.round(t).toString(2) }, c: function (t) { return t + "" }, d: function (t) { return Math.round(t).toString(10) }, e: function (t, n) { return t.toExponential(n) }, f: function (t, n) { return t.toFixed(n) }, g: function (t, n) { return t.toPrecision(n) }, o: function (t) { return Math.round(t).toString(8) }, p: function (t, n) { return Jr(100 * t, n) }, r: Jr, s: function (t, n) { var e = Wr(t, n); if (!e) return t + ""; var r = e[0], i = e[1], o = i - (Id = 3 * Math.max(-8, Math.min(8, Math.floor(i / 3)))) + 1, u = r.length; return o === u ? r : o > u ? r + new Array(o - u + 1).join("0") : o > 0 ? r.slice(0, o) + "." + r.slice(o) : "0." + new Array(1 - o).join("0") + Wr(t, Math.max(0, n + o - 1))[0] }, X: function (t) { return Math.round(t).toString(16).toUpperCase() }, x: function (t) { return Math.round(t).toString(16) } }, jd = /^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i; Kr.prototype = ti.prototype, ti.prototype.toString = function () { return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (null == this.width ? "" : Math.max(1, 0 | this.width)) + (this.comma ? "," : "") + (null == this.precision ? "" : "." + Math.max(0, 0 | this.precision)) + this.type }; var Xd, Vd = ["y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"]; ri({ decimal: ".", thousands: ",", grouping: [3], currency: ["$", ""] }), ci.prototype = { constructor: ci, reset: function () { this.s = this.t = 0 }, add: function (t) { si(Tv, t, this.t), si(this, Tv.s, this.s), this.s ? this.t += Tv.t : this.s = Tv.t }, valueOf: function () { return this.s } }; var $d, Wd, Zd, Gd, Qd, Jd, Kd, tv, nv, ev, rv, iv, ov, uv, av, cv, sv, fv, lv, hv, pv, dv, vv, gv, _v, yv, mv, xv, bv, wv, Mv, Tv = new ci, Nv = 1e-6, kv = 1e-12, Sv = Math.PI, Ev = Sv / 2, Av = Sv / 4, Cv = 2 * Sv, zv = 180 / Sv, Pv = Sv / 180, Rv = Math.abs, Lv = Math.atan, qv = Math.atan2, Dv = Math.cos, Uv = Math.ceil, Ov = Math.exp, Fv = Math.log, Iv = Math.pow, Yv = Math.sin, Bv = Math.sign || function (t) { return t > 0 ? 1 : t < 0 ? -1 : 0 }, Hv = Math.sqrt, jv = Math.tan, Xv = { Feature: function (t, n) { di(t.geometry, n) }, FeatureCollection: function (t, n) { for (var e = t.features, r = -1, i = e.length; ++r < i;)di(e[r].geometry, n) } }, Vv = { Sphere: function (t, n) { n.sphere() }, Point: function (t, n) { t = t.coordinates, n.point(t[0], t[1], t[2]) }, MultiPoint: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)t = e[r], n.point(t[0], t[1], t[2]) }, LineString: function (t, n) { vi(t.coordinates, n, 0) }, MultiLineString: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)vi(e[r], n, 0) }, Polygon: function (t, n) { gi(t.coordinates, n) }, MultiPolygon: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)gi(e[r], n) }, GeometryCollection: function (t, n) { for (var e = t.geometries, r = -1, i = e.length; ++r < i;)di(e[r], n) } }, $v = ai(), Wv = ai(), Zv = { point: pi, lineStart: pi, lineEnd: pi, polygonStart: function () { $v.reset(), Zv.lineStart = yi, Zv.lineEnd = mi }, polygonEnd: function () { var t = +$v; Wv.add(t < 0 ? Cv + t : t), this.lineStart = this.lineEnd = this.point = pi }, sphere: function () { Wv.add(Cv) } }, Gv = ai(), Qv = { point: Ai, lineStart: zi, lineEnd: Pi, polygonStart: function () { Qv.point = Ri, Qv.lineStart = Li, Qv.lineEnd = qi, Gv.reset(), Zv.polygonStart() }, polygonEnd: function () { Zv.polygonEnd(), Qv.point = Ai, Qv.lineStart = zi, Qv.lineEnd = Pi, $v < 0 ? (Jd = -(tv = 180), Kd = -(nv = 90)) : Gv > Nv ? nv = 90 : Gv < -Nv && (Kd = -90), av[0] = Jd, av[1] = tv } }, Jv = { sphere: pi, point: Fi, lineStart: Yi, lineEnd: ji, polygonStart: function () { Jv.lineStart = Xi, Jv.lineEnd = Vi }, polygonEnd: function () { Jv.lineStart = Yi, Jv.lineEnd = ji } }; Qi.invert = Qi; var Kv, tg, ng, eg, rg, ig, og, ug, ag, cg, sg, fg = ai(), lg = lo(function () { return !0 }, function (t) { var n, e = NaN, r = NaN, i = NaN; return { lineStart: function () { t.lineStart(), n = 1 }, point: function (o, u) { var a = o > 0 ? Sv : -Sv, c = Rv(o - e); Rv(c - Sv) < Nv ? (t.point(e, r = (r + u) / 2 > 0 ? Ev : -Ev), t.point(i, r), t.lineEnd(), t.lineStart(), t.point(a, r), t.point(o, r), n = 0) : i !== a && c >= Sv && (Rv(e - i) < Nv && (e -= i * Nv), Rv(o - a) < Nv && (o -= a * Nv), r = vo(e, r, o, u), t.point(i, r), t.lineEnd(), t.lineStart(), t.point(a, r), n = 0), t.point(e = o, r = u), i = a }, lineEnd: function () { t.lineEnd(), e = r = NaN }, clean: function () { return 2 - n } } }, function (t, n, e, r) { var i; if (null == t) i = e * Ev, r.point(-Sv, i), r.point(0, i), r.point(Sv, i), r.point(Sv, 0), r.point(Sv, -i), r.point(0, -i), r.point(-Sv, -i), r.point(-Sv, 0), r.point(-Sv, i); else if (Rv(t[0] - n[0]) > Nv) { var o = t[0] < n[0] ? Sv : -Sv; i = e * o / 2, r.point(-o, i), r.point(0, i), r.point(o, i) } else r.point(n[0], n[1]) }, [-Sv, -Ev]), hg = 1e9, pg = -hg, dg = ai(), vg = { sphere: pi, point: pi, lineStart: function () { vg.point = xo, vg.lineEnd = mo }, lineEnd: pi, polygonStart: pi, polygonEnd: pi }, gg = [null, null], _g = { type: "LineString", coordinates: gg }, yg = { Feature: function (t, n) { return To(t.geometry, n) }, FeatureCollection: function (t, n) { for (var e = t.features, r = -1, i = e.length; ++r < i;)if (To(e[r].geometry, n)) return !0; return !1 } }, mg = { Sphere: function () { return !0 }, Point: function (t, n) { return No(t.coordinates, n) }, MultiPoint: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)if (No(e[r], n)) return !0; return !1 }, LineString: function (t, n) { return ko(t.coordinates, n) }, MultiLineString: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)if (ko(e[r], n)) return !0; return !1 }, Polygon: function (t, n) { return So(t.coordinates, n) }, MultiPolygon: function (t, n) { for (var e = t.coordinates, r = -1, i = e.length; ++r < i;)if (So(e[r], n)) return !0; return !1 }, GeometryCollection: function (t, n) { for (var e = t.geometries, r = -1, i = e.length; ++r < i;)if (To(e[r], n)) return !0; return !1 } }, xg = ai(), bg = ai(), wg = { point: pi, lineStart: pi, lineEnd: pi, polygonStart: function () { wg.lineStart = Lo, wg.lineEnd = Uo }, polygonEnd: function () { wg.lineStart = wg.lineEnd = wg.point = pi, xg.add(Rv(bg)), bg.reset() }, result: function () { var t = xg / 2; return xg.reset(), t } }, Mg = 1 / 0, Tg = Mg, Ng = -Mg, kg = Ng, Sg = { point: function (t, n) { t < Mg && (Mg = t), t > Ng && (Ng = t), n < Tg && (Tg = n), n > kg && (kg = n) }, lineStart: pi, lineEnd: pi, polygonStart: pi, polygonEnd: pi, result: function () { var t = [[Mg, Tg], [Ng, kg]]; return Ng = kg = -(Tg = Mg = 1 / 0), t } }, Eg = 0, Ag = 0, Cg = 0, zg = 0, Pg = 0, Rg = 0, Lg = 0, qg = 0, Dg = 0, Ug = { point: Oo, lineStart: Fo, lineEnd: Bo, polygonStart: function () { Ug.lineStart = Ho, Ug.lineEnd = jo }, polygonEnd: function () { Ug.point = Oo, Ug.lineStart = Fo, Ug.lineEnd = Bo }, result: function () { var t = Dg ? [Lg / Dg, qg / Dg] : Rg ? [zg / Rg, Pg / Rg] : Cg ? [Eg / Cg, Ag / Cg] : [NaN, NaN]; return Eg = Ag = Cg = zg = Pg = Rg = Lg = qg = Dg = 0, t } }; $o.prototype = { _radius: 4.5, pointRadius: function (t) { return this._radius = t, this }, polygonStart: function () { this._line = 0 }, polygonEnd: function () { this._line = NaN }, lineStart: function () { this._point = 0 }, lineEnd: function () { 0 === this._line && this._context.closePath(), this._point = NaN }, point: function (t, n) { switch (this._point) { case 0: this._context.moveTo(t, n), this._point = 1; break; case 1: this._context.lineTo(t, n); break; default: this._context.moveTo(t + this._radius, n), this._context.arc(t, n, this._radius, 0, Cv) } }, result: pi }; var Og, Fg, Ig, Yg, Bg, Hg = ai(), jg = { point: pi, lineStart: function () { jg.point = Wo }, lineEnd: function () { Og && Zo(Fg, Ig), jg.point = pi }, polygonStart: function () { Og = !0 }, polygonEnd: function () { Og = null }, result: function () { var t = +Hg; return Hg.reset(), t } }; Go.prototype = { _radius: 4.5, _circle: Qo(4.5), pointRadius: function (t) { return (t = +t) !== this._radius && (this._radius = t, this._circle = null), this }, polygonStart: function () { this._line = 0 }, polygonEnd: function () { this._line = NaN }, lineStart: function () { this._point = 0 }, lineEnd: function () { 0 === this._line && this._string.push("Z"), this._point = NaN }, point: function (t, n) { switch (this._point) { case 0: this._string.push("M", t, ",", n), this._point = 1; break; case 1: this._string.push("L", t, ",", n); break; default: null == this._circle && (this._circle = Qo(this._radius)), this._string.push("M", t, ",", n, this._circle) } }, result: function () { if (this._string.length) { var t = this._string.join(""); return this._string = [], t } return null } }, Ko.prototype = { constructor: Ko, point: function (t, n) { this.stream.point(t, n) }, sphere: function () { this.stream.sphere() }, lineStart: function () { this.stream.lineStart() }, lineEnd: function () { this.stream.lineEnd() }, polygonStart: function () { this.stream.polygonStart() }, polygonEnd: function () { this.stream.polygonEnd() } }; var Xg = 16, Vg = Dv(30 * Pv), $g = Jo({ point: function (t, n) { this.stream.point(t * Pv, n * Pv) } }), Wg = _u(function (t) { return Hv(2 / (1 + t)) }); Wg.invert = yu(function (t) { return 2 * li(t / 2) }); var Zg = _u(function (t) { return (t = fi(t)) && t / Yv(t) }); Zg.invert = yu(function (t) { return t }), mu.invert = function (t, n) { return [t, 2 * Lv(Ov(n)) - Ev] }, Mu.invert = Mu, Nu.invert = yu(Lv), Su.invert = function (t, n) { var e, r = n, i = 25; do { var o = r * r, u = o * o; r -= e = (r * (1.007226 + o * (.015085 + u * (.028874 * o - .044475 - .005916 * u))) - n) / (1.007226 + o * (.045255 + u * (.259866 * o - .311325 - .005916 * 11 * u))) } while (Rv(e) > Nv && --i > 0); return [t / (.8707 + (o = r * r) * (o * (o * o * o * (.003971 - .001529 * o) - .013791) - .131979)), r] }, Eu.invert = yu(li), Au.invert = yu(function (t) { return 2 * Lv(t) }), Cu.invert = function (t, n) { return [-n, 2 * Lv(Ov(t)) - Ev] }, ju.prototype = Iu.prototype = { constructor: ju, count: function () { return this.eachAfter(Ou) }, each: function (t) { var n, e, r, i, o = this, u = [o]; do { for (n = u.reverse(), u = []; o = n.pop();)if (t(o), e = o.children) for (r = 0, i = e.length; r < i; ++r)u.push(e[r]) } while (u.length); return this }, eachAfter: function (t) { for (var n, e, r, i = this, o = [i], u = []; i = o.pop();)if (u.push(i), n = i.children) for (e = 0, r = n.length; e < r; ++e)o.push(n[e]); for (; i = u.pop();)t(i); return this }, eachBefore: function (t) { for (var n, e, r = this, i = [r]; r = i.pop();)if (t(r), n = r.children) for (e = n.length - 1; e >= 0; --e)i.push(n[e]); return this }, sum: function (t) { return this.eachAfter(function (n) { for (var e = +t(n.data) || 0, r = n.children, i = r && r.length; --i >= 0;)e += r[i].value; n.value = e }) }, sort: function (t) { return this.eachBefore(function (n) { n.children && n.children.sort(t) }) }, path: function (t) { for (var n = this, e = Fu(n, t), r = [n]; n !== e;)n = n.parent, r.push(n); for (var i = r.length; t !== e;)r.splice(i, 0, t), t = t.parent; return r }, ancestors: function () { for (var t = this, n = [t]; t = t.parent;)n.push(t); return n }, descendants: function () { var t = []; return this.each(function (n) { t.push(n) }), t }, leaves: function () { var t = []; return this.eachBefore(function (n) { n.children || t.push(n) }), t }, links: function () { var t = this, n = []; return t.each(function (e) { e !== t && n.push({ source: e.parent, target: e }) }), n }, copy: function () { return Iu(this).eachBefore(Bu) } }; var Gg = Array.prototype.slice, Qg = "$", Jg = { depth: -1 }, Kg = {}; Ta.prototype = Object.create(ju.prototype); var t_ = (1 + Math.sqrt(5)) / 2, n_ = function t(n) { function e(t, e, r, i, o) { Sa(n, t, e, r, i, o) } return e.ratio = function (n) { return t((n = +n) > 1 ? n : 1) }, e }(t_), e_ = function t(n) { function e(t, e, r, i, o) { if ((u = t._squarify) && u.ratio === n) for (var u, a, c, s, f, l = -1, h = u.length, p = t.value; ++l < h;) { for (c = (a = u[l]).children, s = a.value = 0, f = c.length; s < f; ++s)a.value += c[s].value; a.dice ? va(a, e, r, i, r += (o - r) * a.value / p) : ka(a, e, r, e += (i - e) * a.value / p, o), p -= a.value } else t._squarify = u = Sa(n, t, e, r, i, o), u.ratio = n } return e.ratio = function (n) { return t((n = +n) > 1 ? n : 1) }, e }(t_), r_ = [].slice, i_ = {}; za.prototype = Ua.prototype = { constructor: za, defer: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("defer after await"); if (null != this._error) return this; var n = r_.call(arguments, 1); return n.push(t), ++this._waiting, this._tasks.push(n), Pa(this), this }, abort: function () { return null == this._error && qa(this, new Error("abort")), this }, await: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = function (n, e) { t.apply(null, [n].concat(e)) }, Da(this), this }, awaitAll: function (t) { if ("function" != typeof t) throw new Error("invalid callback"); if (this._call) throw new Error("multiple await"); return this._call = t, Da(this), this } }; var o_ = function t(n) { function e(t, e) { return t = null == t ? 0 : +t, e = null == e ? 1 : +e, 1 === arguments.length ? (e = t, t = 0) : e -= t, function () { return n() * e + t } } return e.source = t, e }(Oa), u_ = function t(n) { function e(t, e) { var r, i; return t = null == t ? 0 : +t, e = null == e ? 1 : +e, function () { var o; if (null != r) o = r, r = null; else do { r = 2 * n() - 1, o = 2 * n() - 1, i = r * r + o * o } while (!i || i > 1); return t + e * o * Math.sqrt(-2 * Math.log(i) / i) } } return e.source = t, e }(Oa), a_ = function t(n) { function e() { var t = u_.source(n).apply(this, arguments); return function () { return Math.exp(t()) } } return e.source = t, e }(Oa), c_ = function t(n) { function e(t) { return function () { for (var e = 0, r = 0; r < t; ++r)e += n(); return e } } return e.source = t, e }(Oa), s_ = function t(n) { function e(t) { var e = c_.source(n)(t); return function () { return e() / t } } return e.source = t, e }(Oa), f_ = function t(n) { function e(t) { return function () { return -Math.log(1 - n()) / t } } return e.source = t, e }(Oa), l_ = Ba("text/html", function (t) { return document.createRange().createContextualFragment(t.responseText) }), h_ = Ba("application/json", function (t) { return JSON.parse(t.responseText) }), p_ = Ba("text/plain", function (t) { return t.responseText }), d_ = Ba("application/xml", function (t) { var n = t.responseXML; if (!n) throw new Error("parse error"); return n }), v_ = Ha("text/csv", Cd), g_ = Ha("text/tab-separated-values", qd), __ = Array.prototype, y_ = __.map, m_ = __.slice, x_ = { name: "implicit" }, b_ = [0, 1], w_ = new Date, M_ = new Date, T_ = xc(function () { }, function (t, n) { t.setTime(+t + n) }, function (t, n) { return n - t }); T_.every = function (t) { return t = Math.floor(t), isFinite(t) && t > 0 ? t > 1 ? xc(function (n) { n.setTime(Math.floor(n / t) * t) }, function (n, e) { n.setTime(+n + e * t) }, function (n, e) { return (e - n) / t }) : T_ : null }; var N_ = T_.range, k_ = 6e4, S_ = 6048e5, E_ = xc(function (t) { t.setTime(1e3 * Math.floor(t / 1e3)) }, function (t, n) { t.setTime(+t + 1e3 * n) }, function (t, n) { return (n - t) / 1e3 }, function (t) { return t.getUTCSeconds() }), A_ = E_.range, C_ = xc(function (t) { t.setTime(Math.floor(t / k_) * k_) }, function (t, n) { t.setTime(+t + n * k_) }, function (t, n) { return (n - t) / k_ }, function (t) { return t.getMinutes() }), z_ = C_.range, P_ = xc(function (t) { var n = t.getTimezoneOffset() * k_ % 36e5; n < 0 && (n += 36e5), t.setTime(36e5 * Math.floor((+t - n) / 36e5) + n) }, function (t, n) { t.setTime(+t + 36e5 * n) }, function (t, n) { return (n - t) / 36e5 }, function (t) { return t.getHours() }), R_ = P_.range, L_ = xc(function (t) { t.setHours(0, 0, 0, 0) }, function (t, n) { t.setDate(t.getDate() + n) }, function (t, n) { return (n - t - (n.getTimezoneOffset() - t.getTimezoneOffset()) * k_) / 864e5 }, function (t) { return t.getDate() - 1 }), q_ = L_.range, D_ = bc(0), U_ = bc(1), O_ = bc(2), F_ = bc(3), I_ = bc(4), Y_ = bc(5), B_ = bc(6), H_ = D_.range, j_ = U_.range, X_ = O_.range, V_ = F_.range, $_ = I_.range, W_ = Y_.range, Z_ = B_.range, G_ = xc(function (t) { t.setDate(1), t.setHours(0, 0, 0, 0) }, function (t, n) { t.setMonth(t.getMonth() + n) }, function (t, n) { return n.getMonth() - t.getMonth() + 12 * (n.getFullYear() - t.getFullYear()) }, function (t) { return t.getMonth() }), Q_ = G_.range, J_ = xc(function (t) { t.setMonth(0, 1), t.setHours(0, 0, 0, 0) }, function (t, n) { t.setFullYear(t.getFullYear() + n) }, function (t, n) { return n.getFullYear() - t.getFullYear() }, function (t) { return t.getFullYear() }); J_.every = function (t) { return isFinite(t = Math.floor(t)) && t > 0 ? xc(function (n) { n.setFullYear(Math.floor(n.getFullYear() / t) * t), n.setMonth(0, 1), n.setHours(0, 0, 0, 0) }, function (n, e) { n.setFullYear(n.getFullYear() + e * t) }) : null }; var K_ = J_.range, ty = xc(function (t) { t.setUTCSeconds(0, 0) }, function (t, n) { t.setTime(+t + n * k_) }, function (t, n) { return (n - t) / k_ }, function (t) { return t.getUTCMinutes() }), ny = ty.range, ey = xc(function (t) { t.setUTCMinutes(0, 0, 0) }, function (t, n) { t.setTime(+t + 36e5 * n) }, function (t, n) { return (n - t) / 36e5 }, function (t) { return t.getUTCHours() }), ry = ey.range, iy = xc(function (t) { t.setUTCHours(0, 0, 0, 0) }, function (t, n) { t.setUTCDate(t.getUTCDate() + n) }, function (t, n) { return (n - t) / 864e5 }, function (t) { return t.getUTCDate() - 1 }), oy = iy.range, uy = wc(0), ay = wc(1), cy = wc(2), sy = wc(3), fy = wc(4), ly = wc(5), hy = wc(6), py = uy.range, dy = ay.range, vy = cy.range, gy = sy.range, _y = fy.range, yy = ly.range, my = hy.range, xy = xc(function (t) { t.setUTCDate(1), t.setUTCHours(0, 0, 0, 0) }, function (t, n) { t.setUTCMonth(t.getUTCMonth() + n) }, function (t, n) { return n.getUTCMonth() - t.getUTCMonth() + 12 * (n.getUTCFullYear() - t.getUTCFullYear()) }, function (t) { return t.getUTCMonth() }), by = xy.range, wy = xc(function (t) { t.setUTCMonth(0, 1), t.setUTCHours(0, 0, 0, 0) }, function (t, n) { t.setUTCFullYear(t.getUTCFullYear() + n) }, function (t, n) { return n.getUTCFullYear() - t.getUTCFullYear() }, function (t) { return t.getUTCFullYear() }); wy.every = function (t) { return isFinite(t = Math.floor(t)) && t > 0 ? xc(function (n) { n.setUTCFullYear(Math.floor(n.getUTCFullYear() / t) * t), n.setUTCMonth(0, 1), n.setUTCHours(0, 0, 0, 0) }, function (n, e) { n.setUTCFullYear(n.getUTCFullYear() + e * t) }) : null }; var My, Ty = wy.range, Ny = { "-": "", _: " ", 0: "0" }, ky = /^\s*\d+/, Sy = /^%/, Ey = /[\\^$*+?|[\]().{}]/g; Rs({ dateTime: "%x, %X", date: "%-m/%-d/%Y", time: "%-I:%M:%S %p", periods: ["AM", "PM"], days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] }); var Ay = Date.prototype.toISOString ? function (t) { return t.toISOString() } : t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"), Cy = +new Date("2000-01-01T00:00:00.000Z") ? function (t) { var n = new Date(t); return isNaN(n) ? null : n } : t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"), zy = 1e3, Py = 60 * zy, Ry = 60 * Py, Ly = 24 * Ry, qy = 7 * Ly, Dy = 30 * Ly, Uy = 365 * Ly, Oy = Us("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"), Fy = Us("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"), Iy = Us("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"), Yy = Us("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"), By = sp(Sn(300, .5, 0), Sn(-240, .5, 1)), Hy = sp(Sn(-100, .75, .35), Sn(80, 1.5, .8)), jy = sp(Sn(260, .75, .35), Sn(80, 1.5, .8)), Xy = Sn(), Vy = Os(Us("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")), $y = Os(Us("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")), Wy = Os(Us("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")), Zy = Os(Us("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")), Gy = Math.abs, Qy = Math.atan2, Jy = Math.cos, Ky = Math.max, tm = Math.min, nm = Math.sin, em = Math.sqrt, rm = 1e-12, im = Math.PI, om = im / 2, um = 2 * im; Gs.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._point = 0 }, lineEnd: function () { (this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2; default: this._context.lineTo(t, n) } } }; var am = uf(Qs); of.prototype = { areaStart: function () { this._curve.areaStart() }, areaEnd: function () { this._curve.areaEnd() }, lineStart: function () { this._curve.lineStart() }, lineEnd: function () { this._curve.lineEnd() }, point: function (t, n) { this._curve.point(n * Math.sin(t), n * -Math.cos(t)) } }; var cm = Array.prototype.slice, sm = { draw: function (t, n) { var e = Math.sqrt(n / im); t.moveTo(e, 0), t.arc(0, 0, e, 0, um) } }, fm = { draw: function (t, n) { var e = Math.sqrt(n / 5) / 2; t.moveTo(-3 * e, -e), t.lineTo(-e, -e), t.lineTo(-e, -3 * e), t.lineTo(e, -3 * e), t.lineTo(e, -e), t.lineTo(3 * e, -e), t.lineTo(3 * e, e), t.lineTo(e, e), t.lineTo(e, 3 * e), t.lineTo(-e, 3 * e), t.lineTo(-e, e), t.lineTo(-3 * e, e), t.closePath() } }, lm = Math.sqrt(1 / 3), hm = 2 * lm, pm = { draw: function (t, n) { var e = Math.sqrt(n / hm), r = e * lm; t.moveTo(0, -e), t.lineTo(r, 0), t.lineTo(0, e), t.lineTo(-r, 0), t.closePath() } }, dm = Math.sin(im / 10) / Math.sin(7 * im / 10), vm = Math.sin(um / 10) * dm, gm = -Math.cos(um / 10) * dm, _m = { draw: function (t, n) { var e = Math.sqrt(.8908130915292852 * n), r = vm * e, i = gm * e; t.moveTo(0, -e), t.lineTo(r, i); for (var o = 1; o < 5; ++o) { var u = um * o / 5, a = Math.cos(u), c = Math.sin(u); t.lineTo(c * e, -a * e), t.lineTo(a * r - c * i, c * r + a * i) } t.closePath() } }, ym = { draw: function (t, n) { var e = Math.sqrt(n), r = -e / 2; t.rect(r, r, e, e) } }, mm = Math.sqrt(3), xm = { draw: function (t, n) { var e = -Math.sqrt(n / (3 * mm)); t.moveTo(0, 2 * e), t.lineTo(-mm * e, -e), t.lineTo(mm * e, -e), t.closePath() } }, bm = -.5, wm = Math.sqrt(3) / 2, Mm = 1 / Math.sqrt(12), Tm = 3 * (Mm / 2 + 1), Nm = { draw: function (t, n) { var e = Math.sqrt(n / Tm), r = e / 2, i = e * Mm, o = r, u = e * Mm + e, a = -o, c = u; t.moveTo(r, i), t.lineTo(o, u), t.lineTo(a, c), t.lineTo(bm * r - wm * i, wm * r + bm * i), t.lineTo(bm * o - wm * u, wm * o + bm * u), t.lineTo(bm * a - wm * c, wm * a + bm * c), t.lineTo(bm * r + wm * i, bm * i - wm * r), t.lineTo(bm * o + wm * u, bm * u - wm * o), t.lineTo(bm * a + wm * c, bm * c - wm * a), t.closePath() } }, km = [sm, fm, pm, ym, _m, xm, Nm]; mf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 3: yf(this, this._x1, this._y1); case 2: this._context.lineTo(this._x1, this._y1) }(this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2; break; case 2: this._point = 3, this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); default: yf(this, t, n) }this._x0 = this._x1, this._x1 = t, this._y0 = this._y1, this._y1 = n } }, xf.prototype = { areaStart: _f, areaEnd: _f, lineStart: function () { this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 1: this._context.moveTo(this._x2, this._y2), this._context.closePath(); break; case 2: this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3), this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3), this._context.closePath(); break; case 3: this.point(this._x2, this._y2), this.point(this._x3, this._y3), this.point(this._x4, this._y4) } }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._x2 = t, this._y2 = n; break; case 1: this._point = 2, this._x3 = t, this._y3 = n; break; case 2: this._point = 3, this._x4 = t, this._y4 = n, this._context.moveTo((this._x0 + 4 * this._x1 + t) / 6, (this._y0 + 4 * this._y1 + n) / 6); break; default: yf(this, t, n) }this._x0 = this._x1, this._x1 = t, this._y0 = this._y1, this._y1 = n } }, bf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = NaN, this._point = 0 }, lineEnd: function () { (this._line || 0 !== this._line && 3 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1; break; case 1: this._point = 2; break; case 2: this._point = 3; var e = (this._x0 + 4 * this._x1 + t) / 6, r = (this._y0 + 4 * this._y1 + n) / 6; this._line ? this._context.lineTo(e, r) : this._context.moveTo(e, r); break; case 3: this._point = 4; default: yf(this, t, n) }this._x0 = this._x1, this._x1 = t, this._y0 = this._y1, this._y1 = n } }, wf.prototype = { lineStart: function () { this._x = [], this._y = [], this._basis.lineStart() }, lineEnd: function () { var t = this._x, n = this._y, e = t.length - 1; if (e > 0) for (var r, i = t[0], o = n[0], u = t[e] - i, a = n[e] - o, c = -1; ++c <= e;)r = c / e, this._basis.point(this._beta * t[c] + (1 - this._beta) * (i + r * u), this._beta * n[c] + (1 - this._beta) * (o + r * a)); this._x = this._y = null, this._basis.lineEnd() }, point: function (t, n) { this._x.push(+t), this._y.push(+n) } }; var Sm = function t(n) { function e(t) { return 1 === n ? new mf(t) : new wf(t, n) } return e.beta = function (n) { return t(+n) }, e }(.85); Tf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 2: this._context.lineTo(this._x2, this._y2); break; case 3: Mf(this, this._x1, this._y1) }(this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2, this._x1 = t, this._y1 = n; break; case 2: this._point = 3; default: Mf(this, t, n) }this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var Em = function t(n) { function e(t) { return new Tf(t, n) } return e.tension = function (n) { return t(+n) }, e }(0); Nf.prototype = { areaStart: _f, areaEnd: _f, lineStart: function () { this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 1: this._context.moveTo(this._x3, this._y3), this._context.closePath(); break; case 2: this._context.lineTo(this._x3, this._y3), this._context.closePath(); break; case 3: this.point(this._x3, this._y3), this.point(this._x4, this._y4), this.point(this._x5, this._y5) } }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._x3 = t, this._y3 = n; break; case 1: this._point = 2, this._context.moveTo(this._x4 = t, this._y4 = n); break; case 2: this._point = 3, this._x5 = t, this._y5 = n; break; default: Mf(this, t, n) }this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var Am = function t(n) { function e(t) { return new Nf(t, n) } return e.tension = function (n) { return t(+n) }, e }(0); kf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN, this._point = 0 }, lineEnd: function () { (this._line || 0 !== this._line && 3 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1; break; case 1: this._point = 2; break; case 2: this._point = 3, this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break; case 3: this._point = 4; default: Mf(this, t, n) }this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var Cm = function t(n) { function e(t) { return new kf(t, n) } return e.tension = function (n) { return t(+n) }, e }(0); Ef.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN, this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0 }, lineEnd: function () { switch (this._point) { case 2: this._context.lineTo(this._x2, this._y2); break; case 3: this.point(this._x2, this._y2) }(this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { if (t = +t, n = +n, this._point) { var e = this._x2 - t, r = this._y2 - n; this._l23_a = Math.sqrt(this._l23_2a = Math.pow(e * e + r * r, this._alpha)) } switch (this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2; break; case 2: this._point = 3; default: Sf(this, t, n) }this._l01_a = this._l12_a, this._l12_a = this._l23_a, this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a, this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var zm = function t(n) { function e(t) { return n ? new Ef(t, n) : new Tf(t, 0) } return e.alpha = function (n) { return t(+n) }, e }(.5); Af.prototype = { areaStart: _f, areaEnd: _f, lineStart: function () { this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 = this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN, this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0 }, lineEnd: function () { switch (this._point) { case 1: this._context.moveTo(this._x3, this._y3), this._context.closePath(); break; case 2: this._context.lineTo(this._x3, this._y3), this._context.closePath(); break; case 3: this.point(this._x3, this._y3), this.point(this._x4, this._y4), this.point(this._x5, this._y5) } }, point: function (t, n) { if (t = +t, n = +n, this._point) { var e = this._x2 - t, r = this._y2 - n; this._l23_a = Math.sqrt(this._l23_2a = Math.pow(e * e + r * r, this._alpha)) } switch (this._point) { case 0: this._point = 1, this._x3 = t, this._y3 = n; break; case 1: this._point = 2, this._context.moveTo(this._x4 = t, this._y4 = n); break; case 2: this._point = 3, this._x5 = t, this._y5 = n; break; default: Sf(this, t, n) }this._l01_a = this._l12_a, this._l12_a = this._l23_a, this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a, this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var Pm = function t(n) { function e(t) { return n ? new Af(t, n) : new Nf(t, 0) } return e.alpha = function (n) { return t(+n) }, e }(.5); Cf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._x2 = this._y0 = this._y1 = this._y2 = NaN, this._l01_a = this._l12_a = this._l23_a = this._l01_2a = this._l12_2a = this._l23_2a = this._point = 0 }, lineEnd: function () { (this._line || 0 !== this._line && 3 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { if (t = +t, n = +n, this._point) { var e = this._x2 - t, r = this._y2 - n; this._l23_a = Math.sqrt(this._l23_2a = Math.pow(e * e + r * r, this._alpha)) } switch (this._point) { case 0: this._point = 1; break; case 1: this._point = 2; break; case 2: this._point = 3, this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break; case 3: this._point = 4; default: Sf(this, t, n) }this._l01_a = this._l12_a, this._l12_a = this._l23_a, this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a, this._x0 = this._x1, this._x1 = this._x2, this._x2 = t, this._y0 = this._y1, this._y1 = this._y2, this._y2 = n } }; var Rm = function t(n) { function e(t) { return n ? new Cf(t, n) : new kf(t, 0) } return e.alpha = function (n) { return t(+n) }, e }(.5); zf.prototype = { areaStart: _f, areaEnd: _f, lineStart: function () { this._point = 0 }, lineEnd: function () { this._point && this._context.closePath() }, point: function (t, n) { t = +t, n = +n, this._point ? this._context.lineTo(t, n) : (this._point = 1, this._context.moveTo(t, n)) } }, Df.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN, this._point = 0 }, lineEnd: function () { switch (this._point) { case 2: this._context.lineTo(this._x1, this._y1); break; case 3: qf(this, this._t0, Lf(this, this._t0)) }(this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line = 1 - this._line }, point: function (t, n) { var e = NaN; if (t = +t, n = +n, t !== this._x1 || n !== this._y1) { switch (this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2; break; case 2: this._point = 3, qf(this, Lf(this, e = Rf(this, t, n)), e); break; default: qf(this, this._t0, e = Rf(this, t, n)) }this._x0 = this._x1, this._x1 = t, this._y0 = this._y1, this._y1 = n, this._t0 = e } } }, (Uf.prototype = Object.create(Df.prototype)).point = function (t, n) { Df.prototype.point.call(this, n, t) }, Of.prototype = { moveTo: function (t, n) { this._context.moveTo(n, t) }, closePath: function () { this._context.closePath() }, lineTo: function (t, n) { this._context.lineTo(n, t) }, bezierCurveTo: function (t, n, e, r, i, o) { this._context.bezierCurveTo(n, t, r, e, o, i) } }, Ff.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x = [], this._y = [] }, lineEnd: function () { var t = this._x, n = this._y, e = t.length; if (e) if (this._line ? this._context.lineTo(t[0], n[0]) : this._context.moveTo(t[0], n[0]), 2 === e) this._context.lineTo(t[1], n[1]); else for (var r = If(t), i = If(n), o = 0, u = 1; u < e; ++o, ++u)this._context.bezierCurveTo(r[0][o], i[0][o], r[1][o], i[1][o], t[u], n[u]); (this._line || 0 !== this._line && 1 === e) && this._context.closePath(), this._line = 1 - this._line, this._x = this._y = null }, point: function (t, n) { this._x.push(+t), this._y.push(+n) } }, Yf.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._x = this._y = NaN, this._point = 0 }, lineEnd: function () { 0 < this._t && this._t < 1 && 2 === this._point && this._context.lineTo(this._x, this._y), (this._line || 0 !== this._line && 1 === this._point) && this._context.closePath(), this._line >= 0 && (this._t = 1 - this._t, this._line = 1 - this._line) }, point: function (t, n) { switch (t = +t, n = +n, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(t, n) : this._context.moveTo(t, n); break; case 1: this._point = 2; default: if (this._t <= 0) this._context.lineTo(this._x, n), this._context.lineTo(t, n); else { var e = this._x * (1 - this._t) + t * this._t; this._context.lineTo(e, this._y), this._context.lineTo(e, n) } }this._x = t, this._y = n } }, Gf.prototype = { constructor: Gf, insert: function (t, n) { var e, r, i; if (t) { if (n.P = t, n.N = t.N, t.N && (t.N.P = n), t.N = n, t.R) { for (t = t.R; t.L;)t = t.L; t.L = n } else t.R = n; e = t } else this._ ? (t = tl(this._), n.P = null, n.N = t, t.P = t.L = n, e = t) : (n.P = n.N = null, this._ = n, e = null); for (n.L = n.R = null, n.U = e, n.C = !0, t = n; e && e.C;)e === (r = e.U).L ? (i = r.R) && i.C ? (e.C = i.C = !1, r.C = !0, t = r) : (t === e.R && (Jf(this, e), e = (t = e).U), e.C = !1, r.C = !0, Kf(this, r)) : (i = r.L) && i.C ? (e.C = i.C = !1, r.C = !0, t = r) : (t === e.L && (Kf(this, e), e = (t = e).U), e.C = !1, r.C = !0, Jf(this, r)), e = t.U; this._.C = !1 }, remove: function (t) { t.N && (t.N.P = t.P), t.P && (t.P.N = t.N), t.N = t.P = null; var n, e, r, i = t.U, o = t.L, u = t.R; if (e = o ? u ? tl(u) : o : u, i ? i.L === t ? i.L = e : i.R = e : this._ = e, o && u ? (r = e.C, e.C = t.C, e.L = o, o.U = e, e !== u ? (i = e.U, e.U = t.U, t = e.R, i.L = t, e.R = u, u.U = e) : (e.U = i, i = e, t = e.R)) : (r = t.C, t = e), t && (t.U = i), !r) if (t && t.C) t.C = !1; else { do { if (t === this._) break; if (t === i.L) { if ((n = i.R).C && (n.C = !1, i.C = !0, Jf(this, i), n = i.R), n.L && n.L.C || n.R && n.R.C) { n.R && n.R.C || (n.L.C = !1, n.C = !0, Kf(this, n), n = i.R), n.C = i.C, i.C = n.R.C = !1, Jf(this, i), t = this._; break } } else if ((n = i.L).C && (n.C = !1, i.C = !0, Kf(this, i), n = i.L), n.L && n.L.C || n.R && n.R.C) { n.L && n.L.C || (n.R.C = !1, n.C = !0, Jf(this, n), n = i.L), n.C = i.C, i.C = n.L.C = !1, Kf(this, i), t = this._; break } n.C = !0, t = i, i = i.U } while (!t.C); t && (t.C = !1) } } }; var Lm, qm, Dm, Um, Om, Fm = [], Im = [], Ym = 1e-6, Bm = 1e-12; Nl.prototype = { constructor: Nl, polygons: function () { var t = this.edges; return this.cells.map(function (n) { var e = n.halfedges.map(function (e) { return sl(n, t[e]) }); return e.data = n.site.data, e }) }, triangles: function () { var t = [], n = this.edges; return this.cells.forEach(function (e, r) { if (o = (i = e.halfedges).length) for (var i, o, u, a = e.site, c = -1, s = n[i[o - 1]], f = s.left === a ? s.right : s.left; ++c < o;)u = f, f = (s = n[i[c]]).left === a ? s.right : s.left, u && f && r < u.index && r < f.index && Ml(a, u, f) < 0 && t.push([a.data, u.data, f.data]) }), t }, links: function () { return this.edges.filter(function (t) { return t.right }).map(function (t) { return { source: t.left.data, target: t.right.data } }) }, find: function (t, n, e) { for (var r, i, o = this, u = o._found || 0, a = o.cells.length; !(i = o.cells[u]);)if (++u >= a) return null; var c = t - i.site[0], s = n - i.site[1], f = c * c + s * s; do { i = o.cells[r = u], u = null, i.halfedges.forEach(function (e) { var r = o.edges[e], a = r.left; if (a !== i.site && a || (a = r.right)) { var c = t - a[0], s = n - a[1], l = c * c + s * s; l < f && (f = l, u = a.index) } }) } while (null !== u); return o._found = r, null == e || f <= e * e ? i.site : null } }, El.prototype = { constructor: El, scale: function (t) { return 1 === t ? this : new El(this.k * t, this.x, this.y) }, translate: function (t, n) { return 0 === t & 0 === n ? this : new El(this.k, this.x + this.k * t, this.y + this.k * n) }, apply: function (t) { return [t[0] * this.k + this.x, t[1] * this.k + this.y] }, applyX: function (t) { return t * this.k + this.x }, applyY: function (t) { return t * this.k + this.y }, invert: function (t) { return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k] }, invertX: function (t) { return (t - this.x) / this.k }, invertY: function (t) { return (t - this.y) / this.k }, rescaleX: function (t) { return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t)) }, rescaleY: function (t) { return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t)) }, toString: function () { return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")" } }; var Hm = new El(1, 0, 0); Al.prototype = El.prototype, t.version = "4.13.0", t.bisect = Fl, t.bisectRight = Fl, t.bisectLeft = Il, t.ascending = n, t.bisector = e, t.cross = function (t, n, e) { var r, o, u, a, c = t.length, s = n.length, f = new Array(c * s); for (null == e && (e = i), r = u = 0; r < c; ++r)for (a = t[r], o = 0; o < s; ++o, ++u)f[u] = e(a, n[o]); return f }, t.descending = function (t, n) { return n < t ? -1 : n > t ? 1 : n >= t ? 0 : NaN }, t.deviation = a, t.extent = c, t.histogram = function () { function t(t) { var i, o, u = t.length, a = new Array(u); for (i = 0; i < u; ++i)a[i] = n(t[i], i, t); var c = e(a), s = c[0], f = c[1], h = r(a, s, f); Array.isArray(h) || (h = d(s, f, h), h = l(Math.ceil(s / h) * h, Math.floor(f / h) * h, h)); for (var p = h.length; h[0] <= s;)h.shift(), --p; for (; h[p - 1] > f;)h.pop(), --p; var v, g = new Array(p + 1); for (i = 0; i <= p; ++i)(v = g[i] = []).x0 = i > 0 ? h[i - 1] : s, v.x1 = i < p ? h[i] : f; for (i = 0; i < u; ++i)s <= (o = a[i]) && o <= f && g[Fl(h, o, 0, p)].push(t[i]); return g } var n = f, e = c, r = v; return t.value = function (e) { return arguments.length ? (n = "function" == typeof e ? e : s(e), t) : n }, t.domain = function (n) { return arguments.length ? (e = "function" == typeof n ? n : s([n[0], n[1]]), t) : e }, t.thresholds = function (n) { return arguments.length ? (r = "function" == typeof n ? n : s(Array.isArray(n) ? Bl.call(n) : n), t) : r }, t }, t.thresholdFreedmanDiaconis = function (t, e, r) { return t = Hl.call(t, o).sort(n), Math.ceil((r - e) / (2 * (g(t, .75) - g(t, .25)) * Math.pow(t.length, -1 / 3))) }, t.thresholdScott = function (t, n, e) { return Math.ceil((e - n) / (3.5 * a(t) * Math.pow(t.length, -1 / 3))) }, t.thresholdSturges = v, t.max = function (t, n) { var e, r, i = t.length, o = -1; if (null == n) { for (; ++o < i;)if (null != (e = t[o]) && e >= e) for (r = e; ++o < i;)null != (e = t[o]) && e > r && (r = e) } else for (; ++o < i;)if (null != (e = n(t[o], o, t)) && e >= e) for (r = e; ++o < i;)null != (e = n(t[o], o, t)) && e > r && (r = e); return r }, t.mean = function (t, n) { var e, r = t.length, i = r, u = -1, a = 0; if (null == n) for (; ++u < r;)isNaN(e = o(t[u])) ? --i : a += e; else for (; ++u < r;)isNaN(e = o(n(t[u], u, t))) ? --i : a += e; if (i) return a / i }, t.median = function (t, e) { var r, i = t.length, u = -1, a = []; if (null == e) for (; ++u < i;)isNaN(r = o(t[u])) || a.push(r); else for (; ++u < i;)isNaN(r = o(e(t[u], u, t))) || a.push(r); return g(a.sort(n), .5) }, t.merge = _, t.min = y, t.pairs = function (t, n) { null == n && (n = i); for (var e = 0, r = t.length - 1, o = t[0], u = new Array(r < 0 ? 0 : r); e < r;)u[e] = n(o, o = t[++e]); return u }, t.permute = function (t, n) { for (var e = n.length, r = new Array(e); e--;)r[e] = t[n[e]]; return r }, t.quantile = g, t.range = l, t.scan = function (t, e) { if (r = t.length) { var r, i, o = 0, u = 0, a = t[u]; for (null == e && (e = n); ++o < r;)(e(i = t[o], a) < 0 || 0 !== e(a, a)) && (a = i, u = o); return 0 === e(a, a) ? u : void 0 } }, t.shuffle = function (t, n, e) { for (var r, i, o = (null == e ? t.length : e) - (n = null == n ? 0 : +n); o;)i = Math.random() * o-- | 0, r = t[o + n], t[o + n] = t[i + n], t[i + n] = r; return t }, t.sum = function (t, n) { var e, r = t.length, i = -1, o = 0; if (null == n) for (; ++i < r;)(e = +t[i]) && (o += e); else for (; ++i < r;)(e = +n(t[i], i, t)) && (o += e); return o }, t.ticks = h, t.tickIncrement = p, t.tickStep = d, t.transpose = m, t.variance = u, t.zip = function () { return m(arguments) }, t.axisTop = function (t) { return S(Wl, t) }, t.axisRight = function (t) { return S(Zl, t) }, t.axisBottom = function (t) { return S(Gl, t) }, t.axisLeft = function (t) { return S(Ql, t) }, t.brush = function () { return lr(ad) }, t.brushX = function () { return lr(od) }, t.brushY = function () { return lr(ud) }, t.brushSelection = function (t) { var n = t.__brush; return n ? n.dim.output(n.selection) : null }, t.chord = function () { function t(t) { var o, u, a, c, s, f, h = t.length, p = [], d = l(h), v = [], g = [], _ = g.groups = new Array(h), y = new Array(h * h); for (o = 0, s = -1; ++s < h;) { for (u = 0, f = -1; ++f < h;)u += t[s][f]; p.push(u), v.push(l(h)), o += u } for (e && d.sort(function (t, n) { return e(p[t], p[n]) }), r && v.forEach(function (n, e) { n.sort(function (n, i) { return r(t[e][n], t[e][i]) }) }), c = (o = yd(0, _d - n * h) / o) ? n : _d / h, u = 0, s = -1; ++s < h;) { for (a = u, f = -1; ++f < h;) { var m = d[s], x = v[m][f], b = t[m][x], w = u, M = u += b * o; y[x * h + m] = { index: m, subindex: x, startAngle: w, endAngle: M, value: b } } _[m] = { index: m, startAngle: a, endAngle: u, value: p[m] }, u += c } for (s = -1; ++s < h;)for (f = s - 1; ++f < h;) { var T = y[f * h + s], N = y[s * h + f]; (T.value || N.value) && g.push(T.value < N.value ? { source: N, target: T } : { source: T, target: N }) } return i ? g.sort(i) : g } var n = 0, e = null, r = null, i = null; return t.padAngle = function (e) { return arguments.length ? (n = yd(0, e), t) : n }, t.sortGroups = function (n) { return arguments.length ? (e = n, t) : e }, t.sortSubgroups = function (n) { return arguments.length ? (r = n, t) : r }, t.sortChords = function (n) { return arguments.length ? (null == n ? i = null : (i = hr(n))._ = n, t) : i && i._ }, t }, t.ribbon = function () { function t() { var t, a = md.call(arguments), c = n.apply(this, a), s = e.apply(this, a), f = +r.apply(this, (a[0] = c, a)), l = i.apply(this, a) - gd, h = o.apply(this, a) - gd, p = f * pd(l), d = f * dd(l), v = +r.apply(this, (a[0] = s, a)), g = i.apply(this, a) - gd, _ = o.apply(this, a) - gd; if (u || (u = t = vr()), u.moveTo(p, d), u.arc(0, 0, f, l, h), l === g && h === _ || (u.quadraticCurveTo(0, 0, v * pd(g), v * dd(g)), u.arc(0, 0, v, g, _)), u.quadraticCurveTo(0, 0, p, d), u.closePath(), t) return u = null, t + "" || null } var n = gr, e = _r, r = yr, i = mr, o = xr, u = null; return t.radius = function (n) { return arguments.length ? (r = "function" == typeof n ? n : pr(+n), t) : r }, t.startAngle = function (n) { return arguments.length ? (i = "function" == typeof n ? n : pr(+n), t) : i }, t.endAngle = function (n) { return arguments.length ? (o = "function" == typeof n ? n : pr(+n), t) : o }, t.source = function (e) { return arguments.length ? (n = e, t) : n }, t.target = function (n) { return arguments.length ? (e = n, t) : e }, t.context = function (n) { return arguments.length ? (u = null == n ? null : n, t) : u }, t }, t.nest = function () { function t(n, i, u, a) { if (i >= o.length) return null != e && n.sort(e), null != r ? r(n) : n; for (var c, s, f, l = -1, h = n.length, p = o[i++], d = wr(), v = u(); ++l < h;)(f = d.get(c = p(s = n[l]) + "")) ? f.push(s) : d.set(c, [s]); return d.each(function (n, e) { a(v, e, t(n, i, u, a)) }), v } function n(t, e) { if (++e > o.length) return t; var i, a = u[e - 1]; return null != r && e >= o.length ? i = t.entries() : (i = [], t.each(function (t, r) { i.push({ key: r, values: n(t, e) }) })), null != a ? i.sort(function (t, n) { return a(t.key, n.key) }) : i } var e, r, i, o = [], u = []; return i = { object: function (n) { return t(n, 0, Mr, Tr) }, map: function (n) { return t(n, 0, Nr, kr) }, entries: function (e) { return n(t(e, 0, Nr, kr), 0) }, key: function (t) { return o.push(t), i }, sortKeys: function (t) { return u[o.length - 1] = t, i }, sortValues: function (t) { return e = t, i }, rollup: function (t) { return r = t, i } } }, t.set = Er, t.map = wr, t.keys = function (t) { var n = []; for (var e in t) n.push(e); return n }, t.values = function (t) { var n = []; for (var e in t) n.push(t[e]); return n }, t.entries = function (t) { var n = []; for (var e in t) n.push({ key: e, value: t[e] }); return n }, t.color = on, t.rgb = sn, t.hsl = pn, t.lab = _n, t.hcl = Tn, t.cubehelix = Sn, t.dispatch = E, t.drag = function () { function n(t) { t.on("mousedown.drag", e).filter(g).on("touchstart.drag", o).on("touchmove.drag", u).on("touchend.drag touchcancel.drag", a).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)") } function e() { if (!h && p.apply(this, arguments)) { var n = c("mouse", d.apply(this, arguments), Ht, this, arguments); n && (Ot(t.event.view).on("mousemove.drag", r, !0).on("mouseup.drag", i, !0), $t(t.event.view), Xt(), l = !1, s = t.event.clientX, f = t.event.clientY, n("start")) } } function r() { if (Vt(), !l) { var n = t.event.clientX - s, e = t.event.clientY - f; l = n * n + e * e > x } _.mouse("drag") } function i() { Ot(t.event.view).on("mousemove.drag mouseup.drag", null), Wt(t.event.view, l), Vt(), _.mouse("end") } function o() { if (p.apply(this, arguments)) { var n, e, r = t.event.changedTouches, i = d.apply(this, arguments), o = r.length; for (n = 0; n < o; ++n)(e = c(r[n].identifier, i, jt, this, arguments)) && (Xt(), e("start")) } } function u() { var n, e, r = t.event.changedTouches, i = r.length; for (n = 0; n < i; ++n)(e = _[r[n].identifier]) && (Vt(), e("drag")) } function a() { var n, e, r = t.event.changedTouches, i = r.length; for (h && clearTimeout(h), h = setTimeout(function () { h = null }, 500), n = 0; n < i; ++n)(e = _[r[n].identifier]) && (Xt(), e("end")) } function c(e, r, i, o, u) { var a, c, s, f = i(r, e), l = y.copy(); if (Pt(new Gt(n, "beforestart", a, e, m, f[0], f[1], 0, 0, l), function () { return null != (t.event.subject = a = v.apply(o, u)) && (c = a.x - f[0] || 0, s = a.y - f[1] || 0, !0) })) return function t(h) { var p, d = f; switch (h) { case "start": _[e] = t, p = m++; break; case "end": delete _[e], --m; case "drag": f = i(r, e), p = m }Pt(new Gt(n, h, a, e, p, f[0] + c, f[1] + s, f[0] - d[0], f[1] - d[1], l), l.apply, l, [h, o, u]) } } var s, f, l, h, p = Qt, d = Jt, v = Kt, g = tn, _ = {}, y = E("start", "drag", "end"), m = 0, x = 0; return n.filter = function (t) { return arguments.length ? (p = "function" == typeof t ? t : Zt(!!t), n) : p }, n.container = function (t) { return arguments.length ? (d = "function" == typeof t ? t : Zt(t), n) : d }, n.subject = function (t) { return arguments.length ? (v = "function" == typeof t ? t : Zt(t), n) : v }, n.touchable = function (t) { return arguments.length ? (g = "function" == typeof t ? t : Zt(!!t), n) : g }, n.on = function () { var t = y.on.apply(y, arguments); return t === y ? n : t }, n.clickDistance = function (t) { return arguments.length ? (x = (t = +t) * t, n) : Math.sqrt(x) }, n }, t.dragDisable = $t, t.dragEnable = Wt, t.dsvFormat = Pr, t.csvParse = Cd, t.csvParseRows = zd, t.csvFormat = Pd, t.csvFormatRows = Rd, t.tsvParse = qd, t.tsvParseRows = Dd, t.tsvFormat = Ud, t.tsvFormatRows = Od, t.easeLinear = function (t) { return +t }, t.easeQuad = Ze, t.easeQuadIn = function (t) { return t * t }, t.easeQuadOut = function (t) { return t * (2 - t) }, t.easeQuadInOut = Ze, t.easeCubic = Ge, t.easeCubicIn = function (t) { return t * t * t }, t.easeCubicOut = function (t) { return --t * t * t + 1 }, t.easeCubicInOut = Ge, t.easePoly = Rp, t.easePolyIn = zp, t.easePolyOut = Pp, t.easePolyInOut = Rp, t.easeSin = Qe, t.easeSinIn = function (t) { return 1 - Math.cos(t * qp) }, t.easeSinOut = function (t) { return Math.sin(t * qp) }, t.easeSinInOut = Qe, t.easeExp = Je, t.easeExpIn = function (t) { return Math.pow(2, 10 * t - 10) }, t.easeExpOut = function (t) { return 1 - Math.pow(2, -10 * t) }, t.easeExpInOut = Je, t.easeCircle = Ke, t.easeCircleIn = function (t) { return 1 - Math.sqrt(1 - t * t) }, t.easeCircleOut = function (t) { return Math.sqrt(1 - --t * t) }, t.easeCircleInOut = Ke, t.easeBounce = tr, t.easeBounceIn = function (t) { return 1 - tr(1 - t) }, t.easeBounceOut = tr, t.easeBounceInOut = function (t) { return ((t *= 2) <= 1 ? 1 - tr(1 - t) : tr(t - 1) + 1) / 2 }, t.easeBack = Wp, t.easeBackIn = Vp, t.easeBackOut = $p, t.easeBackInOut = Wp, t.easeElastic = Qp, t.easeElasticIn = Gp, t.easeElasticOut = Qp, t.easeElasticInOut = Jp, t.forceCenter = function (t, n) { function e() { var e, i, o = r.length, u = 0, a = 0; for (e = 0; e < o; ++e)u += (i = r[e]).x, a += i.y; for (u = u / o - t, a = a / o - n, e = 0; e < o; ++e)(i = r[e]).x -= u, i.y -= a } var r; return null == t && (t = 0), null == n && (n = 0), e.initialize = function (t) { r = t }, e.x = function (n) { return arguments.length ? (t = +n, e) : t }, e.y = function (t) { return arguments.length ? (n = +t, e) : n }, e }, t.forceCollide = function (t) { function n() { for (var t, n, r, c, s, f, l, h = i.length, p = 0; p < a; ++p)for (n = Fr(i, Br, Hr).visitAfter(e), t = 0; t < h; ++t)r = i[t], f = o[r.index], l = f * f, c = r.x + r.vx, s = r.y + r.vy, n.visit(function (t, n, e, i, o) { var a = t.data, h = t.r, p = f + h; if (!a) return n > c + p || i < c - p || e > s + p || o < s - p; if (a.index > r.index) { var d = c - a.x - a.vx, v = s - a.y - a.vy, g = d * d + v * v; g < p * p && (0 === d && (d = Lr(), g += d * d), 0 === v && (v = Lr(), g += v * v), g = (p - (g = Math.sqrt(g))) / g * u, r.vx += (d *= g) * (p = (h *= h) / (l + h)), r.vy += (v *= g) * p, a.vx -= d * (p = 1 - p), a.vy -= v * p) } }) } function e(t) { if (t.data) return t.r = o[t.data.index]; for (var n = t.r = 0; n < 4; ++n)t[n] && t[n].r > t.r && (t.r = t[n].r) } function r() { if (i) { var n, e, r = i.length; for (o = new Array(r), n = 0; n < r; ++n)e = i[n], o[e.index] = +t(e, n, i) } } var i, o, u = 1, a = 1; return "function" != typeof t && (t = Rr(null == t ? 1 : +t)), n.initialize = function (t) { i = t, r() }, n.iterations = function (t) { return arguments.length ? (a = +t, n) : a }, n.strength = function (t) { return arguments.length ? (u = +t, n) : u }, n.radius = function (e) { return arguments.length ? (t = "function" == typeof e ? e : Rr(+e), r(), n) : t }, n }, t.forceLink = function (t) { function n(n) { for (var e = 0, r = t.length; e < p; ++e)for (var i, a, c, f, l, h, d, v = 0; v < r; ++v)a = (i = t[v]).source, f = (c = i.target).x + c.vx - a.x - a.vx || Lr(), l = c.y + c.vy - a.y - a.vy || Lr(), f *= h = ((h = Math.sqrt(f * f + l * l)) - u[v]) / h * n * o[v], l *= h, c.vx -= f * (d = s[v]), c.vy -= l * d, a.vx += f * (d = 1 - d), a.vy += l * d } function e() { if (a) { var n, e, l = a.length, h = t.length, p = wr(a, f); for (n = 0, c = new Array(l); n < h; ++n)(e = t[n]).index = n, "object" != typeof e.source && (e.source = Xr(p, e.source)), "object" != typeof e.target && (e.target = Xr(p, e.target)), c[e.source.index] = (c[e.source.index] || 0) + 1, c[e.target.index] = (c[e.target.index] || 0) + 1; for (n = 0, s = new Array(h); n < h; ++n)e = t[n], s[n] = c[e.source.index] / (c[e.source.index] + c[e.target.index]); o = new Array(h), r(), u = new Array(h), i() } } function r() { if (a) for (var n = 0, e = t.length; n < e; ++n)o[n] = +l(t[n], n, t) } function i() { if (a) for (var n = 0, e = t.length; n < e; ++n)u[n] = +h(t[n], n, t) } var o, u, a, c, s, f = jr, l = function (t) { return 1 / Math.min(c[t.source.index], c[t.target.index]) }, h = Rr(30), p = 1; return null == t && (t = []), n.initialize = function (t) { a = t, e() }, n.links = function (r) { return arguments.length ? (t = r, e(), n) : t }, n.id = function (t) { return arguments.length ? (f = t, n) : f }, n.iterations = function (t) { return arguments.length ? (p = +t, n) : p }, n.strength = function (t) { return arguments.length ? (l = "function" == typeof t ? t : Rr(+t), r(), n) : l }, n.distance = function (t) { return arguments.length ? (h = "function" == typeof t ? t : Rr(+t), i(), n) : h }, n }, t.forceManyBody = function () { function t(t) { var n, a = i.length, c = Fr(i, Vr, $r).visitAfter(e); for (u = t, n = 0; n < a; ++n)o = i[n], c.visit(r) } function n() { if (i) { var t, n, e = i.length; for (a = new Array(e), t = 0; t < e; ++t)n = i[t], a[n.index] = +c(n, t, i) } } function e(t) { var n, e, r, i, o, u = 0, c = 0; if (t.length) { for (r = i = o = 0; o < 4; ++o)(n = t[o]) && (e = Math.abs(n.value)) && (u += n.value, c += e, r += e * n.x, i += e * n.y); t.x = r / c, t.y = i / c } else { (n = t).x = n.data.x, n.y = n.data.y; do { u += a[n.data.index] } while (n = n.next) } t.value = u } function r(t, n, e, r) { if (!t.value) return !0; var i = t.x - o.x, c = t.y - o.y, h = r - n, p = i * i + c * c; if (h * h / l < p) return p < f && (0 === i && (i = Lr(), p += i * i), 0 === c && (c = Lr(), p += c * c), p < s && (p = Math.sqrt(s * p)), o.vx += i * t.value * u / p, o.vy += c * t.value * u / p), !0; if (!(t.length || p >= f)) { (t.data !== o || t.next) && (0 === i && (i = Lr(), p += i * i), 0 === c && (c = Lr(), p += c * c), p < s && (p = Math.sqrt(s * p))); do { t.data !== o && (h = a[t.data.index] * u / p, o.vx += i * h, o.vy += c * h) } while (t = t.next) } } var i, o, u, a, c = Rr(-30), s = 1, f = 1 / 0, l = .81; return t.initialize = function (t) { i = t, n() }, t.strength = function (e) { return arguments.length ? (c = "function" == typeof e ? e : Rr(+e), n(), t) : c }, t.distanceMin = function (n) { return arguments.length ? (s = n * n, t) : Math.sqrt(s) }, t.distanceMax = function (n) { return arguments.length ? (f = n * n, t) : Math.sqrt(f) }, t.theta = function (n) { return arguments.length ? (l = n * n, t) : Math.sqrt(l) }, t }, t.forceRadial = function (t, n, e) { function r(t) { for (var r = 0, i = o.length; r < i; ++r) { var c = o[r], s = c.x - n || 1e-6, f = c.y - e || 1e-6, l = Math.sqrt(s * s + f * f), h = (a[r] - l) * u[r] * t / l; c.vx += s * h, c.vy += f * h } } function i() { if (o) { var n, e = o.length; for (u = new Array(e), a = new Array(e), n = 0; n < e; ++n)a[n] = +t(o[n], n, o), u[n] = isNaN(a[n]) ? 0 : +c(o[n], n, o) } } var o, u, a, c = Rr(.1); return "function" != typeof t && (t = Rr(+t)), null == n && (n = 0), null == e && (e = 0), r.initialize = function (t) { o = t, i() }, r.strength = function (t) { return arguments.length ? (c = "function" == typeof t ? t : Rr(+t), i(), r) : c }, r.radius = function (n) { return arguments.length ? (t = "function" == typeof n ? n : Rr(+n), i(), r) : t }, r.x = function (t) { return arguments.length ? (n = +t, r) : n }, r.y = function (t) { return arguments.length ? (e = +t, r) : e }, r }, t.forceSimulation = function (t) { function n() { e(), p.call("tick", o), u < a && (h.stop(), p.call("end", o)) } function e() { var n, e, r = t.length; for (u += (s - u) * c, l.each(function (t) { t(u) }), n = 0; n < r; ++n)null == (e = t[n]).fx ? e.x += e.vx *= f : (e.x = e.fx, e.vx = 0), null == e.fy ? e.y += e.vy *= f : (e.y = e.fy, e.vy = 0) } function r() { for (var n, e = 0, r = t.length; e < r; ++e) { if (n = t[e], n.index = e, isNaN(n.x) || isNaN(n.y)) { var i = Yd * Math.sqrt(e), o = e * Bd; n.x = i * Math.cos(o), n.y = i * Math.sin(o) } (isNaN(n.vx) || isNaN(n.vy)) && (n.vx = n.vy = 0) } } function i(n) { return n.initialize && n.initialize(t), n } var o, u = 1, a = .001, c = 1 - Math.pow(a, 1 / 300), s = 0, f = .6, l = wr(), h = ue(n), p = E("tick", "end"); return null == t && (t = []), r(), o = { tick: e, restart: function () { return h.restart(n), o }, stop: function () { return h.stop(), o }, nodes: function (n) { return arguments.length ? (t = n, r(), l.each(i), o) : t }, alpha: function (t) { return arguments.length ? (u = +t, o) : u }, alphaMin: function (t) { return arguments.length ? (a = +t, o) : a }, alphaDecay: function (t) { return arguments.length ? (c = +t, o) : +c }, alphaTarget: function (t) { return arguments.length ? (s = +t, o) : s }, velocityDecay: function (t) { return arguments.length ? (f = 1 - t, o) : 1 - f }, force: function (t, n) { return arguments.length > 1 ? (null == n ? l.remove(t) : l.set(t, i(n)), o) : l.get(t) }, find: function (n, e, r) { var i, o, u, a, c, s = 0, f = t.length; for (null == r ? r = 1 / 0 : r *= r, s = 0; s < f; ++s)(u = (i = n - (a = t[s]).x) * i + (o = e - a.y) * o) < r && (c = a, r = u); return c }, on: function (t, n) { return arguments.length > 1 ? (p.on(t, n), o) : p.on(t) } } }, t.forceX = function (t) { function n(t) { for (var n, e = 0, u = r.length; e < u; ++e)(n = r[e]).vx += (o[e] - n.x) * i[e] * t } function e() { if (r) { var n, e = r.length; for (i = new Array(e), o = new Array(e), n = 0; n < e; ++n)i[n] = isNaN(o[n] = +t(r[n], n, r)) ? 0 : +u(r[n], n, r) } } var r, i, o, u = Rr(.1); return "function" != typeof t && (t = Rr(null == t ? 0 : +t)), n.initialize = function (t) { r = t, e() }, n.strength = function (t) { return arguments.length ? (u = "function" == typeof t ? t : Rr(+t), e(), n) : u }, n.x = function (r) { return arguments.length ? (t = "function" == typeof r ? r : Rr(+r), e(), n) : t }, n }, t.forceY = function (t) { function n(t) { for (var n, e = 0, u = r.length; e < u; ++e)(n = r[e]).vy += (o[e] - n.y) * i[e] * t } function e() { if (r) { var n, e = r.length; for (i = new Array(e), o = new Array(e), n = 0; n < e; ++n)i[n] = isNaN(o[n] = +t(r[n], n, r)) ? 0 : +u(r[n], n, r) } } var r, i, o, u = Rr(.1); return "function" != typeof t && (t = Rr(null == t ? 0 : +t)), n.initialize = function (t) { r = t, e() }, n.strength = function (t) { return arguments.length ? (u = "function" == typeof t ? t : Rr(+t), e(), n) : u }, n.y = function (r) { return arguments.length ? (t = "function" == typeof r ? r : Rr(+r), e(), n) : t }, n }, t.formatDefaultLocale = ri, t.formatLocale = ei, t.formatSpecifier = Kr, t.precisionFixed = ii, t.precisionPrefix = oi, t.precisionRound = ui, t.geoArea = function (t) { return Wv.reset(), _i(t, Zv), 2 * Wv }, t.geoBounds = function (t) { var n, e, r, i, o, u, a; if (nv = tv = -(Jd = Kd = 1 / 0), uv = [], _i(t, Qv), e = uv.length) { for (uv.sort(Ui), n = 1, o = [r = uv[0]]; n < e; ++n)Oi(r, (i = uv[n])[0]) || Oi(r, i[1]) ? (Di(r[0], i[1]) > Di(r[0], r[1]) && (r[1] = i[1]), Di(i[0], r[1]) > Di(r[0], r[1]) && (r[0] = i[0])) : o.push(r = i); for (u = -1 / 0, n = 0, r = o[e = o.length - 1]; n <= e; r = i, ++n)i = o[n], (a = Di(r[1], i[0])) > u && (u = a, Jd = i[0], tv = r[1]) } return uv = av = null, Jd === 1 / 0 || Kd === 1 / 0 ? [[NaN, NaN], [NaN, NaN]] : [[Jd, Kd], [tv, nv]] }, t.geoCentroid = function (t) { cv = sv = fv = lv = hv = pv = dv = vv = gv = _v = yv = 0, _i(t, Jv); var n = gv, e = _v, r = yv, i = n * n + e * e + r * r; return i < kv && (n = pv, e = dv, r = vv, sv < Nv && (n = fv, e = lv, r = hv), (i = n * n + e * e + r * r) < kv) ? [NaN, NaN] : [qv(e, n) * zv, li(r / Hv(i)) * zv] }, t.geoCircle = function () { function t() { var t = r.apply(this, arguments), a = i.apply(this, arguments) * Pv, c = o.apply(this, arguments) * Pv; return n = [], e = Ji(-t[0] * Pv, -t[1] * Pv, 0).invert, ro(u, a, c, 1), t = { type: "Polygon", coordinates: [n] }, n = e = null, t } var n, e, r = Zi([0, 0]), i = Zi(90), o = Zi(6), u = { point: function (t, r) { n.push(t = e(t, r)), t[0] *= zv, t[1] *= zv } }; return t.center = function (n) { return arguments.length ? (r = "function" == typeof n ? n : Zi([+n[0], +n[1]]), t) : r }, t.radius = function (n) { return arguments.length ? (i = "function" == typeof n ? n : Zi(+n), t) : i }, t.precision = function (n) { return arguments.length ? (o = "function" == typeof n ? n : Zi(+n), t) : o }, t }, t.geoClipAntimeridian = lg, t.geoClipCircle = go, t.geoClipExtent = function () { var t, n, e, r = 0, i = 0, o = 960, u = 500; return e = { stream: function (e) { return t && n === e ? t : t = yo(r, i, o, u)(n = e) }, extent: function (a) { return arguments.length ? (r = +a[0][0], i = +a[0][1], o = +a[1][0], u = +a[1][1], t = n = null, e) : [[r, i], [o, u]] } } }, t.geoClipRectangle = yo, t.geoContains = function (t, n) { return (t && yg.hasOwnProperty(t.type) ? yg[t.type] : To)(t, n) }, t.geoDistance = Mo, t.geoGraticule = Po, t.geoGraticule10 = function () { return Po()() }, t.geoInterpolate = function (t, n) { var e = t[0] * Pv, r = t[1] * Pv, i = n[0] * Pv, o = n[1] * Pv, u = Dv(r), a = Yv(r), c = Dv(o), s = Yv(o), f = u * Dv(e), l = u * Yv(e), h = c * Dv(i), p = c * Yv(i), d = 2 * li(Hv(hi(o - r) + u * c * hi(i - e))), v = Yv(d), g = d ? function (t) { var n = Yv(t *= d) / v, e = Yv(d - t) / v, r = e * f + n * h, i = e * l + n * p, o = e * a + n * s; return [qv(i, r) * zv, qv(o, Hv(r * r + i * i)) * zv] } : function () { return [e * zv, r * zv] }; return g.distance = d, g }, t.geoLength = wo, t.geoPath = function (t, n) { function e(t) { return t && ("function" == typeof o && i.pointRadius(+o.apply(this, arguments)), _i(t, r(i))), i.result() } var r, i, o = 4.5; return e.area = function (t) { return _i(t, r(wg)), wg.result() }, e.measure = function (t) { return _i(t, r(jg)), jg.result() }, e.bounds = function (t) { return _i(t, r(Sg)), Sg.result() }, e.centroid = function (t) { return _i(t, r(Ug)), Ug.result() }, e.projection = function (n) { return arguments.length ? (r = null == n ? (t = null, Ro) : (t = n).stream, e) : t }, e.context = function (t) { return arguments.length ? (i = null == t ? (n = null, new Go) : new $o(n = t), "function" != typeof o && i.pointRadius(o), e) : n }, e.pointRadius = function (t) { return arguments.length ? (o = "function" == typeof t ? t : (i.pointRadius(+t), +t), e) : o }, e.projection(t).context(n) }, t.geoAlbers = vu, t.geoAlbersUsa = function () { function t(t) { var n = t[0], e = t[1]; return a = null, i.point(n, e), a || (o.point(n, e), a) || (u.point(n, e), a) } function n() { return e = r = null, t } var e, r, i, o, u, a, c = vu(), s = du().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), f = du().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), l = { point: function (t, n) { a = [t, n] } }; return t.invert = function (t) { var n = c.scale(), e = c.translate(), r = (t[0] - e[0]) / n, i = (t[1] - e[1]) / n; return (i >= .12 && i < .234 && r >= -.425 && r < -.214 ? s : i >= .166 && i < .234 && r >= -.214 && r < -.115 ? f : c).invert(t) }, t.stream = function (t) { return e && r === t ? e : e = gu([c.stream(r = t), s.stream(t), f.stream(t)]) }, t.precision = function (t) { return arguments.length ? (c.precision(t), s.precision(t), f.precision(t), n()) : c.precision() }, t.scale = function (n) { return arguments.length ? (c.scale(n), s.scale(.35 * n), f.scale(n), t.translate(c.translate())) : c.scale() }, t.translate = function (t) { if (!arguments.length) return c.translate(); var e = c.scale(), r = +t[0], a = +t[1]; return i = c.translate(t).clipExtent([[r - .455 * e, a - .238 * e], [r + .455 * e, a + .238 * e]]).stream(l), o = s.translate([r - .307 * e, a + .201 * e]).clipExtent([[r - .425 * e + Nv, a + .12 * e + Nv], [r - .214 * e - Nv, a + .234 * e - Nv]]).stream(l), u = f.translate([r - .205 * e, a + .212 * e]).clipExtent([[r - .214 * e + Nv, a + .166 * e + Nv], [r - .115 * e - Nv, a + .234 * e - Nv]]).stream(l), n() }, t.fitExtent = function (n, e) { return nu(t, n, e) }, t.fitSize = function (n, e) { return eu(t, n, e) }, t.fitWidth = function (n, e) { return ru(t, n, e) }, t.fitHeight = function (n, e) { return iu(t, n, e) }, t.scale(1070) }, t.geoAzimuthalEqualArea = function () { return su(Wg).scale(124.75).clipAngle(179.999) }, t.geoAzimuthalEqualAreaRaw = Wg, t.geoAzimuthalEquidistant = function () { return su(Zg).scale(79.4188).clipAngle(179.999) }, t.geoAzimuthalEquidistantRaw = Zg, t.geoConicConformal = function () { return lu(wu).scale(109.5).parallels([30, 30]) }, t.geoConicConformalRaw = wu, t.geoConicEqualArea = du, t.geoConicEqualAreaRaw = pu, t.geoConicEquidistant = function () { return lu(Tu).scale(131.154).center([0, 13.9389]) }, t.geoConicEquidistantRaw = Tu, t.geoEquirectangular = function () { return su(Mu).scale(152.63) }, t.geoEquirectangularRaw = Mu, t.geoGnomonic = function () { return su(Nu).scale(144.049).clipAngle(60) }, t.geoGnomonicRaw = Nu, t.geoIdentity = function () { function t() { return i = o = null, u } var n, e, r, i, o, u, a = 1, c = 0, s = 0, f = 1, l = 1, h = Ro, p = null, d = Ro; return u = { stream: function (t) { return i && o === t ? i : i = h(d(o = t)) }, postclip: function (i) { return arguments.length ? (d = i, p = n = e = r = null, t()) : d }, clipExtent: function (i) { return arguments.length ? (d = null == i ? (p = n = e = r = null, Ro) : yo(p = +i[0][0], n = +i[0][1], e = +i[1][0], r = +i[1][1]), t()) : null == p ? null : [[p, n], [e, r]] }, scale: function (n) { return arguments.length ? (h = ku((a = +n) * f, a * l, c, s), t()) : a }, translate: function (n) { return arguments.length ? (h = ku(a * f, a * l, c = +n[0], s = +n[1]), t()) : [c, s] }, reflectX: function (n) { return arguments.length ? (h = ku(a * (f = n ? -1 : 1), a * l, c, s), t()) : f < 0 }, reflectY: function (n) { return arguments.length ? (h = ku(a * f, a * (l = n ? -1 : 1), c, s), t()) : l < 0 }, fitExtent: function (t, n) { return nu(u, t, n) }, fitSize: function (t, n) { return eu(u, t, n) }, fitWidth: function (t, n) { return ru(u, t, n) }, fitHeight: function (t, n) { return iu(u, t, n) } } }, t.geoProjection = su, t.geoProjectionMutator = fu, t.geoMercator = function () { return xu(mu).scale(961 / Cv) }, t.geoMercatorRaw = mu, t.geoNaturalEarth1 = function () { return su(Su).scale(175.295) }, t.geoNaturalEarth1Raw = Su, t.geoOrthographic = function () { return su(Eu).scale(249.5).clipAngle(90 + Nv) }, t.geoOrthographicRaw = Eu, t.geoStereographic = function () { return su(Au).scale(250).clipAngle(142) }, t.geoStereographicRaw = Au, t.geoTransverseMercator = function () { var t = xu(Cu), n = t.center, e = t.rotate; return t.center = function (t) { return arguments.length ? n([-t[1], t[0]]) : (t = n(), [t[1], -t[0]]) }, t.rotate = function (t) { return arguments.length ? e([t[0], t[1], t.length > 2 ? t[2] + 90 : 90]) : (t = e(), [t[0], t[1], t[2] - 90]) }, e([0, 0, 90]).scale(159.155) }, t.geoTransverseMercatorRaw = Cu, t.geoRotation = eo, t.geoStream = _i, t.geoTransform = function (t) { return { stream: Jo(t) } }, t.cluster = function () { function t(t) { var o, u = 0; t.eachAfter(function (t) { var e = t.children; e ? (t.x = Pu(e), t.y = Lu(e)) : (t.x = o ? u += n(t, o) : 0, t.y = 0, o = t) }); var a = Du(t), c = Uu(t), s = a.x - n(a, c) / 2, f = c.x + n(c, a) / 2; return t.eachAfter(i ? function (n) { n.x = (n.x - t.x) * e, n.y = (t.y - n.y) * r } : function (n) { n.x = (n.x - s) / (f - s) * e, n.y = (1 - (t.y ? n.y / t.y : 1)) * r }) } var n = zu, e = 1, r = 1, i = !1; return t.separation = function (e) { return arguments.length ? (n = e, t) : n }, t.size = function (n) { return arguments.length ? (i = !1, e = +n[0], r = +n[1], t) : i ? null : [e, r] }, t.nodeSize = function (n) { return arguments.length ? (i = !0, e = +n[0], r = +n[1], t) : i ? [e, r] : null }, t }, t.hierarchy = Iu, t.pack = function () { function t(t) { return t.x = e / 2, t.y = r / 2, n ? t.eachBefore(la(n)).eachAfter(ha(i, .5)).eachBefore(pa(1)) : t.eachBefore(la(fa)).eachAfter(ha(ca, 1)).eachAfter(ha(i, t.r / Math.min(e, r))).eachBefore(pa(Math.min(e, r) / (2 * t.r))), t } var n = null, e = 1, r = 1, i = ca; return t.radius = function (e) { return arguments.length ? (n = ua(e), t) : n }, t.size = function (n) { return arguments.length ? (e = +n[0], r = +n[1], t) : [e, r] }, t.padding = function (n) { return arguments.length ? (i = "function" == typeof n ? n : sa(+n), t) : i }, t }, t.packSiblings = function (t) { return oa(t), t }, t.packEnclose = Vu, t.partition = function () { function t(t) { var u = t.height + 1; return t.x0 = t.y0 = i, t.x1 = e, t.y1 = r / u, t.eachBefore(n(r, u)), o && t.eachBefore(da), t } function n(t, n) { return function (e) { e.children && va(e, e.x0, t * (e.depth + 1) / n, e.x1, t * (e.depth + 2) / n); var r = e.x0, o = e.y0, u = e.x1 - i, a = e.y1 - i; u < r && (r = u = (r + u) / 2), a < o && (o = a = (o + a) / 2), e.x0 = r, e.y0 = o, e.x1 = u, e.y1 = a } } var e = 1, r = 1, i = 0, o = !1; return t.round = function (n) { return arguments.length ? (o = !!n, t) : o }, t.size = function (n) { return arguments.length ? (e = +n[0], r = +n[1], t) : [e, r] }, t.padding = function (n) { return arguments.length ? (i = +n, t) : i }, t }, t.stratify = function () { function t(t) { var r, i, o, u, a, c, s, f = t.length, l = new Array(f), h = {}; for (i = 0; i < f; ++i)r = t[i], a = l[i] = new ju(r), null != (c = n(r, i, t)) && (c += "") && (h[s = Qg + (a.id = c)] = s in h ? Kg : a); for (i = 0; i < f; ++i)if (a = l[i], null != (c = e(t[i], i, t)) && (c += "")) { if (!(u = h[Qg + c])) throw new Error("missing: " + c); if (u === Kg) throw new Error("ambiguous: " + c); u.children ? u.children.push(a) : u.children = [a], a.parent = u } else { if (o) throw new Error("multiple roots"); o = a } if (!o) throw new Error("no root"); if (o.parent = Jg, o.eachBefore(function (t) { t.depth = t.parent.depth + 1, --f }).eachBefore(Hu), o.parent = null, f > 0) throw new Error("cycle"); return o } var n = ga, e = _a; return t.id = function (e) { return arguments.length ? (n = aa(e), t) : n }, t.parentId = function (n) { return arguments.length ? (e = aa(n), t) : e }, t }, t.tree = function () { function t(t) { var r = Na(t); if (r.eachAfter(n), r.parent.m = -r.z, r.eachBefore(e), c) t.eachBefore(i); else { var s = t, f = t, l = t; t.eachBefore(function (t) { t.x < s.x && (s = t), t.x > f.x && (f = t), t.depth > l.depth && (l = t) }); var h = s === f ? 1 : o(s, f) / 2, p = h - s.x, d = u / (f.x + h + p), v = a / (l.depth || 1); t.eachBefore(function (t) { t.x = (t.x + p) * d, t.y = t.depth * v }) } return t } function n(t) { var n = t.children, e = t.parent.children, i = t.i ? e[t.i - 1] : null; if (n) { wa(t); var u = (n[0].z + n[n.length - 1].z) / 2; i ? (t.z = i.z + o(t._, i._), t.m = t.z - u) : t.z = u } else i && (t.z = i.z + o(t._, i._)); t.parent.A = r(t, i, t.parent.A || e[0]) } function e(t) { t._.x = t.z + t.parent.m, t.m += t.parent.m } function r(t, n, e) { if (n) { for (var r, i = t, u = t, a = n, c = i.parent.children[0], s = i.m, f = u.m, l = a.m, h = c.m; a = xa(a), i = ma(i), a && i;)c = ma(c), (u = xa(u)).a = t, (r = a.z + l - i.z - s + o(a._, i._)) > 0 && (ba(Ma(a, t, e), t, r), s += r, f += r), l += a.m, s += i.m, h += c.m, f += u.m; a && !xa(u) && (u.t = a, u.m += l - f), i && !ma(c) && (c.t = i, c.m += s - h, e = t) } return e } function i(t) { t.x *= u, t.y = t.depth * a } var o = ya, u = 1, a = 1, c = null; return t.separation = function (n) { return arguments.length ? (o = n, t) : o }, t.size = function (n) { return arguments.length ? (c = !1, u = +n[0], a = +n[1], t) : c ? null : [u, a] }, t.nodeSize = function (n) { return arguments.length ? (c = !0, u = +n[0], a = +n[1], t) : c ? [u, a] : null }, t }, t.treemap = function () { function t(t) { return t.x0 = t.y0 = 0, t.x1 = i, t.y1 = o, t.eachBefore(n), u = [0], r && t.eachBefore(da), t } function n(t) { var n = u[t.depth], r = t.x0 + n, i = t.y0 + n, o = t.x1 - n, h = t.y1 - n; o < r && (r = o = (r + o) / 2), h < i && (i = h = (i + h) / 2), t.x0 = r, t.y0 = i, t.x1 = o, t.y1 = h, t.children && (n = u[t.depth + 1] = a(t) / 2, r += l(t) - n, i += c(t) - n, o -= s(t) - n, h -= f(t) - n, o < r && (r = o = (r + o) / 2), h < i && (i = h = (i + h) / 2), e(t, r, i, o, h)) } var e = n_, r = !1, i = 1, o = 1, u = [0], a = ca, c = ca, s = ca, f = ca, l = ca; return t.round = function (n) { return arguments.length ? (r = !!n, t) : r }, t.size = function (n) { return arguments.length ? (i = +n[0], o = +n[1], t) : [i, o] }, t.tile = function (n) { return arguments.length ? (e = aa(n), t) : e }, t.padding = function (n) { return arguments.length ? t.paddingInner(n).paddingOuter(n) : t.paddingInner() }, t.paddingInner = function (n) { return arguments.length ? (a = "function" == typeof n ? n : sa(+n), t) : a }, t.paddingOuter = function (n) { return arguments.length ? t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n) : t.paddingTop() }, t.paddingTop = function (n) { return arguments.length ? (c = "function" == typeof n ? n : sa(+n), t) : c }, t.paddingRight = function (n) { return arguments.length ? (s = "function" == typeof n ? n : sa(+n), t) : s }, t.paddingBottom = function (n) { return arguments.length ? (f = "function" == typeof n ? n : sa(+n), t) : f }, t.paddingLeft = function (n) { return arguments.length ? (l = "function" == typeof n ? n : sa(+n), t) : l }, t }, t.treemapBinary = function (t, n, e, r, i) { function o(t, n, e, r, i, u, a) { if (t >= n - 1) { var s = c[t]; return s.x0 = r, s.y0 = i, s.x1 = u, void (s.y1 = a) } for (var l = f[t], h = e / 2 + l, p = t + 1, d = n - 1; p < d;) { var v = p + d >>> 1; f[v] < h ? p = v + 1 : d = v } h - f[p - 1] < f[p] - h && t + 1 < p && --p; var g = f[p] - l, _ = e - g; if (u - r > a - i) { var y = (r * _ + u * g) / e; o(t, p, g, r, i, y, a), o(p, n, _, y, i, u, a) } else { var m = (i * _ + a * g) / e; o(t, p, g, r, i, u, m), o(p, n, _, r, m, u, a) } } var u, a, c = t.children, s = c.length, f = new Array(s + 1); for (f[0] = a = u = 0; u < s; ++u)f[u + 1] = a += c[u].value; o(0, s, t.value, n, e, r, i) }, t.treemapDice = va, t.treemapSlice = ka, t.treemapSliceDice = function (t, n, e, r, i) { (1 & t.depth ? ka : va)(t, n, e, r, i) }, t.treemapSquarify = n_, t.treemapResquarify = e_, t.interpolate = Vn, t.interpolateArray = Fn, t.interpolateBasis = Cn, t.interpolateBasisClosed = zn, t.interpolateDate = In, t.interpolateNumber = Yn, t.interpolateObject = Bn, t.interpolateRound = $n, t.interpolateString = Xn, t.interpolateTransformCss = Jh, t.interpolateTransformSvg = Kh, t.interpolateZoom = Kn, t.interpolateRgb = Xh, t.interpolateRgbBasis = Vh, t.interpolateRgbBasisClosed = $h, t.interpolateHsl = ip, t.interpolateHslLong = op, t.interpolateLab = function (t, n) { var e = Un((t = _n(t)).l, (n = _n(n)).l), r = Un(t.a, n.a), i = Un(t.b, n.b), o = Un(t.opacity, n.opacity); return function (n) { return t.l = e(n), t.a = r(n), t.b = i(n), t.opacity = o(n), t + "" } }, t.interpolateHcl = up, t.interpolateHclLong = ap, t.interpolateCubehelix = cp, t.interpolateCubehelixLong = sp, t.quantize = function (t, n) { for (var e = new Array(n), r = 0; r < n; ++r)e[r] = t(r / (n - 1)); return e }, t.path = vr, t.polygonArea = function (t) { for (var n, e = -1, r = t.length, i = t[r - 1], o = 0; ++e < r;)n = i, i = t[e], o += n[1] * i[0] - n[0] * i[1]; return o / 2 }, t.polygonCentroid = function (t) { for (var n, e, r = -1, i = t.length, o = 0, u = 0, a = t[i - 1], c = 0; ++r < i;)n = a, a = t[r], c += e = n[0] * a[1] - a[0] * n[1], o += (n[0] + a[0]) * e, u += (n[1] + a[1]) * e; return c *= 3, [o / c, u / c] }, t.polygonHull = function (t) { if ((e = t.length) < 3) return null; var n, e, r = new Array(e), i = new Array(e); for (n = 0; n < e; ++n)r[n] = [+t[n][0], +t[n][1], n]; for (r.sort(Aa), n = 0; n < e; ++n)i[n] = [r[n][0], -r[n][1]]; var o = Ca(r), u = Ca(i), a = u[0] === o[0], c = u[u.length - 1] === o[o.length - 1], s = []; for (n = o.length - 1; n >= 0; --n)s.push(t[r[o[n]][2]]); for (n = +a; n < u.length - c; ++n)s.push(t[r[u[n]][2]]); return s }, t.polygonContains = function (t, n) { for (var e, r, i = t.length, o = t[i - 1], u = n[0], a = n[1], c = o[0], s = o[1], f = !1, l = 0; l < i; ++l)e = (o = t[l])[0], (r = o[1]) > a != s > a && u < (c - e) * (a - r) / (s - r) + e && (f = !f), c = e, s = r; return f }, t.polygonLength = function (t) { for (var n, e, r = -1, i = t.length, o = t[i - 1], u = o[0], a = o[1], c = 0; ++r < i;)n = u, e = a, n -= u = (o = t[r])[0], e -= a = o[1], c += Math.sqrt(n * n + e * e); return c }, t.quadtree = Fr, t.queue = Ua, t.randomUniform = o_, t.randomNormal = u_, t.randomLogNormal = a_, t.randomBates = s_, t.randomIrwinHall = c_, t.randomExponential = f_, t.request = Fa, t.html = l_, t.json = h_, t.text = p_, t.xml = d_, t.csv = v_, t.tsv = g_, t.scaleBand = Va, t.scalePoint = function () { return $a(Va().paddingInner(1)) }, t.scaleIdentity = uc, t.scaleLinear = oc, t.scaleLog = dc, t.scaleOrdinal = Xa, t.scaleImplicit = x_, t.scalePow = gc, t.scaleSqrt = function () { return gc().exponent(.5) }, t.scaleQuantile = _c, t.scaleQuantize = yc, t.scaleThreshold = mc, t.scaleTime = function () { return Ds(J_, G_, D_, L_, P_, C_, E_, T_, t.timeFormat).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]) }, t.scaleUtc = function () { return Ds(wy, xy, uy, iy, ey, ty, E_, T_, t.utcFormat).domain([Date.UTC(2e3, 0, 1), Date.UTC(2e3, 0, 2)]) }, t.schemeCategory10 = Oy, t.schemeCategory20b = Fy, t.schemeCategory20c = Iy, t.schemeCategory20 = Yy, t.interpolateCubehelixDefault = By, t.interpolateRainbow = function (t) { (t < 0 || t > 1) && (t -= Math.floor(t)); var n = Math.abs(t - .5); return Xy.h = 360 * t - 100, Xy.s = 1.5 - 1.5 * n, Xy.l = .8 - .9 * n, Xy + "" }, t.interpolateWarm = Hy, t.interpolateCool = jy, t.interpolateViridis = Vy, t.interpolateMagma = $y, t.interpolateInferno = Wy, t.interpolatePlasma = Zy, t.scaleSequential = Fs, t.create = function (t) { return Ot(D(t).call(document.documentElement)) }, t.creator = D, t.local = Ft, t.matcher = oh, t.mouse = Ht, t.namespace = R, t.namespaces = nh, t.clientPoint = Bt, t.select = Ot, t.selectAll = function (t) { return "string" == typeof t ? new Dt([document.querySelectorAll(t)], [document.documentElement]) : new Dt([null == t ? [] : t], ch) }, t.selection = Ut, t.selector = O, t.selectorAll = I, t.style = rt, t.touch = jt, t.touches = function (t, n) { null == n && (n = Yt().touches); for (var e = 0, r = n ? n.length : 0, i = new Array(r); e < r; ++e)i[e] = Bt(t, n[e]); return i }, t.window = K, t.customEvent = Pt, t.arc = function () { function t() { var t, s, f = +n.apply(this, arguments), l = +e.apply(this, arguments), h = o.apply(this, arguments) - om, p = u.apply(this, arguments) - om, d = Gy(p - h), v = p > h; if (c || (c = t = vr()), l < f && (s = l, l = f, f = s), l > rm) if (d > um - rm) c.moveTo(l * Jy(h), l * nm(h)), c.arc(0, 0, l, h, p, !v), f > rm && (c.moveTo(f * Jy(p), f * nm(p)), c.arc(0, 0, f, p, h, v)); else { var g, _, y = h, m = p, x = h, b = p, w = d, M = d, T = a.apply(this, arguments) / 2, N = T > rm && (i ? +i.apply(this, arguments) : em(f * f + l * l)), k = tm(Gy(l - f) / 2, +r.apply(this, arguments)), S = k, E = k; if (N > rm) { var A = Bs(N / f * nm(T)), C = Bs(N / l * nm(T)); (w -= 2 * A) > rm ? (A *= v ? 1 : -1, x += A, b -= A) : (w = 0, x = b = (h + p) / 2), (M -= 2 * C) > rm ? (C *= v ? 1 : -1, y += C, m -= C) : (M = 0, y = m = (h + p) / 2) } var z = l * Jy(y), P = l * nm(y), R = f * Jy(b), L = f * nm(b); if (k > rm) { var q = l * Jy(m), D = l * nm(m), U = f * Jy(x), O = f * nm(x); if (d < im) { var F = w > rm ? Ws(z, P, U, O, q, D, R, L) : [R, L], I = z - F[0], Y = P - F[1], B = q - F[0], H = D - F[1], j = 1 / nm(Ys((I * B + Y * H) / (em(I * I + Y * Y) * em(B * B + H * H))) / 2), X = em(F[0] * F[0] + F[1] * F[1]); S = tm(k, (f - X) / (j - 1)), E = tm(k, (l - X) / (j + 1)) } } M > rm ? E > rm ? (g = Zs(U, O, z, P, l, E, v), _ = Zs(q, D, R, L, l, E, v), c.moveTo(g.cx + g.x01, g.cy + g.y01), E < k ? c.arc(g.cx, g.cy, E, Qy(g.y01, g.x01), Qy(_.y01, _.x01), !v) : (c.arc(g.cx, g.cy, E, Qy(g.y01, g.x01), Qy(g.y11, g.x11), !v), c.arc(0, 0, l, Qy(g.cy + g.y11, g.cx + g.x11), Qy(_.cy + _.y11, _.cx + _.x11), !v), c.arc(_.cx, _.cy, E, Qy(_.y11, _.x11), Qy(_.y01, _.x01), !v))) : (c.moveTo(z, P), c.arc(0, 0, l, y, m, !v)) : c.moveTo(z, P), f > rm && w > rm ? S > rm ? (g = Zs(R, L, q, D, f, -S, v), _ = Zs(z, P, U, O, f, -S, v), c.lineTo(g.cx + g.x01, g.cy + g.y01), S < k ? c.arc(g.cx, g.cy, S, Qy(g.y01, g.x01), Qy(_.y01, _.x01), !v) : (c.arc(g.cx, g.cy, S, Qy(g.y01, g.x01), Qy(g.y11, g.x11), !v), c.arc(0, 0, f, Qy(g.cy + g.y11, g.cx + g.x11), Qy(_.cy + _.y11, _.cx + _.x11), v), c.arc(_.cx, _.cy, S, Qy(_.y11, _.x11), Qy(_.y01, _.x01), !v))) : c.arc(0, 0, f, b, x, v) : c.lineTo(R, L) } else c.moveTo(0, 0); if (c.closePath(), t) return c = null, t + "" || null } var n = Hs, e = js, r = Is(0), i = null, o = Xs, u = Vs, a = $s, c = null; return t.centroid = function () { var t = (+n.apply(this, arguments) + +e.apply(this, arguments)) / 2, r = (+o.apply(this, arguments) + +u.apply(this, arguments)) / 2 - im / 2; return [Jy(r) * t, nm(r) * t] }, t.innerRadius = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Is(+e), t) : n }, t.outerRadius = function (n) { return arguments.length ? (e = "function" == typeof n ? n : Is(+n), t) : e }, t.cornerRadius = function (n) { return arguments.length ? (r = "function" == typeof n ? n : Is(+n), t) : r }, t.padRadius = function (n) { return arguments.length ? (i = null == n ? null : "function" == typeof n ? n : Is(+n), t) : i }, t.startAngle = function (n) { return arguments.length ? (o = "function" == typeof n ? n : Is(+n), t) : o }, t.endAngle = function (n) { return arguments.length ? (u = "function" == typeof n ? n : Is(+n), t) : u }, t.padAngle = function (n) { return arguments.length ? (a = "function" == typeof n ? n : Is(+n), t) : a }, t.context = function (n) { return arguments.length ? (c = null == n ? null : n, t) : c }, t }, t.area = nf, t.line = tf, t.pie = function () { function t(t) { var a, c, s, f, l, h = t.length, p = 0, d = new Array(h), v = new Array(h), g = +i.apply(this, arguments), _ = Math.min(um, Math.max(-um, o.apply(this, arguments) - g)), y = Math.min(Math.abs(_) / h, u.apply(this, arguments)), m = y * (_ < 0 ? -1 : 1); for (a = 0; a < h; ++a)(l = v[d[a] = a] = +n(t[a], a, t)) > 0 && (p += l); for (null != e ? d.sort(function (t, n) { return e(v[t], v[n]) }) : null != r && d.sort(function (n, e) { return r(t[n], t[e]) }), a = 0, s = p ? (_ - h * m) / p : 0; a < h; ++a, g = f)c = d[a], f = g + ((l = v[c]) > 0 ? l * s : 0) + m, v[c] = { data: t[c], index: a, value: l, startAngle: g, endAngle: f, padAngle: y }; return v } var n = rf, e = ef, r = null, i = Is(0), o = Is(um), u = Is(0); return t.value = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Is(+e), t) : n }, t.sortValues = function (n) { return arguments.length ? (e = n, r = null, t) : e }, t.sort = function (n) { return arguments.length ? (r = n, e = null, t) : r }, t.startAngle = function (n) { return arguments.length ? (i = "function" == typeof n ? n : Is(+n), t) : i }, t.endAngle = function (n) { return arguments.length ? (o = "function" == typeof n ? n : Is(+n), t) : o }, t.padAngle = function (n) { return arguments.length ? (u = "function" == typeof n ? n : Is(+n), t) : u }, t }, t.areaRadial = sf, t.radialArea = sf, t.lineRadial = cf, t.radialLine = cf, t.pointRadial = ff, t.linkHorizontal = function () { return pf(df) }, t.linkVertical = function () { return pf(vf) }, t.linkRadial = function () { var t = pf(gf); return t.angle = t.x, delete t.x, t.radius = t.y, delete t.y, t }, t.symbol = function () { function t() { var t; if (r || (r = t = vr()), n.apply(this, arguments).draw(r, +e.apply(this, arguments)), t) return r = null, t + "" || null } var n = Is(sm), e = Is(64), r = null; return t.type = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Is(e), t) : n }, t.size = function (n) { return arguments.length ? (e = "function" == typeof n ? n : Is(+n), t) : e }, t.context = function (n) { return arguments.length ? (r = null == n ? null : n, t) : r }, t }, t.symbols = km, t.symbolCircle = sm, t.symbolCross = fm, t.symbolDiamond = pm, t.symbolSquare = ym, t.symbolStar = _m, t.symbolTriangle = xm, t.symbolWye = Nm, t.curveBasisClosed = function (t) { return new xf(t) }, t.curveBasisOpen = function (t) { return new bf(t) }, t.curveBasis = function (t) { return new mf(t) }, t.curveBundle = Sm, t.curveCardinalClosed = Am, t.curveCardinalOpen = Cm, t.curveCardinal = Em, t.curveCatmullRomClosed = Pm, t.curveCatmullRomOpen = Rm, t.curveCatmullRom = zm, t.curveLinearClosed = function (t) { return new zf(t) }, t.curveLinear = Qs, t.curveMonotoneX = function (t) { return new Df(t) }, t.curveMonotoneY = function (t) { return new Uf(t) }, t.curveNatural = function (t) { return new Ff(t) }, t.curveStep = function (t) { return new Yf(t, .5) }, t.curveStepAfter = function (t) { return new Yf(t, 1) }, t.curveStepBefore = function (t) { return new Yf(t, 0) }, t.stack = function () { function t(t) { var o, u, a = n.apply(this, arguments), c = t.length, s = a.length, f = new Array(s); for (o = 0; o < s; ++o) { for (var l, h = a[o], p = f[o] = new Array(c), d = 0; d < c; ++d)p[d] = l = [0, +i(t[d], h, d, t)], l.data = t[d]; p.key = h } for (o = 0, u = e(f); o < s; ++o)f[u[o]].index = o; return r(f, u), f } var n = Is([]), e = Hf, r = Bf, i = jf; return t.keys = function (e) { return arguments.length ? (n = "function" == typeof e ? e : Is(cm.call(e)), t) : n }, t.value = function (n) { return arguments.length ? (i = "function" == typeof n ? n : Is(+n), t) : i }, t.order = function (n) { return arguments.length ? (e = null == n ? Hf : "function" == typeof n ? n : Is(cm.call(n)), t) : e }, t.offset = function (n) { return arguments.length ? (r = null == n ? Bf : n, t) : r }, t }, t.stackOffsetExpand = function (t, n) { if ((r = t.length) > 0) { for (var e, r, i, o = 0, u = t[0].length; o < u; ++o) { for (i = e = 0; e < r; ++e)i += t[e][o][1] || 0; if (i) for (e = 0; e < r; ++e)t[e][o][1] /= i } Bf(t, n) } }, t.stackOffsetDiverging = function (t, n) { if ((a = t.length) > 1) for (var e, r, i, o, u, a, c = 0, s = t[n[0]].length; c < s; ++c)for (o = u = 0, e = 0; e < a; ++e)(i = (r = t[n[e]][c])[1] - r[0]) >= 0 ? (r[0] = o, r[1] = o += i) : i < 0 ? (r[1] = u, r[0] = u += i) : r[0] = o }, t.stackOffsetNone = Bf, t.stackOffsetSilhouette = function (t, n) { if ((e = t.length) > 0) { for (var e, r = 0, i = t[n[0]], o = i.length; r < o; ++r) { for (var u = 0, a = 0; u < e; ++u)a += t[u][r][1] || 0; i[r][1] += i[r][0] = -a / 2 } Bf(t, n) } }, t.stackOffsetWiggle = function (t, n) { if ((i = t.length) > 0 && (r = (e = t[n[0]]).length) > 0) { for (var e, r, i, o = 0, u = 1; u < r; ++u) { for (var a = 0, c = 0, s = 0; a < i; ++a) { for (var f = t[n[a]], l = f[u][1] || 0, h = (l - (f[u - 1][1] || 0)) / 2, p = 0; p < a; ++p) { var d = t[n[p]]; h += (d[u][1] || 0) - (d[u - 1][1] || 0) } c += l, s += h * l } e[u - 1][1] += e[u - 1][0] = o, c && (o -= s / c) } e[u - 1][1] += e[u - 1][0] = o, Bf(t, n) } }, t.stackOrderAscending = Xf, t.stackOrderDescending = function (t) { return Xf(t).reverse() }, t.stackOrderInsideOut = function (t) { var n, e, r = t.length, i = t.map(Vf), o = Hf(t).sort(function (t, n) { return i[n] - i[t] }), u = 0, a = 0, c = [], s = []; for (n = 0; n < r; ++n)e = o[n], u < a ? (u += i[e], c.push(e)) : (a += i[e], s.push(e)); return s.reverse().concat(c) }, t.stackOrderNone = Hf, t.stackOrderReverse = function (t) { return Hf(t).reverse() }, t.timeInterval = xc, t.timeMillisecond = T_, t.timeMilliseconds = N_, t.utcMillisecond = T_, t.utcMilliseconds = N_, t.timeSecond = E_, t.timeSeconds = A_, t.utcSecond = E_, t.utcSeconds = A_, t.timeMinute = C_, t.timeMinutes = z_, t.timeHour = P_, t.timeHours = R_, t.timeDay = L_, t.timeDays = q_, t.timeWeek = D_, t.timeWeeks = H_, t.timeSunday = D_, t.timeSundays = H_, t.timeMonday = U_, t.timeMondays = j_, t.timeTuesday = O_, t.timeTuesdays = X_, t.timeWednesday = F_, t.timeWednesdays = V_, t.timeThursday = I_, t.timeThursdays = $_, t.timeFriday = Y_, t.timeFridays = W_, t.timeSaturday = B_, t.timeSaturdays = Z_, t.timeMonth = G_, t.timeMonths = Q_, t.timeYear = J_, t.timeYears = K_, t.utcMinute = ty, t.utcMinutes = ny, t.utcHour = ey, t.utcHours = ry, t.utcDay = iy, t.utcDays = oy, t.utcWeek = uy, t.utcWeeks = py, t.utcSunday = uy, t.utcSundays = py, t.utcMonday = ay, t.utcMondays = dy, t.utcTuesday = cy, t.utcTuesdays = vy, t.utcWednesday = sy, t.utcWednesdays = gy, t.utcThursday = fy, t.utcThursdays = _y, t.utcFriday = ly, t.utcFridays = yy, t.utcSaturday = hy, t.utcSaturdays = my, t.utcMonth = xy, t.utcMonths = by, t.utcYear = wy, t.utcYears = Ty, t.timeFormatDefaultLocale = Rs, t.timeFormatLocale = kc, t.isoFormat = Ay, t.isoParse = Cy, t.now = re, t.timer = ue, t.timerFlush = ae, t.timeout = he, t.interval = function (t, n, e) { var r = new oe, i = n; return null == n ? (r.restart(t, n, e), r) : (n = +n, e = null == e ? re() : +e, r.restart(function o(u) { u += i, r.restart(o, i += n, e), t(u) }, n, e), r) }, t.transition = $e, t.active = function (t, n) { var e, r, i = t.__transition; if (i) { n = null == n ? null : n + ""; for (r in i) if ((e = i[r]).state > wp && e.name === n) return new Ve([[t]], td, n, +r) } return null }, t.interrupt = ye, t.voronoi = function () { function t(t) { return new Nl(t.map(function (r, i) { var o = [Math.round(n(r, i, t) / Ym) * Ym, Math.round(e(r, i, t) / Ym) * Ym]; return o.index = i, o.data = r, o }), r) } var n = Wf, e = Zf, r = null; return t.polygons = function (n) { return t(n).polygons() }, t.links = function (n) { return t(n).links() }, t.triangles = function (n) { return t(n).triangles() }, t.x = function (e) { return arguments.length ? (n = "function" == typeof e ? e : $f(+e), t) : n }, t.y = function (n) { return arguments.length ? (e = "function" == typeof n ? n : $f(+n), t) : e }, t.extent = function (n) { return arguments.length ? (r = null == n ? null : [[+n[0][0], +n[0][1]], [+n[1][0], +n[1][1]]], t) : r && [[r[0][0], r[0][1]], [r[1][0], r[1][1]]] }, t.size = function (n) { return arguments.length ? (r = null == n ? null : [[0, 0], [+n[0], +n[1]]], t) : r && [r[1][0] - r[0][0], r[1][1] - r[0][1]] }, t }, t.zoom = function () { function n(t) { t.property("__zoom", Ll).on("wheel.zoom", c).on("mousedown.zoom", s).on("dblclick.zoom", f).filter(x).on("touchstart.zoom", l).on("touchmove.zoom", h).on("touchend.zoom touchcancel.zoom", p).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)") } function e(t, n) { return (n = Math.max(b[0], Math.min(b[1], n))) === t.k ? t : new El(n, t.x, t.y) } function r(t, n, e) { var r = n[0] - e[0] * t.k, i = n[1] - e[1] * t.k; return r === t.x && i === t.y ? t : new El(t.k, r, i) } function i(t) { return [(+t[0][0] + +t[1][0]) / 2, (+t[0][1] + +t[1][1]) / 2] } function o(t, n, e) { t.on("start.zoom", function () { u(this, arguments).start() }).on("interrupt.zoom end.zoom", function () { u(this, arguments).end() }).tween("zoom", function () { var t = this, r = arguments, o = u(t, r), a = _.apply(t, r), c = e || i(a), s = Math.max(a[1][0] - a[0][0], a[1][1] - a[0][1]), f = t.__zoom, l = "function" == typeof n ? n.apply(t, r) : n, h = T(f.invert(c).concat(s / f.k), l.invert(c).concat(s / l.k)); return function (t) { if (1 === t) t = l; else { var n = h(t), e = s / n[2]; t = new El(e, c[0] - n[0] * e, c[1] - n[1] * e) } o.zoom(null, t) } }) } function u(t, n) { for (var e, r = 0, i = N.length; r < i; ++r)if ((e = N[r]).that === t) return e; return new a(t, n) } function a(t, n) { this.that = t, this.args = n, this.index = -1, this.active = 0, this.extent = _.apply(t, n) } function c() { if (g.apply(this, arguments)) { var t = u(this, arguments), n = this.__zoom, i = Math.max(b[0], Math.min(b[1], n.k * Math.pow(2, m.apply(this, arguments)))), o = Ht(this); if (t.wheel) t.mouse[0][0] === o[0] && t.mouse[0][1] === o[1] || (t.mouse[1] = n.invert(t.mouse[0] = o)), clearTimeout(t.wheel); else { if (n.k === i) return; t.mouse = [o, n.invert(o)], ye(this), t.start() } zl(), t.wheel = setTimeout(function () { t.wheel = null, t.end() }, A), t.zoom("mouse", y(r(e(n, i), t.mouse[0], t.mouse[1]), t.extent, w)) } } function s() { if (!v && g.apply(this, arguments)) { var n = u(this, arguments), e = Ot(t.event.view).on("mousemove.zoom", function () { if (zl(), !n.moved) { var e = t.event.clientX - o, i = t.event.clientY - a; n.moved = e * e + i * i > C } n.zoom("mouse", y(r(n.that.__zoom, n.mouse[0] = Ht(n.that), n.mouse[1]), n.extent, w)) }, !0).on("mouseup.zoom", function () { e.on("mousemove.zoom mouseup.zoom", null), Wt(t.event.view, n.moved), zl(), n.end() }, !0), i = Ht(this), o = t.event.clientX, a = t.event.clientY; $t(t.event.view), Cl(), n.mouse = [i, this.__zoom.invert(i)], ye(this), n.start() } } function f() { if (g.apply(this, arguments)) { var i = this.__zoom, u = Ht(this), a = i.invert(u), c = i.k * (t.event.shiftKey ? .5 : 2), s = y(r(e(i, c), u, a), _.apply(this, arguments), w); zl(), M > 0 ? Ot(this).transition().duration(M).call(o, s, u) : Ot(this).call(n.transform, s) } } function l() { if (g.apply(this, arguments)) { var n, e, r, i, o = u(this, arguments), a = t.event.changedTouches, c = a.length; for (Cl(), e = 0; e < c; ++e)i = [i = jt(this, a, (r = a[e]).identifier), this.__zoom.invert(i), r.identifier], o.touch0 ? o.touch1 || (o.touch1 = i) : (o.touch0 = i, n = !0); if (d && (d = clearTimeout(d), !o.touch1)) return o.end(), void ((i = Ot(this).on("dblclick.zoom")) && i.apply(this, arguments)); n && (d = setTimeout(function () { d = null }, S), ye(this), o.start()) } } function h() { var n, i, o, a, c = u(this, arguments), s = t.event.changedTouches, f = s.length; for (zl(), d && (d = clearTimeout(d)), n = 0; n < f; ++n)o = jt(this, s, (i = s[n]).identifier), c.touch0 && c.touch0[2] === i.identifier ? c.touch0[0] = o : c.touch1 && c.touch1[2] === i.identifier && (c.touch1[0] = o); if (i = c.that.__zoom, c.touch1) { var l = c.touch0[0], h = c.touch0[1], p = c.touch1[0], v = c.touch1[1], g = (g = p[0] - l[0]) * g + (g = p[1] - l[1]) * g, _ = (_ = v[0] - h[0]) * _ + (_ = v[1] - h[1]) * _; i = e(i, Math.sqrt(g / _)), o = [(l[0] + p[0]) / 2, (l[1] + p[1]) / 2], a = [(h[0] + v[0]) / 2, (h[1] + v[1]) / 2] } else { if (!c.touch0) return; o = c.touch0[0], a = c.touch0[1] } c.zoom("touch", y(r(i, o, a), c.extent, w)) } function p() { var n, e, r = u(this, arguments), i = t.event.changedTouches, o = i.length; for (Cl(), v && clearTimeout(v), v = setTimeout(function () { v = null }, S), n = 0; n < o; ++n)e = i[n], r.touch0 && r.touch0[2] === e.identifier ? delete r.touch0 : r.touch1 && r.touch1[2] === e.identifier && delete r.touch1; r.touch1 && !r.touch0 && (r.touch0 = r.touch1, delete r.touch1), r.touch0 ? r.touch0[1] = this.__zoom.invert(r.touch0[0]) : r.end() } var d, v, g = Pl, _ = Rl, y = Ul, m = ql, x = Dl, b = [0, 1 / 0], w = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], M = 250, T = Kn, N = [], k = E("start", "zoom", "end"), S = 500, A = 150, C = 0; return n.transform = function (t, n) { var e = t.selection ? t.selection() : t; e.property("__zoom", Ll), t !== e ? o(t, n) : e.interrupt().each(function () { u(this, arguments).start().zoom(null, "function" == typeof n ? n.apply(this, arguments) : n).end() }) }, n.scaleBy = function (t, e) { n.scaleTo(t, function () { return this.__zoom.k * ("function" == typeof e ? e.apply(this, arguments) : e) }) }, n.scaleTo = function (t, o) { n.transform(t, function () { var t = _.apply(this, arguments), n = this.__zoom, u = i(t), a = n.invert(u), c = "function" == typeof o ? o.apply(this, arguments) : o; return y(r(e(n, c), u, a), t, w) }) }, n.translateBy = function (t, e, r) { n.transform(t, function () { return y(this.__zoom.translate("function" == typeof e ? e.apply(this, arguments) : e, "function" == typeof r ? r.apply(this, arguments) : r), _.apply(this, arguments), w) }) }, n.translateTo = function (t, e, r) { n.transform(t, function () { var t = _.apply(this, arguments), n = this.__zoom, o = i(t); return y(Hm.translate(o[0], o[1]).scale(n.k).translate("function" == typeof e ? -e.apply(this, arguments) : -e, "function" == typeof r ? -r.apply(this, arguments) : -r), t, w) }) }, a.prototype = { start: function () { return 1 == ++this.active && (this.index = N.push(this) - 1, this.emit("start")), this }, zoom: function (t, n) { return this.mouse && "mouse" !== t && (this.mouse[1] = n.invert(this.mouse[0])), this.touch0 && "touch" !== t && (this.touch0[1] = n.invert(this.touch0[0])), this.touch1 && "touch" !== t && (this.touch1[1] = n.invert(this.touch1[0])), this.that.__zoom = n, this.emit("zoom"), this }, end: function () { return 0 == --this.active && (N.splice(this.index, 1), this.index = -1, this.emit("end")), this }, emit: function (t) { Pt(new Sl(n, t, this.that.__zoom), k.apply, k, [t, this.that, this.args]) } }, n.wheelDelta = function (t) { return arguments.length ? (m = "function" == typeof t ? t : kl(+t), n) : m }, n.filter = function (t) { return arguments.length ? (g = "function" == typeof t ? t : kl(!!t), n) : g }, n.touchable = function (t) { return arguments.length ? (x = "function" == typeof t ? t : kl(!!t), n) : x }, n.extent = function (t) { return arguments.length ? (_ = "function" == typeof t ? t : kl([[+t[0][0], +t[0][1]], [+t[1][0], +t[1][1]]]), n) : _ }, n.scaleExtent = function (t) { return arguments.length ? (b[0] = +t[0], b[1] = +t[1], n) : [b[0], b[1]] }, n.translateExtent = function (t) { return arguments.length ? (w[0][0] = +t[0][0], w[1][0] = +t[1][0], w[0][1] = +t[0][1], w[1][1] = +t[1][1], n) : [[w[0][0], w[0][1]], [w[1][0], w[1][1]]] }, n.constrain = function (t) { return arguments.length ? (y = t, n) : y }, n.duration = function (t) { return arguments.length ? (M = +t, n) : M }, n.interpolate = function (t) { return arguments.length ? (T = t, n) : T }, n.on = function () { var t = k.on.apply(k, arguments); return t === k ? n : t }, n.clickDistance = function (t) { return arguments.length ? (C = (t = +t) * t, n) : Math.sqrt(C) }, n }, t.zoomTransform = Al, t.zoomIdentity = Hm, Object.defineProperty(t, "__esModule", { value: !0 }) })